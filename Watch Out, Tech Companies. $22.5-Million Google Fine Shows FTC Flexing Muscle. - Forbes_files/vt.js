VATracker=function(){var AK=location.protocol+"//tm.verticalacuity.com/vat/",c=location.protocol+"//syn.verticalacuity.com/varw/",J="visitT",O="visitT",Q="I",N="F",AN="logM",C="_vaTC",T="_vaEngT",AM="_vaNP",AO="_vaHC",AI=10000,AE=1800000;var t=new Date().getTime(),M=document,G="",k,g,i,r,x=[50],j=0,q=0,AH=0,l=0,V=5,m=5;var d={D:"debug",I:"info",W:"warn",E:"error",F:"fatal"};var u={uuid:-1,cId:-1,track:true,sendSess:true,seq:0,intEngTimeReport:15000,lastAccess:-1};var f={holdout:false};var s=function(){u.uuid=-1;u.track=true;u.sendSess=true;u.seq=0;u.intEngTimeReport=15000;u.lastAccess=-1;f.holdout=false;AB(T,"",-1);AB(AO,"",-1);AB(AM,"",-1);};var AC=function(AP,AQ){return AP.indexOf(AQ)!=-1;};var X=function(){var AP=navigator.userAgent.toLowerCase();return((AC(AP,"msie")||AC(AP,"gecko"))&&(!AC(AP,"msie")||(parseInt(parseFloat(AP.substring(AP.indexOf("msie ")+5)))>=6)&&!AC(AP,"mac")));};var AL=function(){G=b(M.domain);r=new Z();r.start();W();if(!u.sendSess&&u.track&&u.uuid==-1){P(d.D,"User didn't have a UUID.  Resetting state.");s();L();}if(typeof (u.lastAccess)=="UNDEFINED"){P(d.D,"lastAccess was undefined");u.lastAccess=new Date().getTime();L();}if(u.lastAccess!=-1&&(new Date().getTime()-u.lastAccess)>AE){s();L();}if(u.track){if(u.cId==-1){u.cId=y(6);L();u.cId=-1;W();if(u.cId==-1){u.track=false;L();return ;}if(!X()){P(d.D,"Unsupported user agent");u.track=false;L();return ;}}var AP=new Date();k={act:"click",uuid:u.uuid,cId:u.cId,seq:u.seq,pId:t,mTyp:N,eTime:AG(true),pUrl:encodeURIComponent(M.location),tOff:AP.getTimezoneOffset()};if(u.sendSess){g={act:"sess",cId:u.cId,tOff:AP.getTimezoneOffset(),ts:t,pUrl:encodeURIComponent(M.location),rUrl:encodeURIComponent(M.referrer)};if(I("_vaNH")!==null){g.nh="true";}}R(window,"unload",D);i=new Y();i.init();u.seq++;L();}};var W=function(){u=h(I(C),u);f=h(I(AO),f);};var L=function(){u.lastAccess=new Date().getTime();AB(C,A(u),null);AB(AO,A(f),null);};var R=function(AQ,AP,AR){if(AQ.attachEvent){AQ.attachEvent("on"+AP,AR);}else{if(AQ.addEventListener){AQ.addEventListener(AP,AR,false);}else{AQ["on"+AP]=AR;}}};var B=function(AQ,AP,AR){if(AQ.detachEvent){AQ.detachEvent("on"+AP,AR);}else{if(AQ.removeEventListener){AQ.removeEventListener(AP,AR,false);}else{AQ["on"+AP]=null;}}};var y=function(AS){var AP="";for(var AR=0;AR<AS;AR++){var AQ=Math.floor(Math.random()*62);AP+=String.fromCharCode(AQ+(AQ>35?61:(AQ>9?55:48)));}return AP;};var h=function(AS,AR){if(AS!==null&&typeof (AS)!="undefined"){var AQ=AS.split("&");if(AR===null||typeof (AR)=="undefined"){AR={};}for(var AP=0;AP<AQ.length;AP++){var AT=AQ[AP].split("=");if(AT[1]=="null"){AT[1]=null;}else{if(AT[1]=="false"){AT[1]=false;}else{if(AT[1]=="true"){AT[1]=true;}}}AR[AT[0]]=AT[1];}}return AR;};var A=function(AQ){var AP="";for(p in AQ){AP+=(AP!==""?"&":"")+p+"="+encodeURI(AQ[p]);}return AP;};var F=function(AQ){if(AQ){var AR=AQ.width;var AP=AQ.height;if(AR==1){switch(AP){case 1:u.track=true;break;case 2:u.track=false;break;default:P(d.W,"Unexpected image returned.  Height - "+AP);}}else{P(d.W,"Unexpected image returned.  Width - "+AR);}}};var D=function(){try{if(u.track&&u.uuid!=-1){o(t,r.getTime());a(N);i.terminate();}}catch(AP){P(d.E,"Exception in handleUnload:  "+AP.message);}};var U=function(){try{if(typeof VASessionResponse!="undefined"){if(VASessionResponse.responseData.doTrack){u.sendSess=false;u.track=true;u.uuid=VASessionResponse.responseData.uuid;k.uuid=u.uuid;u.intEngTimeReport=VASessionResponse.responseData.interimEngTimeReport;f.holdout=VASessionResponse.responseData.isHoldout;S();E();}else{u.sendSess=false;u.track=false;P(d.D,"Received doTrack = false");}}else{if(l<4){l++;setTimeout(U,500*l);}else{u.sendSess=false;u.track=false;P(d.W,"Received session response with undefined VASessionResponse after all attempts. UUID - "+u.uuid);}}L();}catch(AP){P(d.E,"Failure in sessionSuccess:  "+AP.message);}};var AA=function(){try{if(AH<m){e();AH++;}else{P(d.W,"sessionFail: maxFailures reached");u.track=false;L();}}catch(AP){P(d.E,"Exception in sessionFail:  "+AP.message);}};var n=function(AP,AQ){try{F(AQ);if(u.track){i.enter();new K(u.intEngTimeReport).start();}else{P(d.I,"Not tracking visitor:  "+u.uuid);}L();}catch(AR){P(d.E,"Exception in clickSuccess:  "+AR.message);}};var AF=function(){try{P(d.W,"Failed to send click data");if(q<V){S();q++;}else{P(d.W,"Reached max failures on send of click data.  Setting track to false");u.track=false;L();}}catch(AP){P(d.E,"Exception in clickFail:  "+AP.message);}};var I=function(AR){var AQ=" "+M.cookie+";";var AP=AQ.indexOf(" "+AR+"=");if(AP!=-1){AP+=AR.length+2;var AS=AQ.indexOf(";",AP);return decodeURIComponent(AQ.substring(AP,AS));}return null;};var AB=function(AQ,AT,AP){var AS=AQ+"="+AT+"; path=/";AS+=G!==null?"; domain="+G:"";if(AP!==null){var AR=new Date();AR.setTime(AR.getTime()+(AP*60*1000));AS+="; expires="+AR.toGMTString();}M.cookie=AS;};var b=function(AP){return"."+AP.replace(/^www\./i,"");};var o=function(AS,AQ){var AR=I(T);var AP={};if(AR!==null){AP=h(I(T));}AP[AS]=AQ;AB(T,A(AP),null);};var AG=function(AP){var AR="";var AS=I(T);if(AS!==null){var AQ=h(AS);for(p in AQ){(AR=="")?AR=p+":"+AQ[p]:AR+=","+p+":"+AQ[p];}if(AP){AB(T,"",-1);}}return AR;};var z=function(AS,AP,AT,AQ){var AR=new Image();if(AT){AR.onload=function(AU){AT(AU,AR);};}if(AQ){AR.onerror=function(AU){AQ(AU,AR);};}AR.src=AK+AS+"?"+AP+"&cb="+new Date().getTime();j++;if(j>49){j=0;}x[j]=AR;return AR;};var e=function(){try{var AS=document.getElementsByTagName("head")[0];var AQ=M.createElement("script");AQ.type="text/javascript";AQ.defer=true;AQ.src=AK+J+"?"+A(g)+"&cb="+new Date().getTime();var AP=false;AQ.onload=AQ.onreadystatechange=function(){if(!AP&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){AP=true;U();}};AQ.onerror=AA;AS.appendChild(AQ);}catch(AR){P(d.E,"Failure in sendSession:  "+AR.message);}};var S=function(){z(J,A(k),n,AF);};var a=function(AP){};var E=function(){if(M.cookie.indexOf("_vaNP")==-1){if(location.protocol!="https:"){var AP=u.seq==1;var AR=new Date();var AQ=M.createElement("script");AQ.type="text/javascript";AQ.src=c+"getPromo"+"?conId="+u.uuid+"&cId="+u.cId+"&fp="+AP+"&holdout="+f.holdout+"&pUrl="+encodeURIComponent(M.location)+"&cb="+AR.getTime()+"&tOff="+AR.getTimezoneOffset()/-60+"&seq="+u.seq;((M.getElementsByTagName("head"))[0]).appendChild(AQ);}}};var P=function(AS,AR){try{var AP="level="+AS+"&cId="+u.cId+"&uuid="+u.uuid+"&pvT="+t+"&msg="+encodeURIComponent(AR)+"&ts="+new Date().getTime();z(AN,AP);}catch(AQ){}};var Y=function(){var AS={};this.init=function(){AS=new AP();};this.enter=function(){r.on();AS.start();};var AR=function(){AS.stop();};var AQ=function(){AR();i=new AJ();i.init(w);i.enter();};this.terminate=function(){AR();i=new H();i.init();i.enter();};var AP=function(){var AX=true;var AW=true;var AV=new Date();var Ab=-1;var AY=true;var AU=function(){try{AX=false;}catch(Ac){P(d.E,"Exception in ActivityTracker.handleBlur:  "+Ac.message);}};var Aa=function(){try{AX=true;AV=new Date();}catch(Ac){P(d.E,"Exception in ActivityTracker.handleFocus:  "+Ac.message);}};var AT=function(){try{AX=true;AV=new Date();}catch(Ac){P(d.E,"Exception in ActivityTracker.handleMove:  "+Ac.message);}};var AZ=function(){try{if(AX!=AW){if(AX){AY();}else{AQ();}AW=AX;}if((new Date().getTime()-AV.getTime())>AI){AX=false;AQ();AW=AX;}if(AY){Ab=setTimeout(AZ,500);}else{Ab=-1;}}catch(Ac){P(d.E,"Exception in ActivityTracker.report:  "+Ac.message);}};this.start=function(){AY=true;R(window,"blur",AU);R(window,"focus",Aa);R(M,"mousemove",AT);Ab=setTimeout(AZ,500);};this.stop=function(){AY=false;if(Ab!=-1){clearTimeout(Ab);Ab=-1;}B(window,"blur",AU);B(window,"focus",Aa);B(M,"mousemove",AT);};};};var AJ=function(){var AQ={};this.init=function(AR){AQ=new AR();AQ.init(this);};this.enter=function(){r.off();AQ.enter();};var AP=function(){AQ.exit();};this.exit=function(){AP();};this.active=function(){AP();i=new Y();i.init();i.enter();};this.inactive=function(){P(d.W,"Received inactive call to Inactive state");};this.focusGained=function(){AP();i=new Y();i.init();i.enter();};this.focusLost=function(){P(d.W,"Inactive.focusLost:  Unexpected signal for this state");};this.terminate=function(){AP();i=new H();i.init();i.enter();};};var w=function(){var AS=false,AP={},AQ;this.init=function(AU){AP=AU;AS=true;AQ=0;};this.enter=function(){R(M,"mousemove",AR);R(window,"focus",AT);};this.exit=function(){B(M,"mousemove",AR);B(window,"focus",AT);AS=false;};var AT=function(){try{B(window,"focus",AT);if(AS){AP.focusGained();}else{P(d.W,"Dormant.notifyFocus - Received notify when active == false");}}catch(AU){P(d.E,"Exception in Dormant.notifyFocus:  "+AU.message);}};var AR=function(){try{B(M,"mousemove",AR);if(AS){AP.active();}else{P(d.W,"Dormant.notifyMovement - Received notify when active == false");}}catch(AU){P(d.E,"Exception in Dormant.notifyMovement:  "+AU.message);}};};var H=function(){this.init=function(){};this.enter=function(){r.off();};this.exit=function(){};this.terminate=function(){};};var Z=function(){var AR=true;var AQ=0;var AP=0;this.on=function(){if(AR===false){AP=new Date().getTime();AR=true;}else{}};this.off=function(){if(AR===true){var AS=new Date().getTime();AQ+=AS-AP;AP=AS;AR=false;}};this.getTime=function(){if(AR){return AQ+(new Date().getTime()-AP);}else{return AQ;}};this.start=function(){AR=true;AQ=0;AP=new Date().getTime();};};var K=function(AR){var AQ=function(){if(r.getTime()>=AR){AP();}else{setTimeout(AQ,2000);}};var AP=function(){a(Q);};this.start=function(){setTimeout(AQ,10000);};};try{AL();if(u.track){if(u.sendSess){e();}else{E();S();}}}catch(AD){try{P(d.E,"Failure in VATracker:  "+AD.message);}catch(v){}}}();