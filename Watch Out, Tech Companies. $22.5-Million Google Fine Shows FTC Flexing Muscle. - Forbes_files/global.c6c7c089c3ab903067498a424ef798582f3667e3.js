var JSON;if(!JSON){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1;}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck);}cj[a]=e;}return cj[a];}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a;});return c;}function cs(){cq=b;}function cr(){setTimeout(cs,0);return cq=f.now();}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP");}catch(b){}}function ch(){try{return new a.XMLHttpRequest;}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);}}l=k,k=d[g];if(k==="*"){k=l;}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break;}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)));}}}return c;}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i]);}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break;}}}if(f[0] in d){j=f[0];}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break;}k||(k=i);}j=j||k;}if(j){j!==f[0]&&f.unshift(j);return d[j];}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d);});}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d);}}else{d(a,b);}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);}e&&f.extend(!0,a,e);}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l;}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c);}}};}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;}}return d+"px";}d=by(a,b);if(d<0||d==null){d=a.style[b];}if(bt.test(d)){return d;}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);}}return d+"px";}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild;}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm);}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked;}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[];}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"));}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d]);}}}h.data&&(h.data=f.extend({},h.data));}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a;}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop());}}return c;}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c;});}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c;});}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1;});if(O.test(b)){return f.filter(b,d,!c);}b=f.filter(b,d);}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c;});}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11;}function K(){return !0;}function J(){return !1;}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire());},0);}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue;}if(b!=="toJSON"){return !1;}}return !0;}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d;}catch(g){}f.data(a,c,d);}else{d=b;}}return d;}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0;}return b;}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left");}catch(a){setTimeout(J,1);return;}e.ready();}}var e=function(a,b){return new e.fn.init(a,b,h);},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase();},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this;}if(a.nodeType){this.context=this[0]=a,this.length=1;return this;}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this;}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a);}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a);}this.length=1,this[0]=h;}this.context=c,this.selector=a;return this;}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a);}if(e.isFunction(a)){return f.ready(a);}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this);},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length;},toArray:function(){return F.call(this,0);},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a];},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d;},each:function(a,b){return e.each(this,a,b);},ready:function(a){e.bindReady(),A.add(a);return this;},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","));},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b);}));},end:function(){return this.prevObject||this.constructor(null);},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue;}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f);}}}return i;},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e;},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0);},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1);}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return;}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready");}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1);}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null;}catch(d){}c.documentElement.doScroll&&b&&J();}}}},isFunction:function(a){return e.type(a)==="function";},isArray:Array.isArray||function(a){return e.type(a)==="array";},isWindow:function(a){return a!=null&&a==a.window;},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a);},type:function(a){return a==null?String(a):I[C.call(a)]||"object";},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1;}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1;}}catch(c){return !1;}var d;for(d in a){}return d===b||D.call(a,d);},isEmptyObject:function(a){for(var b in a){return !1;}return !0;},error:function(a){throw new Error(a);},parseJSON:function(b){if(typeof b!="string"||!b){return null;}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b);}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))();}e.error("Invalid JSON: "+b);},parseXML:function(c){if(typeof c!="string"||!c){return null;}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c));}catch(g){d=b;}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d;},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b);})(b);},camelCase:function(a){return a.replace(w,"ms-").replace(v,x);},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase();},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break;}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break;}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break;}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break;}}}}return a;},trim:G?function(a){return a==null?"":G.call(a);}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"");},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a);}return c;},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c);}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c;}}}return -1;},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e];}}else{while(c[e]!==b){a[d++]=c[e++];}}a.length=d;return a;},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f]);}return d;},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f);}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f);}}return h.concat.apply([],h);},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d;}if(!e.isFunction(a)){return b;}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)));};g.guid=a.guid=a.guid||g.guid||e.guid++;return g;},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f);}g=1;}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c);}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);}}g=1;}}return g?a:k?c.call(a):m?c(a[0],d):h;},now:function(){return(new Date).getTime();},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"};},sub:function(){function a(b,c){return new a.fn.init(b,c);}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b);},a.fn.init.prototype=a.fn;var b=a(c);return a;},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase();}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready();}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready());});return e;}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g);}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break;}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])));},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]));}return this;},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break;}}}}}return this;},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0;}}}return !1;},empty:function(){c=[];return this;},disable:function(){c=d=e=b;return this;},disabled:function(){return !c;},lock:function(){d=b,(!e||e===!0)&&p.disable();return this;},locked:function(){return !d;},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this;},fire:function(){p.fireWith(this,arguments);return this;},fired:function(){return !!i;}};return p;};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e;},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this;},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this;},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g]);}):i[a](d[e]);});}).promise();},promise:function(a){if(a==null){a=h;}else{for(var b in h){a[b]=h[b];}}return a;}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;}i.done(function(){e="resolved";},c.disable,d.lock).fail(function(){e="rejected";},b.disable,d.lock),a&&a.call(i,i);return i;},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e);};}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b);};}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;}g||j.resolveWith(j,b);}else{j!==a&&j.resolveWith(j,d?[a]:[]);}return k;}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{};}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test;}catch(r){b.deleteExpando=!1;}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1;}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j));});return b;}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a);},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return;}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events;}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i;}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return;}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]];}if(!(c?m:f.isEmptyObject)(d)){return;}}}if(!c){delete j[k].data;if(!m(j[k])){return;}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null);}},_data:function(a,b,c){return f.data(a,b,c,!0);},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b;}}return !0;}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));}f._data(j,"parsedAttrs",!0);}}return m;}if(typeof a=="object"){return this.each(function(){f.data(this,a);});}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m;}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d);});},null,c,arguments.length>1,null,!1);},removeData:function(a){return this.each(function(){f.removeData(this,a);});}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1));},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"));}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[];}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b);},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"));}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a);}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a);});},dequeue:function(a){return this.each(function(){f.dequeue(this,a);});},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d);};});},clearQueue:function(a){return this.queue(a||"fx",[]);},promise:function(a,c){function m(){--h||d.resolveWith(e,[e]);}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m);}}m();return d.promise(c);}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1);},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a);});},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1);},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a];}catch(c){}});},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a;}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");}e.className=f.trim(g);}}}}return this;},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className));});}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ");}g.className=f.trim(h);}else{g.className="";}}}}return this;},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b);});}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e);}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||"";}}});},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0;}}return !1;},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+"";})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h;}}});}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d;}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d;}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text;}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null;}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b;}h.push(b);}}if(j&&!h.length&&i.length){return f(i[g]).val();}return h;},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0;}),c.length||(a.selectedIndex=-1);return c;}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d);}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d);}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return;}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g;}a.setAttribute(c,""+d);return d;}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g;}g=a.getAttribute(c);return g===null?b:g;}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1));}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed");}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b;}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b);}return b in a?a.value:null;},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c);}a.value=b;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c];}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b;}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b;},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c;}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b;},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+"";}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c;}}});}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c);}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d;}});}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b;},set:function(a,b){return a.style.cssText=""+b;}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null;}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value;}};}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0;}}});});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b;},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value));},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1");};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b;},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i);}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0;}a=null;}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0);}continue;}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j]);}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0));}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return;}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return;}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);}return;}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return;}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m;}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s]);}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result;}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);}r.length&&j.push({elem:m,matches:r});}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()));}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result;}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a;}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a;}},fix:function(a){if(a[f.expando]){return a;}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e];}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a;},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c);},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null);}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault();}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1);}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c);},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b);}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0;},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1);},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0);},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation();},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;}return h;}};}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1;}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0;}),d._submit_attached=!0);});},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0));},teardown:function(){if(f.nodeName(this,"form")){return !1;}f.event.remove(this,"._submit");}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0);}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0));});}return !1;}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0);}),b._change_attached=!0);});},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments);}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName);}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0);};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0);},teardown:function(){--d===0&&c.removeEventListener(a,e,!0);}};}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g);}return this;}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J;}else{if(!e){return this;}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments);},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c);});},one:function(a,b,c,d){return this.on(a,b,c,d,1);},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this;}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g]);}return this;}if(c===!1||typeof c=="function"){d=c,c=b;}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c);});},bind:function(a,b,c){return this.on(a,null,b,c);},unbind:function(a,b){return this.off(a,null,b);},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this;},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this;},delegate:function(a,b,c,d){return this.on(b,a,c,d);},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c);},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this);});},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0);}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1;};e.guid=c;while(d<b.length){b[d++].guid=c;}return this.click(e);},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a);}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b);},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks);}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break;}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break;}}else{if(m.filter(b,[j]).length>0){k=j;break;}}}j=j[a];}e[h]=k;}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break;}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break;}j=j[a];}e[h]=k;}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0;});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[];}if(!b||typeof b!="string"){return e;}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break;}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f);}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f);}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v);}}else{k=w=[];}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k);}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t]);}}}}else{s(k,e);}l&&(m(l,h,e,f),m.uniqueSort(e));return e;};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1);}}}return a;},m.matches=function(a,b){return m(a,null,null,b);},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0;},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[];}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break;}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a};},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue;}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0;}else{if(f===!0){continue;}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[];}break;}}}if(a===q){if(g==null){m.error(a);}else{break;}}q=a;}return s;},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a);};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent;}if(typeof a.innerText=="string"){return a.innerText.replace(k,"");}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a);}}else{if(d===3||d===4){return a.nodeValue;}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c));}}return e;},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href");},type:function(a){return a.getAttribute("type");}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b;}}e&&m.filter(b,a,!0);},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1;}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);}d&&m.filter(b,a,!0);}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c);},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c);}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[];}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e]);}return c.length===0?null:c;}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1]);}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a;}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));}return !1;},ID:function(a){return a[1].replace(j,"");},TAG:function(a,b){return a[1].replace(j,"").toLowerCase();},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0;}else{a[2]&&m.error(a[0]);}a[0]=e++;return a;},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a;},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c);}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1;}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0;}}return b;},POS:function(a){a.unshift(!0);return a;}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden";},disabled:function(a){return a.disabled===!0;},checked:function(a){return a.checked===!0;},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0;},parent:function(a){return !!a.firstChild;},empty:function(a){return !a.firstChild;},has:function(a,b,c){return !!m(c[3],a).length;},header:function(a){return/h\d/i.test(a.nodeName);},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null);},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type;},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type;},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type;},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type;},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type;},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type;},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type;},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button";},input:function(a){return/input|select|textarea|button/i.test(a.nodeName);},focus:function(a){return a===a.ownerDocument.activeElement;}},setFilters:{first:function(a,b){return b===0;},last:function(a,b,c,d){return b===d.length-1;},even:function(a,b){return b%2===0;},odd:function(a,b){return b%2===1;},lt:function(a,b,c){return b<c[3]-0;},gt:function(a,b,c){return b>c[3]-0;},nth:function(a,b,c){return c[3]-0===b;},eq:function(a,b,c){return c[3]-0===b;}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d);}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1;}}return !0;}m.error(e);},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1;}}if(k==="first"){return !0;}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1;}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0;}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i);}g[d]=f;}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0;}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b;},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b;},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1;},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1;},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d);}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1);};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b;}return a;};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType;}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a);}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c]);}}else{for(;a[c];c++){d.push(a[c]);}}}return d;};}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0;}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}return a.compareDocumentPosition(b)&4?-1:1;}:(u=function(a,b){if(a===b){h=!0;return 0;}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b);}if(!g){return -1;}if(!i){return 1;}while(j){e.unshift(j),j=j.parentNode;}j=i;while(j){f.unshift(j),j=j.parentNode;}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k]);}}return k===c?v(a,f[k],-1):v(e[k],b,1);},v=function(a,b,c){if(a===b){return c;}var d=a.nextSibling;while(d){if(d===b){return -1;}d=d.nextSibling;}return 1;}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[];}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b;}),e.removeChild(a),e=a=null;}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e]);}c=d;}return c;}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2);}),a=null;}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f);}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f);}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f);}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f);}if(i.id===h[3]){return s([i],f);}}try{return s(e.querySelectorAll(b),f);}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f);}}catch(r){}finally{l||k.removeAttribute("id");}}}}return a(b,e,f,g);};for(var e in a){m[e]=a[e];}b=null;}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle");}catch(f){e=!0;}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f;}}}catch(g){}}return m(c,null,null,[a]).length>0;};}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return;}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1]);}},a=null;}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0);}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16);}:m.contains=function(){return !1;},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1;};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"");}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c);}return m.filter(f,e);};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains;}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0;}}});}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break;}}}}}return e;},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0;}}});},not:function(a){return this.pushStack(T(this,a,!1),"not",a);},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a);},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0);},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});}g=g.parentNode,h++;}return c;}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break;}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break;}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a);},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1;}if(typeof a=="string"){return f.inArray(this[0],f(a));}return f.inArray(a.jquery?a[0]:a,this);},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d));},andSelf:function(){return this.add(this.prevObject);}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null;},parents:function(a){return f.dir(a,"parentNode");},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c);},next:function(a){return f.nth(a,2,"nextSibling");},prev:function(a){return f.nth(a,2,"previousSibling");},nextAll:function(a){return f.dir(a,"nextSibling");},prevAll:function(a){return f.dir(a,"previousSibling");},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c);},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c);},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a);},children:function(a){return f.sibling(a.firstChild);},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes);}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","));};}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b);},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c];}return e;},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break;}}return a;},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a);}return c;}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));},null,a,arguments.length);},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b));});}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild;}return a;}).append(this);}return this;},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b));});}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a);});},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a);});},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes);}).end();},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a);});},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild);});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this);});}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling);});}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a;}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);}}return this;},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild);}}return this;},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b);});},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null;}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);}c=0;}catch(g){}}c&&this.empty().append(a);},null,a,arguments.length);},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d));});}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a);});}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this;},detach:function(a){return this.remove(a,!0);},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0);});}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d);});}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h);}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b);});}return this;}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g};},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this;}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j);}return this.pushStack(d,a,e.selector);};}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g]);}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g]);}}}d=e=null;return h;},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue;}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l);}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild;}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i]);}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)));}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i]);}}else{bn(l);}}l.nodeType?j.push(l):j=f.merge(j,l);}if(d){g=function(a){return !a.type||be.test(a.type);};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h);}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v));}d.appendChild(h);}}}return j;},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue;}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);}b.handle&&(b.handle.elem=null);}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c];}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c);},a,c,arguments.length>1);},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c;}return a.style.opacity;}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g;}return j[c];}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return;}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d;}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e;}if(by){return by(a,c);}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f];}e=c.call(a);for(f in b){a.style[f]=d[f];}return e;}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c;}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f;}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d);});}},set:function(a,b){return bs.test(b)?b+"px":b;}};}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":"";},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return;}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e;}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight;});}});}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none";},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a);}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0];}return f;}};});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href;}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href;}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments);}if(!this.length){return this;}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e);}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a;}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a]);}});return this;},serialize:function(){return f.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type));}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")};}):{name:b.name,value:c.replace(bE,"\r\n")};}).get();}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a);};}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g});};}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script");},getJSON:function(a,b,c){return f.get(a,b,c,"json");},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a;},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y;}if(z=v.getResponseHeader("Etag")){f.etag[k]=z;}}if(a===304){w="notmodified",o=!0;}else{try{r=cb(d,x),w="success",o=!0;}catch(A){w="parsererror",u=A;}}}else{u=w;if(!w||a){w="error",a<0&&(a=0);}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"));}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b;}return this;},getAllResponseHeaders:function(){return s===2?n:null;},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2];}}c=o[a.toLowerCase()];}return c===b?null:c;},overrideMimeType:function(a){s||(d.mimeType=a);return this;},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this;}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]];}}else{b=a[v.status],v.then(b,b);}}return this;},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1;}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"");}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u]);}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1;}for(u in {success:1,error:1,complete:1}){v[u](d[u]);}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport");}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout");},d.timeout));try{s=1,p.send(l,w);}catch(z){if(s<2){w(-1,z);}else{throw z;}}}return v;},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b);};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value);});}else{for(var g in a){b_(g,a[g],c,e);}}return d.join("&").replace(bC,"+");}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++;}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a];},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0]);}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0];},b.dataTypes[0]="json";return"script";}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a;}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1);}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success");}},e.insertBefore(d,e.firstChild);},abort:function(){d&&d.onload(0,1);}};}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1);}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci();}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a});}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j];}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j]);}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort();}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText;}catch(a){}try{k=h.statusText;}catch(o){k="";}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204);}}}catch(p){e||g(-1,p);}m&&g(j,k,m,l);},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d);},abort:function(){d&&d(0,1);}};}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c);}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||"";}}}return this;},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c);}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none");}return this;},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]();}):this.animate(ct("toggle",3),a,b,c);return this;},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d);},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i]);}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this);}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1));}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));}return !0;}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1]);}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g);},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d);}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b);}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));}(!d||!c)&&f.dequeue(this,a);});}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d);};}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx";}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this);};return d;},easing:{linear:function(a){return a;},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5;}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{};}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a;},custom:function(a,c,d){function h(a){return e.step(a);}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end));},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval));},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show();},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0);},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1);}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a];}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);}}d=i.complete,d&&(i.complete=!1,d.call(h));}return !1;}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0;}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1);}b.length||f.fx.stop();},interval:13,stop:function(){clearInterval(co),co=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now);},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now;}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit);});}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem;}).length;});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect();}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0};}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n};}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break;}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d;}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft;}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l};},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b);});}var c=this[0],d=c&&c.ownerDocument;if(!d){return null;}if(c===d.body){return f.offset.bodyOffset(c);}return cv(c,d,d.documentElement);},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c};},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k);}},f.fn.extend({position:function(){if(!this[0]){return null;}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left};},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent;}return a;});}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g;},a,e,arguments.length,null);};}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null;},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null;},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j;}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d];}return Math.max(a.body[e],i[e],a.body[g],i[g]);}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k;}f(a).css(c,h);},c,a,arguments.length,null);};}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f;});})(window);/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
    v1.2.0 (c) Kyle Simpson
    MIT License
*/
(function(p){var q="string",w="head",L="body",M="script",u="readyState",j="preloaddone",x="loadtrigger",N="srcuri",E="preload",Z="complete",y="done",z="which",O="preserve",F="onreadystatechange",ba="onload",P="hasOwnProperty",bb="script/cache",Q="[object ",bw=Q+"Function]",bx=Q+"Array]",e=null,h=true,i=false,k=p.document,bc=p.location,bd=p.ActiveXObject,A=p.setTimeout,be=p.clearTimeout,R=function(a){return k.getElementsByTagName(a);},S=Object.prototype.toString,G=function(){},r={},T={},bf=/^[^?#]*\//.exec(bc.href)[0],bg=/^\w+\:\/\/\/?[^\/]+/.exec(bf)[0],by=R(M),bh=p.opera&&S.call(p.opera)==Q+"Opera]",bi=("MozAppearance" in k.documentElement.style),bj=(k.createElement(M).async===true),v={cache:!(bi||bh),order:bi||bh||bj,xhr:h,dupe:h,base:"",which:w};v[O]=i;v[E]=h;r[w]=k.head||R(w);r[L]=R(L);function B(a){return S.call(a)===bw;}function U(a,b){var c=/^\w+\:\/\//,d;if(typeof a!=q){a="";}if(typeof b!=q){b="";}d=((/^\/\//.test(a))?bc.protocol:"")+a;d=(c.test(d)?"":b)+d;return((c.test(d)?"":(d.charAt(0)==="/"?bg:bf))+d);}function bz(a){return(U(a).indexOf(bg)===0);}function bA(a){var b,c=-1;while(b=by[++c]){if(typeof b.src==q&&a===U(b.src)&&b.type!==bb){return h;}}return i;}function H(t,l){t=!(!t);if(l==e){l=v;}var bk=i,C=t&&l[E],bl=C&&l.cache,I=C&&l.order,bm=C&&l.xhr,bB=l[O],bC=l.which,bD=l.base,bn=G,J=i,D,s=h,m={},K=[],V=e;C=bl||bm||I;function bo(a,b){if((a[u]&&a[u]!==Z&&a[u]!=="loaded")||b[y]){return i;}a[ba]=a[F]=e;return h;}function W(a,b,c){c=!(!c);if(!c&&!(bo(a,b))){return;}b[y]=h;for(var d in m){if(m[P](d)&&!(m[d][y])){return;}}bk=h;bn();}function bp(a){if(B(a[x])){a[x]();a[x]=e;}}function bE(a,b){if(!bo(a,b)){return;}b[j]=h;A(function(){r[b[z]].removeChild(a);bp(b);},0);}function bF(a,b){if(a[u]===4){a[F]=G;b[j]=h;A(function(){bp(b);},0);}}function X(b,c,d,g,f,n){var o=b[z];A(function(){if("item" in r[o]){if(!r[o][0]){A(arguments.callee,25);return;}r[o]=r[o][0];}var a=k.createElement(M);if(typeof d==q){a.type=d;}if(typeof g==q){a.charset=g;}if(B(f)){a[ba]=a[F]=function(){f(a,b);};a.src=c;if(bj){a.async=i;}}r[o].insertBefore(a,(o===w?r[o].firstChild:e));if(typeof n==q){a.text=n;W(a,b,h);}},0);}function bq(a,b,c,d){T[a[N]]=h;X(a,b,c,d,W);}function br(a,b,c,d){var g=arguments;if(s&&a[j]==e){a[j]=i;X(a,b,bb,d,bE);}else{if(!s&&a[j]!=e&&!a[j]){a[x]=function(){br.apply(e,g);};}else{if(!s){bq.apply(e,g);}}}}function bs(a,b,c,d){var g=arguments,f;if(s&&a[j]==e){a[j]=i;f=a.xhr=(bd?new bd("Microsoft.XMLHTTP"):new p.XMLHttpRequest());f[F]=function(){bF(f,a);};f.open("GET",b);f.send("");}else{if(!s&&a[j]!=e&&!a[j]){a[x]=function(){bs.apply(e,g);};}else{if(!s){T[a[N]]=h;X(a,b,c,d,e,a.xhr.responseText);a.xhr=e;}}}}function bt(a){if(typeof a=="undefined"||!a){return;}if(a.allowDup==e){a.allowDup=l.dupe;}var b=a.src,c=a.type,d=a.charset,g=a.allowDup,f=U(b,bD),n,o=bz(f);if(typeof d!=q){d=e;}g=!(!g);if(!g&&((T[f]!=e)||(s&&m[f])||bA(f))){if(m[f]!=e&&m[f][j]&&!m[f][y]&&o){W(e,m[f],h);}return;}if(m[f]==e){m[f]={};}n=m[f];if(n[z]==e){n[z]=bC;}n[y]=i;n[N]=f;J=h;if(!I&&bm&&o){bs(n,f,c,d);}else{if(!I&&bl){br(n,f,c,d);}else{bq(n,f,c,d);}}}function Y(a){if(t&&!I){K.push(a);}if(!t||C){a();}}function bu(a){var b=[],c;for(c=-1;++c<a.length;){if(S.call(a[c])===bx){b=b.concat(bu(a[c]));}else{b[b.length]=a[c];}}return b;}D={script:function(){be(V);var a=bu(arguments),b=D,c;if(bB){for(c=-1;++c<a.length;){if(B(a[c])){a[c]=a[c]();}if(c===0){Y(function(){bt((typeof a[0]==q)?{src:a[0]}:a[0]);});}else{b=b.script(a[c]);}b=b.wait();}}else{for(c=-1;++c<a.length;){if(B(a[c])){a[c]=a[c]();}}Y(function(){for(c=-1;++c<a.length;){bt((typeof a[c]==q)?{src:a[c]}:a[c]);}});}V=A(function(){s=i;},5);return b;},wait:function(a){be(V);s=i;if(!B(a)){a=G;}var b=H(t||J,l),c=b.trigger,d=function(){try{a();}catch(err){}c();};delete b.trigger;var g=function(){if(J&&!bk){bn=d;}else{d();}};if(t&&!J){K.push(g);}else{Y(g);}return b;}};if(t){D.trigger=function(){var a,b=-1;while(a=K[++b]){a();}K=[];};}else{D.trigger=G;}return D;}function bv(a){var b,c={},d={UseCachePreload:"cache",UseLocalXHR:"xhr",UsePreloading:E,AlwaysPreserveOrder:O,AllowDuplicates:"dupe"},g={AppendTo:z,BasePath:"base"};for(b in d){g[b]=d[b];}c.order=!(!v.order);for(b in g){if(g[P](b)&&v[g[b]]!=e){c[g[b]]=(a[b]!=e)?a[b]:v[g[b]];}}for(b in d){if(d[P](b)){c[d[b]]=!(!c[d[b]]);}}if(!c[E]){c.cache=c.order=c.xhr=i;}c.which=(c.which===w||c.which===L)?c.which:w;return c;}p.$LAB={setGlobalDefaults:function(a){v=bv(a);},setOptions:function(a){return H(i,bv(a));},script:function(){return H().script.apply(e,arguments);},wait:function(){return H().wait.apply(e,arguments);}};(function(a,b,c){if(k[u]==e&&k[a]){k[u]="loading";k[a](b,c=function(){k.removeEventListener(b,c,i);k[u]=Z;},i);}})("addEventListener","DOMContentLoaded");})(window);/*!
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/
jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b;}return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}return -c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b;}return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b;}if(t==d){return b+c;}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b;}return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b;}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d/2)==2){return b+c;}if(!p){p=d*(0.3*1.5);}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b;}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b;}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b;}return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b;}});/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function($,document,undefined){var pluses=/\+/g;function raw(s){return s;}function decoded(s){return decodeURIComponent(s.replace(pluses," "));}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1;}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),"=",config.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""));}var decode=config.raw?raw:decoded;var cookies=document.cookie.split("; ");for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("=");if(decode(parts.shift())===key){var cookie=decode(parts.join("="));return config.json?JSON.parse(cookie):cookie;}}return null;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true;}return false;};})(jQuery,document);/*!
 * jQuery Color Animations
 * Copyright 2007 John Resig
 * Released under the MIT and GPL licenses.
 */
(function(jQuery){jQuery.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,attr){jQuery.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true;}fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2]),255),0)].join(",")+")";};});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3){return color;}if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color)){return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];}if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color)){return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];}if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color)){return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];}if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color)){return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];}if(result=/rgba\(0, 0, 0, 0\)/.exec(color)){return colors.transparent;}return colors[jQuery.trim(color).toLowerCase()];}function getColor(elem,attr){var color;do{color=jQuery.curCSS(elem,attr);if(color!=""&&color!="transparent"||jQuery.nodeName(elem,"body")){break;}attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);}var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};})(jQuery);var forbes=(function(app,$){app.util=(function($){var _initialized=false,_production_mode=false;function _init(){if(_initialized){return false;}_init_omniture_helper();_init_array_remove();_init_left_click_handling();_initialized=true;}function _in_production_mode(){return _production_mode;}function _get_forbes_link(url){if(_production_mode){return url;}return url.replace("http://www-staging.forbes.com","").replace("http://www.forbes.com","").replace("http://www-dev.forbes.com","").replace("http://www-staging-2.forbes.com","");}function _init_lazy_load_image_sources(options){var $target=$("body");if(typeof options!="undefined"&&typeof options.$target!="undefined"){$target=options.$target;}$target.find("img").each(function(i){var $this=$(this);if(!$this.hasClass("src_initialized")){$this.attr("src",$this.data("img-src"));$this.addClass("src_initialized");}});}function _track_ga_event(options_array){if(typeof _gaq=="undefined"){return false;}_gaq.push(["_trackEvent"].concat(options_array));}function _debug(obj,log_caller){if(_production_mode){return false;}if((typeof console=="object")&&(console.log)){if(log_caller){console.log(arguments.callee.caller.name+":");}console.log(obj);}}function _init_omniture_helper(){$.fn.omniture_track_click=function(link_name){var $this=$(this),$window=window;if(typeof $window.s=="undefined"||typeof $window.s.prop1=="undefined"||typeof $window.s!="object"||typeof $window.s_linkTrackVars=="undefined"||typeof $window.globalPageName=="undefined"||typeof $window.s_prop18=="undefined"){return $this;}$window.s_linkTrackVars="prop18";$window.s_linkType="o";$window.s_linkName=link_name;if(typeof($window.globalPageName)!="undefined"){$window.s_prop18=$window.globalPageName;}$window.s_lnk=$window.s_co(this);$window.s_gs($window.s_account);return $this;};}function _scroll_to_obj(jquery_obj,options){var total_height=jquery_obj.outerHeight(),window_height=$(window).height(),$header=$("header.global"),header_offset=0,header_sticky=($("body").hasClass("header_non_sticky_mode"))?false:true,duration=(options.duration=="undefined")?500:options.duration,new_scrolltop=0;if($header.length>0&&header_sticky){header_offset=$header.height()+20;}if(total_height<window_height&&options.valign){new_scrolltop=(jquery_obj.offset().top-Math.round((window_height-total_height)/2))-header_offset;}else{new_scrolltop=jquery_obj.offset().top-header_offset;}if(typeof options!="undefined"&&typeof options.ignore_padding_top!="undefined"){var padding_top=parseInt(jquery_obj.css("padding-top"),10);if(padding_top>0){new_scrolltop+=padding_top;}}$("html,body").stop().animate({scrollTop:new_scrolltop},{duration:duration,easing:"easeInOutCubic"});if(options.highlight){var highlightColor=(options.highlightColor)?options.highlightColor:"#ffdb88";var orig_bg=jquery_obj.css("backgroundColor");jquery_obj.stop().delay(duration).animate({backgroundColor:highlightColor},{duration:500,easing:"easeInCubic",complete:function(){$(this).animate({backgroundColor:orig_bg},{duration:700,easing:"easeInOutCubic"});}});}}function _load_ajax(options){if(typeof options=="undefined"){return false;}var ajax_options={url:options.url};ajax_options.type=(typeof options.type!="undefined")?options.type:"get";ajax_options.data=(typeof options.data!="undefined")?options.data:{};if(typeof options.dataType!="undefined"){ajax_options.dataType=options.dataType;}ajax_options.timeout=(typeof options.timeout!="undefined")?options.timeout:(20*1000);ajax_options.error=(typeof options.error!="undefined")?options.error:function(e,textStatus,errorThrown){forbes.util.debug("error loading: "+ajax_options.url);forbes.util.debug("error textStatus: "+textStatus);forbes.util.debug("error errorThrown: "+errorThrown);};ajax_options.success=(typeof options.success!="undefined")?options.success:function(data){forbes.util.debug("data received from "+ajax_options.url+":");forbes.util.debug(data);};$.ajax(ajax_options);}function _init_array_remove(){Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest);};}function _init_left_click_handling(){(function($){$.event.special["click:left"]={setup:function(){$.event.add(this,"click",$.event.special["click:left"].handler);},teardown:function(){$.event.remove(this,"click");},handler:function(e){if(e.which<=1&&!e.metaKey&&!e.shiftKey&&!e.altKey&&!e.ctrlKey){e.type="click:left";$.event.handle.apply(this,arguments);}}};})(jQuery);}function _parse_ajax_content(data,marker){var start_marker="<!--start:"+marker+"-->",end_marker="<!--end:"+marker+"-->",start_index=data.indexOf(start_marker),end_index=data.indexOf(end_marker),content=data.substring((start_index+start_marker.length),end_index);return content;}function _strip_empty_paragraphs(data){return data;}function _highlighter(termToHighlight,fullString,highlightClass){var query=termToHighlight.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return fullString.replace(new RegExp("("+query+")","ig"),function($1,match){return'<span class="'+highlightClass+'">'+match+"</span>";});}function _number_format(number,decimals,dec_point,thousands_sep){number=(number+"").replace(",","").replace(" ","");var n=!isFinite(+number)?0:+number,prec=!isFinite(+decimals)?0:Math.abs(decimals),sep=(typeof thousands_sep==="undefined")?",":thousands_sep,dec=(typeof dec_point==="undefined")?".":dec_point,s="",toFixedFix=function(n,prec){var k=Math.pow(10,prec);return""+Math.round(n*k)/k;};s=(prec?toFixedFix(n,prec):""+Math.round(n)).split(".");if(s[0].length>3){s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,sep);}if((s[1]||"").length<prec){s[1]=s[1]||"";s[1]+=new Array(prec-s[1].length+1).join("0");}return s.join(dec);}return{scroll_to_obj:_scroll_to_obj,number_format:_number_format,init:_init,debug:_debug,parse_ajax_content:_parse_ajax_content,strip_empty_paragraphs:_strip_empty_paragraphs,highlighter:_highlighter,load_ajax:_load_ajax,get_forbes_link:_get_forbes_link,in_production_mode:_in_production_mode,init_lazy_load_image_sources:_init_lazy_load_image_sources,track_ga_event:_track_ga_event};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.util.init);window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a;}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+a+'"';}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null";}gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null";}return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e;}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));}}else{for(d in i){Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));}}return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e;}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf();});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number"){for(d=0;d<c;d+=1){indent+=" ";}}else{typeof c=="string"&&(indent=c);}rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number"){return str("",{"":a});}throw new Error("JSON.stringify");}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object"){for(c in e){Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);}}return reviver.call(a,b,e);}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");});}(),function(a,b){var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...");}c.Adapter={bind:function(a,b,c){d(a).bind(b,c);},trigger:function(a,b,c){d(a).trigger(b,c);},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e;},onDomLoad:function(a){d(a);}},typeof c.init!="undefined"&&c.init();}(window),function(a,b){var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if(typeof g.initHtml4!="undefined"){throw new Error("History.js HTML4 Support has already been loaded...");}g.initHtml4=function(){if(typeof g.initHtml4.initialized!="undefined"){return !1;}g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var b=g.getHashByIndex(),c;return c=a===b,c;},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0);},g.getHashByIndex=function(a){var b=null;return typeof a=="undefined"?b=g.savedHashes[g.savedHashes.length-1]:a<0?b=g.savedHashes[g.savedHashes.length+a]:b=g.savedHashes[a],b;},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var d=g.getHashByState(a),e;return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0;},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0;},g.discardedState=function(a){var b=g.getHashByState(a),c;return c=g.discardedStates[b]||!1,c;},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b;},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0;},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;var b="",d,e,h,i;return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i){return !1;}i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0;}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0;},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0;},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null,i=null,j;return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),j=g.discardedState(f),j?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))));},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");}if(f!==!1&&g.busy()){return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;}g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0);},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");}if(d!==!1&&g.busy()){return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;}g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0;}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange");});},typeof g.init!="undefined"&&g.init();}(window),function(a,b){var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined"){throw new Error("History.js Core has already been loaded...");}m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0);},m.initCore=function(){if(typeof m.initCore.initialized!="undefined"){return !1;}m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1000,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++){j(b[a]);}m.intervalList=null;}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments);},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];if(typeof i=="object"&&typeof k!="undefined"){try{i=k.stringify(i);}catch(j){}}e+="\n"+i+"\n";}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0;},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0]){}return a>4?a:!1;}();return a;},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a;},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange" in a||"onhashchange" in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a){return !1;}return !0;},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c;},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1){a+=":"+d.location.port;}return a+="/",a;},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c;},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a;},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/";}),c;},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a;}).replace(/\/+$/,"")+"/";return a;},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"");},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b;},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{};},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return !c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c;},m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined"){b=m.stateToId[c];}else{if(typeof m.store.stateToId[c]!="undefined"){b=m.store.stateToId[c];}else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined"){break;}}m.stateToId[c]=b,m.idToState[b]=a;}}}return b;},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object"){a={};}if(typeof a.normalized!="undefined"){return a;}if(!a.data||typeof a.data!="object"){a.data={};}b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c){b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;}return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b;},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d;},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c;},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d;},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c;},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash,c;},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1;},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b;},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c;},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c;},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b;},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b;},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b;},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a;},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b;},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0);},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b;},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a;},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c){break;}c=d;}return c;},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b;},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b;},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m);},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c;},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b;},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ");}catch(e){}return d.title=b,m;},m.queues=[],m.busy=function(a){typeof a!="undefined"?m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag){return;}for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0){continue;}d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay);}};m.busy.timeout=g(b,m.options.busyDelay);}return m.busy.flag;},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[]);},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m;},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m;},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m;},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m;},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m;},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0;},m.options.doubleCheckInterval)),m;},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b)){c=b;}else{return;}return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m;},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1);}),n.go(-1),!0);},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1);}),n.go(1),!0);},m.go=function(a,b){var c;if(a>0){for(c=1;c<=a;++c){m.forward(b);}}else{if(!(a<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.");}for(c=-1;c>=a;--c){m.back(b);}}return m;};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o;}else{m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0));},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");}if(e!==!1&&m.busy()){return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;}m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0;},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");}if(e!==!1&&m.busy()){return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;}m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0;};}if(f){try{m.store=k.parse(f.getItem("History.store"))||{};}catch(p){m.store={};}m.normalizeStore();}else{m.store={},m.normalizeStore();}m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{};}catch(c){a={};}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b)){continue;}a.idToState[b]=m.idToState[b];}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b)){continue;}a.urlToId[b]=m.urlToId[b];}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b)){continue;}a.stateToId[b]=m.stateToId[b];}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a));},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla"){m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate");}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange");});}}},m.init();}(window);var forbes=(function(app,$){app.state_manager=(function($){var _debug=null,_init_module=null,_initialized=false,_history=window.History;function _init(options){if(_initialized){return false;}_debug=forbes.util.debug;if(typeof options.init_module!="undefined"){_init_module=options.init_module;}_init_history();_initialized=true;}function _add_to_history(state_data){if(!_is_available()){return true;}if(typeof state_data=="undefined"){return true;}if(typeof state_data.replace_state!="undefined"&&state_data.replace_state){_history.replaceState(state_data,null,state_data.request_url);}else{_history.pushState(state_data,null,state_data.request_url);}return false;}function _init_history(){if(!_is_available()){return false;}_history.Adapter.bind(window,"statechange",function(){var State=_history.getState();_route(State.data);});}function _is_available(){if($("html").hasClass("no-history")){return false;}if($.browser.msie&&parseInt($.browser.version,10)<10){return false;}if(!_history.enabled){return false;}return true;}function _route(state_data){var module_id=_init_module,module_tree=null,module=forbes;if(typeof state_data.module_id!="undefined"){module_id=state_data.module_id;}if(module_id===null){_debug("**** The module_id is null. This means that forbes.state_manager");_debug("**** was not initialized properly.");return false;}module_tree=module_id.split(".");for(var i=0;i<module_tree.length;i++){if(typeof module[module_tree[i]]!="undefined"){module=module[module_tree[i]];}}try{module.state_change(state_data);}catch(err){_debug(">>>>> state_manager error: ");_debug(err);}}return{init:_init,is_available:_is_available,add_to_history:_add_to_history};}($));return app;}(forbes||{},jQuery));(function($){var methods={init:function(options){return this.each(function(){var $this=$(this);$this.on("click",function(){$this.placeholderText("on_focus");});$this.on("focusout",function(){$this.placeholderText("on_blur");});});},update_text:function(options){return this.each(function(){var $this=$(this),textHasBeenEdited=true;for(var i=0;i<options.textVariations.length;i++){if($this.val()==options.textVariations[i]){textHasBeenEdited=false;}}if(textHasBeenEdited==false){$this.val(options.newText);}});},set_default_text:function(){return this.each(function(){var $this=$(this);$this.val($this.attr("placeholder"));});},on_focus:function(){return this.each(function(){var $this=$(this);if($this.val()==$this.attr("placeholder")){$this.val("");}});},on_blur:function(){return this.each(function(){var $this=$(this);if($this.val().length<2){$this.placeholderText("set_default_text");}});}};$.fn.placeholderText=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.placeholderText");}}};})(jQuery);var forbes=(function(app,$){app.header=(function($){var _mode="",_non_sticky_mode=false,_initialized=false,_margin_top=0,_margin_bottom=0,_browser_config=null,_browser_type=null,_after_mousemove_functions=new Array(),_iterator_mousemove=0,$header=null,$container=null,$ul_main=null,$li_search=null,$global_search=null,$global_search_input=null,$logo=null,$channels=null,_search_input_short=null,_search_input_long=null,_timeout_rollover_account=null,_timeout_rollout_account=null,_timeout_rollover_account_delay=200,_timeout_rollout_account_delay=200,_timeout_rollover_logo=null,_timeout_rollout_logo=null,_timeout_rollout_logo_delay=200,_channel_rollover_id=null,_channel_rollover_delay=null,_channel_rollout_delay=null,_rollover_list={columnWidth:210,columnMarginRight:20,maxRowCount:6,rowHeight:30},_logo_nav_html_loaded=false,_start_logo_nav_load_time=null,_logo_nav_delay_time=500,_delay_longer=500,_delay=250;function _init(){if(_initialized){return false;}if($("header.global").length<1){return false;}$header=$("header.global");$container=$("header.global .container");$ul_main=$("header.global ul.main");$li_search=$ul_main.find("li.search");$global_search=$("header.global .global_search_control");$global_search_input=$global_search.find("input.search_input");$logo=$header.find("ul.main li.home");if($("body").hasClass("header_non_sticky_mode")){_non_sticky_mode=true;}_search_input_short=$global_search_input.attr("data-placeholder-short");_search_input_long=$global_search_input.attr("data-placeholder-long");_browser_config=[{rolloverBorder:"solid 1px #dddddd"},{rolloverBorder:"none"}];if($.browser.msie){_browser_type=0;if(parseInt($.browser.version)==7){$("body").addClass("ie7");}else{if(parseInt($.browser.version)==8){$("body").addClass("ie8");}else{if(parseInt($.browser.version)==9){$("body").addClass("ie9");}}}$(".global_search_control .search_input").placeholderText();}else{_browser_type=1;}_on_window_resize();if($("html").hasClass("touch")){_init_tablet();}else{$(window).scroll(function(){_on_scroll();});$(window).resize(function(){_on_window_resize();});_on_scroll();_init_user_rollover();_init_menu_rollovers();if($.browser.msie){$global_search_input.placeholderText("set_default_text");}if(!$.browser.msie){$(window).bind("mousemove.header",_on_mousemove);_wait_for_mousemove_before_executing([_init_user_rollover,_init_menu_rollovers,_init_logo_rollover]);}else{_init_user_rollover();_init_menu_rollovers();_init_logo_rollover();}}_initialized=true;}function _wait_for_mousemove_before_executing(function_array){if(typeof function_array!="object"){return false;}for(var i=0;i<function_array.length;i++){_after_mousemove_functions.push(function_array[i]);}}function _on_mousemove(){if(_iterator_mousemove>3){for(var i=0;i<_after_mousemove_functions.length;i++){_after_mousemove_functions[i]();}$(window).unbind("mousemove.header");}_iterator_mousemove++;}function _on_scroll(){if($header.length<1){return false;}if(_non_sticky_mode){return false;}var page_scroll=parseInt($(document).scrollTop()),fixed_range_top=$header.offset().top-_margin_top;if((page_scroll<fixed_range_top&&_mode!="relative")){$container.css({position:"relative",top:"0"});_mode="relative";}else{if(page_scroll>fixed_range_top&&_mode!="fixed"){$container.css({position:"fixed",top:_margin_top+"px","z-index":"9999"});_mode="fixed";if(forbes.follow_bar.is_data_ready()){forbes.follow_bar.reveal();}}}}function _get_mode(){return _mode;}function _on_window_resize(){var new_size_class=_get_header_size_class(),new_text="";if(new_size_class=="minimum"||new_size_class=="small"){$global_search_input.attr("placeholder",_search_input_short);new_text=_search_input_short;}else{$global_search_input.attr("placeholder",_search_input_long);new_text=_search_input_long;}if(!$container.hasClass(new_size_class)){$container.removeClass("minimum small medium large").addClass(new_size_class);}if($.browser.msie){$global_search_input.placeholderText("update_text",{textVariations:[_search_input_short,_search_input_long],newText:new_text});}var $prev_menu_item=$li_search.prev();if(!$.browser.msie){$li_search.width(Math.floor($ul_main.width()-($prev_menu_item.position().left+$prev_menu_item.width()))-1);}$.each($(".global .container ul.main .sub"),function(key,anchorElement){var $parentListElement=$(anchorElement).closest("li");if(($(anchorElement).width()+20)>=$parentListElement.width()){$parentListElement.find(".gradient_edge").show();}else{$parentListElement.find(".gradient_edge").hide();}});}function _init_menu_rollovers(){var $nav=$header.find("li.menu");$nav.unbind("mouseenter").bind("mouseenter",function(){var $this=$(this);$this.addClass("hovering");});$nav.unbind("mouseleave").bind("mouseleave",function(){var $this=$(this);$this.removeClass("hovering");});}function _init_user_rollover(){var $account=$header.find(".account_wrapper");$account.unbind("mouseenter").bind("mouseenter",function(){$account.addClass("hovering");clearTimeout(_timeout_rollover_account);_timeout_rollover_account=setTimeout(function(){if($account.hasClass("hovering")){forbes.typeahead.hide_all();$account.addClass("active");$account.find(".rollover").show();$account.find("a.ajaxify").unbind("click.account_nav").bind("click.account_nav",function(){$account.removeClass("hovering");$account.removeClass("active");$account.find(".rollover").hide();});}},_timeout_rollover_account_delay);});$account.unbind("mouseleave").bind("mouseleave",function(){$account.removeClass("hovering");clearTimeout(_timeout_rollout_account);setTimeout(function(){if(!$account.hasClass("hovering")){$account.removeClass("active");$account.find(".rollover").hide();}},_timeout_rollout_account_delay);});}function _init_user_touch(){var $account=$header.find(".account_wrapper");$account.find(".button").bind("click",function(e){if(!$account.hasClass("active")){_hide_touch_menus();$account.addClass("active");$account.find(".rollover").show();$account.find("a.ajaxify").unbind("click.account_nav").bind("click.account_nav",function(){$account.removeClass("hovering");$account.removeClass("active");$account.find(".rollover").hide();});}else{_hide_touch_menus();}e.preventDefault();});}function _hide_touch_menus(){$("header nav").find(".rollover").hide();$("header nav").find(".active").removeClass("active");}function _init_logo_rollover(){$logo.unbind("mouseenter").bind("mouseenter",function(){$logo.addClass("hovering");var now=new Date();_start_logo_nav_load_time=now.getTime();if(!_logo_nav_html_loaded){if(!$logo.hasClass("loading_started")){$logo.addClass("loading_started");_load_logo_nav_html();}}else{_check_logo_nav_delay();}});$logo.unbind("mouseleave").bind("mouseleave",function(){$logo.removeClass("hovering");clearTimeout(_timeout_rollout_logo);setTimeout(function(){if(!$logo.hasClass("hovering")){$logo.removeClass("active");$logo.find(".rollover").hide();}},_timeout_rollout_logo_delay);});}function _init_logo_touch(){$($logo).find("a.logo b").bind("click",function(e){if(!$logo.hasClass("active")){_hide_touch_menus();$logo.addClass("active");_load_logo_nav_html();}else{_hide_touch_menus();}e.preventDefault();});}function _load_logo_nav_html(){var ajax_url=$logo.find(".button.logo").attr("data-nav-ajax-url");$.ajax({type:"get",url:ajax_url,data:{},dataType:"html",timeout:10*1000,error:function(e,textStatus,errorThrown){forbes.util.debug("error loading: "+ajax_url);forbes.util.debug("error textStatus: "+textStatus);forbes.util.debug("error errorThrown: "+errorThrown);$logo.removeClass("active").unbind("mouseenter").unbind("mouseleave");},success:function(data){$logo.find(".rollover").html(data);_init_channel_nav();forbes.interstitial_ad.init_exit_triggers({scope:"header.global"});$channels.find("li:first").addClass("selected");_logo_nav_html_loaded=true;_check_logo_nav_delay();}});}function _check_logo_nav_delay(){var now=new Date(),elapsed=now.getTime()-_start_logo_nav_load_time;if(elapsed<_logo_nav_delay_time&&(_logo_nav_delay_time-elapsed)>0){forbes.util.debug("not enough time has elapsed. delay by: "+(_logo_nav_delay_time-elapsed));clearTimeout(_timeout_rollover_logo);_timeout_rollover_logo=setTimeout(function(){_reveal_logo_nav();},(_logo_nav_delay_time-elapsed));}else{clearTimeout(_timeout_rollover_logo);_reveal_logo_nav();}}function _reveal_logo_nav(){if(!$logo.hasClass("hovering")){return false;}forbes.typeahead.hide_all();$logo.addClass("active");var $rollover=$header.find("ul.main li.home div.rollover");$rollover.show(1,function(){_update_channel_layout();});}function _init_channel_nav(){$channels=$logo.find(".rollover ul.channels");$channel=$logo.find(".rollover ul.channels li");$channel_list=$logo.find(".rollover .channel ul");$(".channel").find("ul").css({height:"1px",overflow:"hidden"});if($("html").hasClass("touch")){$channel.append("<b></b>");$channel.css({position:"relative"});$channel.find("b").bind("click",function(e){var linkId=$(this).parent().attr("data-id");_channel_rollover(linkId);e.preventDefault();});}else{$channel.on("mouseenter",function(){var linkId=$(this).attr("data-id");_channel_rollover(linkId);});}$(".right_column").on("mouseenter",function(){clearTimeout(_channel_rollover_delay);});var maxRowCount=_rollover_list.maxRowCount;$logo.find(".rollover").css({display:"block"});$.each($channel_list,function(thisListKey,thisList){var $thisList=$(thisList),$thisListItems=$(thisList).find("li"),totalCount=$thisList.children().length,currentRowHeight=0;if(totalCount>maxRowCount){if(totalCount>_rollover_list.maxRowCount){maxRowCount=Math.ceil(totalCount/2);}}for(var i=0;i<$thisList.children().length;i++){var thisListItem=$thisList.find('li[data-id="'+(i+1)+'"]'),columnId=Math.floor(i/maxRowCount),rowId=Math.floor(i%maxRowCount),x=columnId*(_rollover_list.columnWidth+_rollover_list.columnMarginRight),y=(Math.floor(i%maxRowCount)*_rollover_list.rowHeight);y=currentRowHeight;if(rowId<(maxRowCount-1)){currentRowHeight+=(thisListItem.height()+13);}else{currentRowHeight=0;}$(thisListItem).css({position:"absolute",top:y,left:x});}});$logo.find(".rollover").css({borderRight:_browser_config[_browser_type].rolloverBorder,borderBottom:_browser_config[_browser_type].rolloverBorder});if($(".channel.visible").length<1){_expand_channel($logo.find(".rollover ul.channels li:first").attr("data-id"));}}function _update_channel_layout(){var $thisList=$(".channel.visible").find("ul"),$thisListItems=$thisList.find("li"),maxRowCount=_rollover_list.maxRowCount,totalCount=$thisList.children().length,currentRowHeight=0;if(totalCount>maxRowCount){maxRowCount=Math.ceil(totalCount/2);}for(var i=0;i<$thisList.children().length;i++){var thisListItem=$thisList.find('li[data-id="'+(i+1)+'"]'),columnId=Math.floor(i/maxRowCount),rowId=Math.floor(i%maxRowCount),x=columnId*(_rollover_list.columnWidth+_rollover_list.columnMarginRight),y=(rowId*_rollover_list.rowHeight);y=currentRowHeight;if(rowId<(maxRowCount-1)){currentRowHeight+=(thisListItem.height()+16);}else{currentRowHeight=0;}if($("html").hasClass("touch")){$(thisListItem).css({position:"static",padding:"7px 0","float":"left",width:"210px"}).addClass("clearfix");}else{$(thisListItem).css({position:"absolute",top:y,left:x});}}$thisList.css({height:"auto",overflow:"visible"});}function _expand_channel(linkId){var $this=$logo.find('.channels li[data-id="'+linkId+'"]'),$channel_list_items=$channels.find("li"),$channel_detail=$logo.find(".channel_detail .channel");forbes.util.debug("linkId: "+linkId);$.each($channel_list_items,function(listItemKey,listItemElement){if($this.attr("data-id")===$(listItemElement).attr("data-id")){$(listItemElement).removeClass("unselected").addClass("selected");}else{$(listItemElement).removeClass("selected").addClass("unselected");}});$.each($channel_detail,function(channelDetailKey,channelDetailElement){if($this.attr("data-id")===$(channelDetailElement).attr("data-id")){$(channelDetailElement).addClass("visible").css({display:"block"});}else{$(channelDetailElement).removeClass("visible").css({display:"none"});}});_update_channel_layout();}function _channel_rollover(linkId){clearTimeout(_channel_rollover_delay);_channel_rollover_delay=setTimeout(function(){_channel_rollover_id=linkId;_expand_channel(linkId);},_delay_longer);}function _get_header_size_class(){var w=$(window).width(),new_size_class="minimum";if(w>1325){new_size_class="large";}else{if(w>1200){new_size_class="medium";}else{if(w>1075){new_size_class="small";}}}return new_size_class;}function _init_tablet(){$(".user_engagement .entity_holder .find_more").hide();$(window).scroll(function(){_on_scroll();});$(window).bind("touchmove touchcancel",function(){_on_scroll();_hide_touch_menus();});$logo.find("a.logo .arrow").css({top:"32px",right:"15px",left:"auto",width:"0",height:"0","border-style":"solid","border-width":"8px 8px 0 8px","border-color":"#ffffff transparent transparent transparent"}).after("<b></b>");$("#contentwrapper, .contentAboveHeader, section.stack, .top_link_strip").click(function(){_hide_touch_menus();});_init_logo_touch();_init_user_touch();}return{init:_init,get_mode:_get_mode};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.header.init);var forbes=(function(app,$){app.global_search_control=(function($){var $global_search,$search_input,$header_search_li,_initialized=false;function _init(){if($(".global_search_control").length<1){return false;}if(_initialized){return false;}$global_search=$(".global_search_control");$header_search_li=$global_search.parents("li.search");$search_input=$global_search.find("input.search_input");$search_input.bind("focus",_on_input_focus).bind("blur",_on_input_blur).bind("keypress",_on_keypress);$global_search.find("input.search_input").addClass("initialized");forbes.typeahead.init({"$input":$search_input,url_prefetch:"/typeahead/prefetchData",url_search:"/typeahead/search"});_initialized=true;}function _on_input_focus(){var $this=$(this);$header_search_li.addClass("focused");$global_search.addClass("focused");if($search_input.val()==""||$search_input.val()==" "){$global_search.removeClass("has_value");}}function _on_input_blur(){$header_search_li.removeClass("focused");$global_search.removeClass("focused");}function _on_keypress(){setTimeout(function(){if($search_input.val()!=""){$global_search.addClass("has_value");}},20);}return{init:_init};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.global_search_control.init);var forbes=(function(app,$){app.modal_window=(function($){var debug=null,_active=false,_is_touch_device=false,_size_rules=false,_spinner_gif_on_white="43px_grey_on_white.gif",_spinner_gif_on_black="43px_reversal_on_transparent.gif";var _defaults={window_width:200,window_height:150,border_depth:8,modal_margin:20};var _loading_spinner_path=null,_cur_spinner=_spinner_gif_on_white,_imagesBaseCdn=null;function _init(){debug=forbes.util.debug;_imagesBaseCdn=(typeof imagesBaseCdn!="undefined")?imagesBaseCdn:"http://i.forbesimg.com";_loading_spinner_path=_imagesBaseCdn+"/assets/img/loading_spinners/";if($("html").hasClass("touch")){_is_touch_device=true;}_size_rules=false;_init_helpers();_init_html();$(window).resize(function(){_on_window_resize();});}function _load(options){var modal=$("#forbes_modal_window"),load_target=modal.find(".load_target"),animation_on=(typeof options.animate!="undefined")?options.animate:true;modal.removeClass("initialized");if(typeof options.use_black_loading_spinner!="undefined"){_change_loading_spinner(_spinner_gif_on_black);}else{_change_loading_spinner(_spinner_gif_on_white);}if(typeof options.size_rules!="undefined"){_size_rules=options.size_rules;}else{_size_rules=false;}if(_is_touch_device){animation_on=false;}if(!$.browser.msie){load_target.css("opacity",0.3);}var loading_spinner=modal.find(".window_loading_spinner");loading_spinner.show();loading_spinner.stop();loading_spinner.css("opacity",0);loading_spinner.animate({opacity:1},300);if(typeof options.custom_class!="undefined"){modal.addClass(options.custom_class);}if(!modal.hasClass("active")||!_active){_position({animate:false,ignore_size_rules:true});_active=true;modal.addClass("active");}_show_close_btn();modal.find(".close_btn").unbind("click").bind("click",function(event){options.on_cancel();return false;});if(typeof options.allow_scrim_click_to_cancel!="undefined"&&options.allow_scrim_click_to_cancel===true){modal.find(".scrim").unbind("click").bind("click",function(event){options.on_cancel();return false;});}if(typeof options.html!="undefined"){loading_spinner.stop().hide();load_target.html(options.html);if(typeof options.parse_rules!="undefined"){load_target.parse_rules(options.parse_rules);}if(typeof options.on_complete!="undefined"){options.on_complete(load_target);}_position({animate:animation_on});return false;}var on_success_callback=function(raw_data,options){var data="",html="";if(!_active){return false;}if(typeof raw_data=="object"){if(raw_data.success=="form found"){data=raw_data.form;}}else{if(typeof raw_data=="string"){data=raw_data;}}loading_spinner.stop().hide();if(data.indexOf("ajax_content")!=-1){html=forbes.util.parse_ajax_content(data,"ajax_content");}else{html=data;}if(!$.browser.msie){load_target.css("opacity",0);}load_target.html(html);if(typeof options.parse_rules!="undefined"){load_target.parse_rules(options.parse_rules);}_position({animate:animation_on,on_reposition:(typeof options.on_reposition!="undefined")?options.on_reposition:null});if(typeof options.on_complete!="undefined"){options.on_complete(load_target);}_lock_body_if_possible();};_load_modal_data(options,on_success_callback);}function _load_modal_data(options,on_success_callback){if(typeof options.datasource!="undefined"){var this_url=options.url,this_options=options,this_on_success_callback=on_success_callback,data=options.datasource.getter({url:this_url,after_ajax_load:function(data){options.datasource.after({url:this_url,data:data});_load_modal_data(this_options,this_on_success_callback);}});if(typeof data.loading!="undefined"&&data.loading){return false;}on_success_callback(data.data,this_options);return false;}forbes.util.load_ajax({url:options.url,data:(typeof options.params!="undefined")?options.params:{},success:function(data){on_success_callback(data,options);},error:function(){debug("error loading modal: "+options.url);options.on_cancel();}});}function _position(options){var modal=$("#forbes_modal_window"),load_target=modal.find(".load_target"),scrim=modal.find(".scrim"),border=modal.find(".window_border"),contents=modal.find(".window_contents"),loading_spinner=modal.find(".window_loading_spinner"),close_btn=modal.find(".close_btn"),doc_width=$(document).width(),doc_height=$(document).height(),browser_viewport_width=$(window).width(),browser_viewport_height=$(window).height(),scroll_pos=parseInt($(document).scrollTop(),10),window_width=_defaults.window_width,window_height=_defaults.window_height,top_pos=null,left_pos=null,border_width=null,border_height=null,border_top=null,border_left=null,loading_spinner_top=null,loading_spinner_left=null,close_btn_top=null,close_btn_left=null,fullscreen_width=browser_viewport_width,fullscreen_height=browser_viewport_height,edge_padding=0,on_reposition=(options.on_reposition===null)?null:options.on_reposition;modal.show();if($.browser.msie){options.animate=false;}if(browser_viewport_width>980){_lock_body_if_possible();scrim.width(browser_viewport_width);}else{scrim.width(980);}scrim.height(doc_height);var border_depth=_defaults.border_depth;if(load_target.find(".modal_screen").width()>_defaults.window_width||load_target.find(".modal_screen").height()>_defaults.window_height){window_width=load_target.find(".modal_screen").width();window_height=load_target.find(".modal_screen").height();}if(_size_rules!==false&&typeof _size_rules=="object"&&typeof options.ignore_size_rules=="undefined"){if(typeof _size_rules.min_width!="undefined"){window_width=_size_rules.min_width;}if(typeof _size_rules.min_height!="undefined"){window_height=_size_rules.min_height;}if(typeof _size_rules.prefer_fullscreen!="undefined"){if(typeof _size_rules.edge_padding!="undefined"){edge_padding=_size_rules.edge_padding;fullscreen_width=fullscreen_width-(edge_padding*2);fullscreen_height=fullscreen_height-(edge_padding*2);}if(fullscreen_width>window_width){window_width=fullscreen_width;}if(fullscreen_height>window_height){window_height=fullscreen_height;}}}left_pos=((browser_viewport_width/2)-(window_width/2));if(window_height>(browser_viewport_height-40)){top_pos=scroll_pos+40;}else{top_pos=scroll_pos+((browser_viewport_height/2)-(window_height/2));}border_width=window_width+(border_depth*2);border_height=window_height+(border_depth*2);border_top=(top_pos-border_depth);border_left=(left_pos-border_depth);loading_spinner_top=(((window_height/2)-(loading_spinner.height()/2))-10);loading_spinner_left=(((window_width/2)-(loading_spinner.width()/2))-3);close_btn_top=(top_pos-(close_btn.height()/2));close_btn_left=((left_pos+window_width)-(close_btn.width()/2));if(options.animate){var animation_settings={duration:150,easing:"easeOutCubic",complete:function(){load_target.css("opacity",1);_lock_body_if_possible();modal.addClass("initialized");if(typeof on_reposition!="undefined"&&on_reposition!==null){on_reposition();}}};contents.stop().animate({width:window_width,height:window_height,top:top_pos+"px",left:left_pos+"px"},animation_settings);border.stop().animate({width:border_width,height:border_height,top:border_top+"px",left:border_left+"px"},animation_settings);loading_spinner.stop().animate({top:loading_spinner_top+"px",left:loading_spinner_left+"px"},animation_settings);close_btn.stop().animate({top:close_btn_top+"px",left:close_btn_left+"px"},animation_settings);}else{contents.width(window_width);contents.height(window_height);contents.css({top:top_pos+"px",left:left_pos+"px"});border.width(border_width);border.height(border_height);border.css({top:border_top+"px",left:border_left+"px"});loading_spinner.css({top:loading_spinner_top+"px",left:loading_spinner_left+"px"});close_btn.css({top:close_btn_top+"px",left:close_btn_left+"px"});load_target.css("opacity",1);}}function _on_window_resize(){if(_active){_position({animate:false});_lock_body_if_possible();}}function _lock_body_if_possible(){var modal_height=$("#forbes_modal_window .window_contents").height(),min_window_height=(modal_height+(_defaults.modal_margin*2));if($(window).height()>min_window_height){$("body").css({overflow:"hidden"});}else{$("body").css({overflow:"auto"});}}function _unlock_body_scroll(){$("body").css({overflow:"auto"});}function _destroy(){_active=false;$("#forbes_modal_window").removeClass("active");$("#forbes_modal_window").remove();_unlock_body_scroll();_init_html();}function _init_html(){if($("div#forbes_modal_window").length>0){return false;}var classes="",html="";if($.browser.msie){classes+="msie";}html+='<div id="forbes_modal_window" class="'+classes+'" style="display:none;">';html+='<div class="close_btn"></div>';html+='<div class="window_contents">';html+='<div class="load_target"></div>';html+='<div class="window_loading_spinner" style="display:none;">';html+=_generate_large_loading_spinner_html();html+="</div>";html+="</div>";html+='<div class="window_border"></div>';html+='<div class="scrim"></div>';html+="</div>";$("body").append(html);}function _change_loading_spinner(new_spinner){_cur_spinner=new_spinner;$("#forbes_modal_window .window_loading_spinner").html(_generate_large_loading_spinner_html());}function _generate_large_loading_spinner_html(){return'<img src="'+_loading_spinner_path+_cur_spinner+'" height="43" width="43" alt="" />';}function _init_helpers(){$.fn.parse_rules=function(rules){var $this=$(this);for(var selector in rules){$this.find(selector).html(rules[selector]);}return $this;};}function _hide_close_btn(){$("#forbes_modal_window .close_btn").hide();}function _show_close_btn(){$("#forbes_modal_window .close_btn").show();}function _is_active(){return _active;}return{init:_init,load:_load,destroy:_destroy,is_active:_is_active,position:_position,hide_close_btn:_hide_close_btn,show_close_btn:_show_close_btn,generate_large_loading_spinner_html:_generate_large_loading_spinner_html};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.modal_window.init);var forbes=(function(app,$){app.forms=(function($){var $form;var known_options={};function _init(options){if(typeof options==="undefined"||jQuery.isEmptyObject(options)){_perform_init({});for(var selector in known_options){_perform_init(known_options[selector]);}}else{known_options[options.selector]=options;_perform_init(options);}}function _perform_init(options){$form=(typeof options.selector!="undefined")?$(options.selector):$("form.forbes_forms");if($form.length<1){return false;}_init_fancy_buttons();_init_input_focusing();_init_fancy_radios();$form.find("input[autofocus]").focus();_init_ajax_forms(options);}function _init_ajax_forms(options){if(typeof options=="undefined"){options={};}$form.unbind("submit").bind("submit",function(){var cur_form=$(this);if(!_validate(cur_form)){if(typeof options.on_change!="undefined"){options.on_change();}return false;}cur_form.addClass("loadingstate");cur_form.find(".fancy_button[data-submit-button=true]").addClass("loadingstate");var form_action=cur_form.attr("action"),ajax_flag="wp-admin/admin-ajax.php",ajax_uri_index=form_action.indexOf(ajax_flag);if(ajax_uri_index!=-1&&form_action!=ppi_AjaxURI){forbes.util.debug("form_action: "+form_action);forbes.util.debug("ppi_AjaxURI: "+ppi_AjaxURI);form_action=ppi_AjaxURI+form_action.substring(ajax_uri_index+ajax_flag.length);}$.post(form_action,cur_form.serialize(),function(json){var error_html="";cur_form.removeClass("loadingstate");cur_form.find(".fancy_radio").removeClass("loadingstate");if(typeof options.on_complete!="undefined"){if(!options.on_complete(json)){return false;}}if(json.success){if(typeof json.url_success!="undefined"){window.location=json.url_success;return false;}else{if(typeof json.refresh_window!="undefined"){window.location.reload();return false;}}}else{var error_msg=cur_form.find(".main_error_msg");if(typeof json.errors!="undefined"){error_html="<ul>";for(var i=0;i<json.errors.length;i++){error_html+="<li>";error_html+=json.errors[i].msg_html;error_html+="</li>";}error_html+="</ul>";}else{error_html="<ul>";error_html+="<li>Unknown error</li>";error_html+="</ul>";}error_msg.find(".text").html(error_html);error_msg.show();cur_form.removeClass("loadingstate");cur_form.find(".fancy_button[data-submit-button=true]").removeClass("loadingstate");if(typeof options.on_change!="undefined"){options.on_change();}}},"json");return false;});}function _init_fancy_buttons(){$form.find('.fancy_button[data-submit-button="true"]').each(function(){$(this).unbind("click").bind("click",function(){var parent_form=$(this).parents("form");if(parent_form.hasClass("loadingstate")){return false;}parent_form.trigger("submit");return false;});});}function _init_fancy_radios(){$form.find(".fancy_radio").each(function(){$(this).find("label:first").addClass("first_label");$(this).find("label:last").addClass("last_label");$(this).find('input[type="radio"]').unbind("change").bind("change",function(){_update_fancy_radios($(this));});});}function _update_fancy_radios($target){forbes.util.debug("_update_fancy_radios()");var $this=$target,$this_radio_group=$this.parent();var this_id=($this.is("label"))?$this.attr("for"):$this.attr("id");$this_radio_group.find("label").removeClass("checked");$this_radio_group.find('label[for="'+this_id+'"]').addClass("checked");if($this_radio_group.attr("data-submit-form-on-change")=="true"){var $parent_form=$this.parents("form");if($parent_form.hasClass("loadingstate")){return false;}$parent_form.submit();}}function _init_input_focusing(){$form.find("input.textbox").unbind("focus").bind("focus",function(){$(this).addClass("focused");});$form.find("input.textbox").unbind("blur").bind("blur",function(){$(this).removeClass("focused");});}function _validate(form){var rules_json=form.attr("data-validation-rules-json");if(typeof rules_json=="undefined"||rules_json==false){return true;}rules_json=$.parseJSON(rules_json);var total_num_errors=0;form.find(".input_block.error").removeClass("error");for(var i=0;i<rules_json.length;i++){var field=rules_json[i];var target=form.find("#"+field.field_id);if(target.length<1){continue;}for(var rule in field.rules){var rule_options=field.rules[rule];var results=_check_validation_rules(target,rule,rule_options);if(results.error){target.parents(".input_block").addClass("error");target.parents(".input_block").find("span.error_msg").html(results.msg);total_num_errors++;}}}if(total_num_errors>0){form.find(".main_error_msg").hide();}if(total_num_errors>0){return false;}return true;}function _check_validation_rules(target,rule,options){var return_obj={error:false,msg:""};if(target.length<1){return return_obj;}switch(rule){case"required":if(target.val().length<1||target.val()==""||target.val()==" "){return_obj.error=true;return_obj.msg="Field is required.";}break;case"email":var email_test=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(target.val());if(!email_test){return_obj.error=true;return_obj.msg="The email address you have entered is not valid. Please try again.";}break;case"between":if(target.val().length<options.min||target.val().length>options.max){return_obj.error=true;var error_msg="";if(target.attr("type")!="undefined"&&target.attr("type")=="password"){error_msg+="Passwords must be between "+options.min+" and "+options.max+" characters.";}else{error_msg+="Field must contain between "+options.min+" and "+options.max+" characters. Field currently contains "+target.val().length+" characters.";}return_obj.msg=error_msg;}break;case"notEqualTo":var cur_value=target.val(),comparison_value="",orig_comparison_value="";if(typeof options.attr!="undefined"){orig_comparison_value=target.attr(options.attr);comparison_value=orig_comparison_value;}if(typeof options.caseSensitive!="undefined"){if(!options.caseSensitive){cur_value=cur_value.toLowerCase();comparison_value=comparison_value.toLowerCase();}}if(cur_value==comparison_value){return_obj.error=true;if(typeof options.errorMsg!="undefined"){return_obj.msg=options.errorMsg;}else{return_obj.msg='Field may not contain "'+orig_comparison_value+'"';}}break;case"noSpaces":if(target.val().match(/.*\s.*/)){return_obj.error=true;return_obj.msg="Please use one word with no spaces.";}break;}return return_obj;}return{init:_init};}($));return app;}(forbes||{},jQuery));var forbes=(function(app,$){app.auth=(function($){var _initialized=false,_user_data={},_urls=null,_window_reloading_disabled=false;var _continuation={active:false,callback:null};var _polling_interval=500;var _max_polling_time=10000;var _polling_time=0;var _gigya_params={login_extralarge_ui:{showTermsLink:"false",height:110,width:360,containerID:"gigya_login_extralarge_div",buttonsStyle:"fullLogo",UIConfig:'<config><body><controls><snbuttons buttonsize="40" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},accountdropdown_extralarge_ui:{showTermsLink:"false",height:110,width:360,containerID:"gigya_accountdropdown_extralarge_div",buttonsStyle:"fullLogo",UIConfig:'<config><body><controls><snbuttons buttonsize="40" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},login_existing_ui:{showTermsLink:"false",height:110,width:360,containerID:"gigya-existing-login-ui",buttonsStyle:"fullLogo",UIConfig:'<config><body><controls><snbuttons buttonsize="40" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none",enabledProviders:""},login_large_ui:{showTermsLink:"false",height:100,width:330,containerID:"gigya_login_large_div",buttonsStyle:"fullLogo",UIConfig:'<config><body><controls><snbuttons buttonsize="35" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},header_loggedout_ui:{showTermsLink:"false",showWhatsThis:"true",whatsThisText:"Log in to Forbes.com using your accounts at these sites.",height:15,width:90,containerID:"gigyalogindiv",UIConfig:'<config><body><controls><snbuttons buttonsize="15" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},hp_userengagementstack_loggedin_ui:{showTermsLink:"false",showWhatsThis:"true",whatsThisText:"Log in to Forbes.com using your accounts at these sites.",height:15,width:130,containerID:"gigya_user_engagement_addconndiv",UIConfig:'<config><body><controls><snbuttons buttonsize="15" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},header_loggedin_ui:{showTermsLink:"false",showWhatsThis:"true",whatsThisText:"Add a connection to another site so you can login and share with that account too.",height:15,width:90,containerID:"gigyaaddconndiv",UIConfig:'<config><body><controls><snbuttons buttonsize="15" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"},accountdropdown_header_loggedin_ui:{showTermsLink:"false",showWhatsThis:"true",whatsThisText:"Add a connection to another site so you can login and share with that account too.",height:15,width:90,containerID:"gigya_accountdropdown_addconndiv",UIConfig:'<config><body><controls><snbuttons buttonsize="15" /></controls></body></config>',autoDetectUserProviders:"",facepilePosition:"none"}};function _init(callback){if(_initialized){if($.isFunction(callback)){callback();}return false;}_init_jquery_helpers();_init_links();_scroll_to_inline_auth_forms_if_they_exist();_init_standalone_forms();_urls={login:ppi_AjaxURI+"?action=unireg_login_form",register:ppi_AjaxURI+"?action=unireg_login_form&part=register",logout:ppi_AjaxURI+"?action=unireg_logout",forgot_password:ppi_AjaxURI+"?action=unireg_login_form&part=reset-password"};_user_data={logged_in:false};if($("#header_userinfo div.currentuser").length>0&&$("#gigyaaddconndiv").length>0){var obj_json=$("#header_userinfo div.currentuser").attr("data-user-obj-json");if(typeof obj_json!="undefined"){_user_data=$.parseJSON(obj_json);}else{_user_data={logged_in:true};}}_polling_init(callback);}function _polling_init(callback){if(typeof gigya!=="undefined"&&typeof gigya.services!=="undefined"){_perform_init(callback);}else{if(_polling_time<_max_polling_time){_polling_time+=_polling_interval;forbes.util.debug("Polling time is "+_polling_time);setTimeout(function(){_polling_init(callback);},_polling_interval);}}}function _perform_init(callback){_init_gigya();if($("#header_userinfo div.currentuser").length>0&&$("#gigyaaddconndiv").length>0){gigya.services.socialize.getUserInfo({callback:_gigya_user_check});}_initialized=true;if($.isFunction(callback)){callback();}}function _init_standalone_forms(){forbes.forms.init({selector:"form.forbes_forms.unireg",on_complete:_handle_form_response});}function _init_links(){$("a.unireg_logout").unbind("click").bind("click",function(e){e.preventDefault();_do_logout();return false;});$("#header_userinfo, header .account_wrapper, section.stack.user_engagement").capture_auth_links();}function _init_gigya(){_init_gigya_events();_show_gigya_header_ui();_show_gigya_login_ui();}function _init_gigya_events(){gigya.services.socialize.addEventHandlers({},{onLogin:_handle_login,onLogout:_handle_logout,onConnectionAdded:_handle_connection_added,onConnectionRemoved:_handle_connection_removed});}function _show_gigya_header_ui(){if($("#"+_gigya_params.header_loggedout_ui.containerID).length>0){gigya.services.socialize.showLoginUI(gigya_conf,_gigya_params.header_loggedout_ui);}if($("#"+_gigya_params.header_loggedin_ui.containerID).length>0){gigya.services.socialize.showAddConnectionsUI(gigya_conf,_gigya_params.header_loggedin_ui);}if($("#"+_gigya_params.accountdropdown_header_loggedin_ui.containerID).length>0){gigya.services.socialize.showAddConnectionsUI(gigya_conf,_gigya_params.accountdropdown_header_loggedin_ui);}if($("#"+_gigya_params.hp_userengagementstack_loggedin_ui.containerID).length>0){gigya.services.socialize.showAddConnectionsUI(gigya_conf,_gigya_params.hp_userengagementstack_loggedin_ui);}if($.browser.msie&&parseInt($.browser.version)==7){forbes.util.debug("resizing for IE version:"+$.browser.version);if($("header div.currentuser").length>0){$(".gigya_chicklet_mask").css({"float":"left"});}else{$(".gigya_chicklet_mask").css({width:"168px"});}}$(".gigya_chicklet_mask").delay(175).show().css({opacity:0}).animate({opacity:1},1000);}function _show_gigya_login_ui(){if($("#"+_gigya_params.login_large_ui.containerID).length>0){gigya.services.socialize.hideUI();gigya.services.socialize.showLoginUI(gigya_conf,_gigya_params.login_large_ui);}if($("#"+_gigya_params.login_extralarge_ui.containerID).length>0){gigya.services.socialize.hideUI();gigya.services.socialize.showLoginUI(gigya_conf,_gigya_params.login_extralarge_ui);}if($("#"+_gigya_params.accountdropdown_extralarge_ui.containerID).length>0){gigya.services.socialize.hideUI();gigya.services.socialize.showLoginUI(gigya_conf,_gigya_params.accountdropdown_extralarge_ui);}}function _gigya_user_check(response){if(response.errorCode==0){forbes.util.debug(response);if(response.user&&response.user["isSiteUID"]&&response.user["isLoggedIn"]){forbes.util.debug("user is in sync");return;}}$.post(ppi_AjaxURI,{action:"unireg_sync",error_code:response.errorCode},_handle_form_response,"json");}function _user(){return _user_data;}function _do_logout(e){_controller({html:_generate_window_reload_html("Logging out...")});$.post(ppi_AjaxURI,{action:"unireg_logout"},function(data){_reload_window();},"json");}function _handle_login(e){forbes.util.debug("_handle_login");forbes.util.debug(e);forbes.util.debug("logged in via "+e.provider);forbes.util.debug(JSON.stringify(e.user));if(e.provider=="site"){return false;}$.post(ppi_AjaxURI,{action:"gigya_login",login_action:"socialLogin",user:JSON.stringify(e.user)},_handle_form_response,"json");}function _handle_logout(e){forbes.util.debug(e.eventName+" event happened");}function _handle_connection_added(e){forbes.util.debug(e.eventName+" event happened");var from_comment=($(".comment_success .[data-share-with]").length);console.log("social commenting flag�");console.log(from_comment);$.post(ppi_AjaxURI,{action:"gigya_connection_added",new_provider:e.provider,user:JSON.stringify(e.user)},function(){if(!from_comment){_handle_form_response();}else{$('.comment_success .[data-share-with="'+e.provider+'"]').addClass("linked");}},"json");}function _handle_connection_removed(e){forbes.util.debug(e.eventName+" event happened:");forbes.util.debug(e);}function _login(options){if(typeof options.reason!="undefined"&&options.reason.task=="commenting"){_controller({html:_generate_before_action_html(),parse_rules:{h2:"Before you comment..."}});return;}if(typeof options.reason!="undefined"&&options.reason.task=="following"){_continuation.active=true;_continuation.callback=options.reason.callback_on_auth;_controller({html:_generate_before_action_html(),parse_rules:{h2:"Before you follow..."}});return;}_continuation.active=false;_controller({url:_urls.login});return;}function _controller(options){if(typeof options.action!="undefined"&&options.action=="cancel"){forbes.modal_window.destroy();return false;}var modal_options={};if(typeof options.url!="undefined"){modal_options.url=options.url;}if(typeof options.html!="undefined"){modal_options.html=options.html;}modal_options.parse_rules=(typeof options.parse_rules!="undefined")?options.parse_rules:undefined;var social_connections=(typeof options.existing_social_connections!="undefined")?options.existing_social_connections:"";var done_url=(typeof options.done_url!="undefined")?options.done_url:"";modal_options.on_cancel=function(){_controller({action:"cancel"});};modal_options.on_complete=function($load_target){var login_true=$load_target.find(".modal_screen").hasClass("login");var before_action_true=$load_target.find(".modal_screen").hasClass("before_action");if((login_true==true)||(before_action_true==true)){$load_target.find(".heading .shelf_shadow").after('<div id="dfp-sociallogo"></div>');}_init_ad();if($load_target.find("div#gigya-existing-login-ui").length>0&&social_connections.length>0){var num_connections=social_connections.split(",").length;forbes.util.debug("displaying existing social connections: "+social_connections);forbes.util.debug("num connections: "+num_connections);_gigya_params.login_existing_ui.height=(num_connections<4)?55:110;_gigya_params.login_existing_ui.width=(num_connections<3)?(120*num_connections):360;_gigya_params.login_existing_ui.enabledProviders=social_connections;gigya.services.socialize.hideUI();gigya.services.socialize.showLoginUI(gigya_conf,_gigya_params.login_existing_ui);}if(done_url.length>0&&$load_target.find(".fancy_button.done").length>0){forbes.util.debug("using done_url: "+done_url);$load_target.find(".fancy_button.done").unbind("click").removeClass("ajaxify").removeClass("refresh_window").attr("href",done_url);}$load_target.capture_auth_links();$load_target.capture_close_buttons();_show_gigya_login_ui();if(_continuation.active){$load_target.find(".fancy_button.continue span.label").text("Continue");$load_target.find(".fancy_button.continue").unbind("click").bind("click",function(){_continuation.callback();return false;});}else{if($load_target.find(".fancy_button.refresh_window").length>0){$load_target.find(".fancy_button.refresh_window").unbind("click").bind("click",function(){$(this).addClass("loadingstate");_reload_window();return false;});}}forbes.forms.init({selector:"form.forbes_forms.unireg",on_complete:_handle_form_response,on_change:function(){$load_target.capture_auth_links();forbes.modal_window.position({animate:true});}});};forbes.modal_window.load(modal_options);}function _handle_form_response(json){if(typeof json.success!="undefined"){if(json.success&&json.next){_controller({html:json.next,done_url:(typeof json.done_url!="undefined")?json.done_url:""});return false;}if(typeof json.refresh_window!="undefined"){_controller({html:_generate_window_reload_html("Logging in...")});setTimeout(function(){_reload_window();},250);return false;}if(json.success="already_logged"){_controller({html:_generate_already_logged_html()});return false;}}else{if(json.error&&json.error_data&&json.error_data.form){var controller_options={html:json.error_data.form};if(typeof json.error_data.login_providers!="undefined"){controller_options.existing_social_connections=json.error_data.login_providers;}_controller(controller_options);return false;}}return true;}function _init_jquery_helpers(){$.fn.capture_close_buttons=function(){var $this=$(this);$this.find("a.fancy_button.close").click(function(event){event.preventDefault();_controller({action:"cancel"});return false;});return $this;};$.fn.capture_auth_links=function(){var $this=$(this);$this.find("a.ajaxify").unbind("click").bind("click",_handle_auth_links);return $this;};}function _handle_auth_links(event){if($(".non_modal_wrapper .modal_screen.auth.login, .non_modal_wrapper .modal_screen.auth.signup").length<1){event.preventDefault();var $this=$(this),url=$this.attr("href"),title=$this.attr("title")||null;if(event.which==2||event.metaKey){return true;}if($this.hasClass("unireg_login")){_controller({url:_urls.login});return false;}if($this.hasClass("unireg_register")){_controller({url:_urls.register});return false;}if($this.hasClass("unireg_forgotpassword")){_controller({url:_urls.forgot_password});return false;}if($this.hasClass("refresh_window")){_controller({html:_generate_window_reload_html("Reloading...")});setTimeout(function(){_reload_window();},250);return false;}if($this.hasClass("fancy_button")&&$this.hasClass("done")){_controller({action:"cancel"});return false;}_controller({url:url});return false;}return true;}function _scroll_to_inline_auth_forms_if_they_exist(){if($(".non_modal_wrapper .modal_screen.auth").length<1){return false;}forbes.util.scroll_to_obj($(".modal_screen.auth"),{duration:400,valign:true,highlight:false});}function _generate_before_action_html(){var html='<div class="modal_screen auth before_action">';html+='<div class="heading">';html+="<h2>Login Required</h2>";html+='<div class="shelf_shadow"></div>';html+="</div>";html+='<div class="main">';html+='<div class="external_auth_options">';html+="<h3>Log in with your social account:</h3>";html+='<div id="gigya_login_extralarge_div"></div>';html+='<div class="clear"></div>';html+="</div>";html+='<hr class="dotted" />';html+='<h3>Or, you can <a class="ajaxify" href="'+_urls.login+'">log in</a> ';html+='or <a class="ajaxify" href="'+_urls.register+'">sign up</a> ';html+="using Forbes.";html+="</h3>";html+="</div>";html+="</div>";return html;}function _generate_already_logged_html(){var html='<div class="modal_screen auth small">';html+='<div class="heading">';html+="<h2>You’re already logged in</h2>";html+='<div class="shelf_shadow"></div>';html+="</div>";html+='<div class="main">';html+="<h3>";html+="Perhaps you logged in from a different browser window. We recommend ";html+='<strong><a class="ajaxify refresh_window" href="#">refreshing the page</a></strong> and trying again.';html+="</h3>";html+='<div class="clear"></div>';html+="</div>";html+="</div>";return html;}function _generate_window_reload_html(msg){var html='<div class="modal_screen auth small">';html+='<div class="heading">';html+="<h2>"+msg+"</h2>";html+='<div class="shelf_shadow"></div>';html+="</div>";html+='<div class="main">';html+="<p>";html+=forbes.modal_window.generate_large_loading_spinner_html();html+="</p>";html+='<div class="clear"></div>';html+="</div>";html+="</div>";return html;$("#dfp-sociallogo").remove();}function _init_ad(){if(forbes.ad_manager){forbes.ad_manager.display([{id:"sociallogo",sizes:[[120,40]]}]);}else{return false;}}function _reload_window(){if(_window_reloading_disabled){forbes.util.debug("WINDOW RELOAD DISABLED");return;}window.location.reload();}function _disconnect_gigya(){forbes.util.debug("disconnecting from all services ...");gigya.services.socialize.removeConnection();}return{init:_init,user:_user,login:_login,handle_auth_links:_handle_auth_links,disconnect_gigya:_disconnect_gigya};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.auth.init);var forbes=(function(app,$){app.following=(function($){var _time_following_toggle_start=null,_time_following_toggle_delay=300,_toggle_following_url=null,_cdn_path="";var _frequency_defaults={person:"weekly"};function _init(){_toggle_following_url="/ajax/follow_update";_cdn_path=imagesBaseCdn;_init_existing_following();_init_followable_blocks();}function _init_existing_following(){if(typeof $("#header_userinfo").attr("data-following-json")=="undefined"){return false;}var following_json=$.parseJSON($("#header_userinfo").attr("data-following-json"));for(var type in following_json){for(var i=0;i<following_json[type].length;i++){var id=following_json[type][i];$('.followable_block[data-target-type="'+type+'"][data-target-id="'+id+'"]').each(function(){var $this=$(this);$this.addClass("user_is_following");});}}}function _init_followable_blocks(options){var $blocks,fb_selector=".followable_block";if(typeof options!="undefined"){if(typeof options.$parent_scope!="undefined"){$blocks=options.$parent_scope.find(fb_selector);}}else{$blocks=$(fb_selector);}if($blocks.length<1){return false;}$blocks.each(function(){var cur_block=$(this);if(cur_block.find("div.follow_unireg").length<1){return true;}if(typeof cur_block.attr("data-object-json")==="undefined"){return true;}var object_tracking_linkName=cur_block.attr("data-tracking-link-name"),object_target_type=cur_block.attr("data-target-type"),object_target_id=cur_block.attr("data-target-id"),object_target_advoice_true=cur_block.attr("data-type-advoice"),object_target_advoice_name=cur_block.attr("data-target-name"),object_json=$.parseJSON(cur_block.attr("data-object-json")),default_frequency=(typeof _frequency_defaults[object_target_type]=="undefined")?"weekly":_frequency_defaults[object_target_type];cur_block.find("div.follow_unireg").unbind("mouseenter").bind("mouseenter",function(){if($(this).hasClass("changed")){$(this).removeClass("changed");}});if(typeof object_json.follow_count!="undefined"&&object_json.follow_count!=""){cur_block.find("span.follow_count").html("("+object_json.follow_count+")");}if(cur_block.hasClass("initializing")){cur_block.removeClass("initializing");}cur_block.find("div.follow_unireg a").unbind("click").bind("click",function(){_omnitureClickTracking(object_tracking_linkName,this,"forbescom");var action=(cur_block.hasClass("user_is_following"))?"unfollow":"follow";_toggle({vars:{action:action,target_type:object_target_type,target_id:object_target_id,advoice_true:object_target_advoice_true,advoice_title:object_target_advoice_name,frequency:default_frequency},before_toggle:function(){cur_block.find("span.loadingstate").removeAttr("style");cur_block.addClass("loadingstate");var now=new Date();_time_following_toggle_start=now.getTime();},callback:function(json){var user=forbes.auth.user();var is_following=(json.success&&action=="follow")?true:false;var now=new Date();var delay=_time_following_toggle_delay-(now.getTime()-_time_following_toggle_start);if(delay<0){delay=0;}if(is_following){delay=0;}setTimeout(function(){cur_block.find(".follow_unireg").addClass("changed");_update_following({is_following:is_following,target_type:object_target_type,target_id:object_target_id,advoice_true:object_target_advoice_true,advoice_title:object_target_advoice_name,object_json:object_json});cur_block.removeClass("loadingstate");if(is_following){if($("#forbes_modal_window").length>0&&$("#forbes_modal_window").css("display")=="block"){}else{_load_confirmation({target_type:object_target_type,target_id:object_target_id,title:object_json.title,advoice_true:object_target_advoice_true,advoice_title:object_target_advoice_name,avatar_src:object_json.avatar_src,frequency:default_frequency});}}else{if(cur_block.hasClass("type_article_head")){cur_block.stop().css({backgroundColor:"#ffdb88"});cur_block.animate({backgroundColor:"transparent"},{duration:700,easing:"easeInOutCubic"});}}},delay);}});return false;});});}function _toggle(options){if(!forbes.auth.user().logged_in){forbes.auth.login({reason:{task:"following"}});return false;}options.before_toggle();$.post(_toggle_following_url,options.vars,function(json){if(!json.success){if(json.error_type=="not_logged_in"){forbes.auth.login({reason:{task:"following"}});}return false;}if(typeof options.callback!="undefined"){options.callback(json);}},"json");}function _update_following(options){if(!options.is_following){forbes.follow_bar.remove_entity({id:options.target_id,type:options.target_type});}else{if(options.target_type!="article"){forbes.follow_bar.add_entity({id:options.target_id,type:options.target_type,avatar:options.object_json.avatar_src,url:"",justPublished:false,activity:0});}}$('.followable_block[data-target-type="'+options.target_type+'"][data-target-id="'+options.target_id+'"]').each(function(){var $this=$(this);forbes.util.debug("updating:");forbes.util.debug($this);if($this.attr("data-object-json")!="undefined"&&$this.attr("data-object-json")!=null){var object_json=$.parseJSON($this.attr("data-object-json"));if(typeof object_json.follow_count!="undefined"&&object_json.follow_count!=""){object_json.follow_count=parseInt(object_json.follow_count);object_json.follow_count=(options.is_following)?(object_json.follow_count+1):(object_json.follow_count-1);var new_count=forbes.util.number_format(object_json.follow_count);$this.find("span.follow_count").text("("+new_count+")");}$this.attr("data-object-json",$.toJSON(object_json));}if(options.is_following){$this.addClass("user_is_following");}else{$this.removeClass("user_is_following");}});}function _load_confirmation(options){forbes.modal_window.load({html:_generate_confirmation_html(options),parse_rules:undefined,on_cancel:function(){forbes.modal_window.destroy();},on_complete:function(load_target){var user=forbes.auth.user();load_target.find("a.fancy_button.close").unbind("click").bind("click",function(){if((typeof user.was_logged_out!="undefined"&&user.was_logged_out)||!user.logged_in){$(this).addClass("loadingstate");window.location.reload();}else{forbes.modal_window.destroy();}return false;});_init_ad();forbes.forms.init({});}});}function _init_ad(){if(forbes.ad_manager){forbes.ad_manager.display([{id:"sociallogo",sizes:[[120,40]]}]);}else{return false;}}function _generate_confirmation_html(options){if(options.target_type=="article"){return _generate_comment_following_confirmation_html(options);}else{return _generate_entity_confirmation_html(options);}}function _generate_entity_confirmation_html(options){var html="";html+='<div class="modal_screen following_unireg">';html+='<form id="following_form" class="forbes_forms v1" action="'+_toggle_following_url+'" method="post">';html+='<div class="main">';html+='<input type="hidden" name="action" value="follow">';html+='<input type="hidden" name="target_type" value="'+options.target_type+'">';html+='<input type="hidden" name="target_id" value="'+options.target_id+'">';html+="<h2>You are now following:</h2>";html+=_generate_entity_block_html(options);html+='<div class="digest_settings">';if(options.target_type=="topic"){html+="<p>Receive email when new "+options.title+" posts are published:</p>";}html+=_generate_frequency_control_html(options.frequency);html+="</div>";html+='<a class="fancy_button close small"><span class="outer"><span class="inner"><span class="icon"></span><span class="label">Done</span></span></span><span class="loading_spinner" style="display:none;"><img src="'+imagesBaseCdn+'/assets/img/loading_spinners/16px_on_transparent.gif" height="16" width="16" alt=""></span></a>';html+='<div id="dfp-sociallogo"></div>';html+="</div>";html+="</form>";html+="</div>";return html;}function _generate_comment_following_confirmation_html(options){var html="";html+='<div class="modal_screen following_unireg following_comments">';html+='<form id="following_form" class="forbes_forms v1" action="'+_toggle_following_url+'" method="post">';html+='<div class="heading">';html+="<h2>Thank You</h2>";html+='<div id="dfp-sociallogo"></div>';html+='<div class="shelf_shadow"></div>';html+="</div>";html+='<div class="main">';html+='<input type="hidden" name="action" value="follow">';html+='<input type="hidden" name="target_type" value="'+options.target_type+'">';html+='<input type="hidden" name="target_id" value="'+options.target_id+'">';html+="<h3>You are now following comments on:</h3>";html+='<h2 class="follow_article_title">'+options.title+"</h2>";html+="<p>You will receive email notifications when new comments are posted</p>";html+='<a href="'+$("#comments").attr("data-manage-comment-following-link")+'" target="_blank" class="manage_link">Manage your alerts</a>';html+="</div>";html+='<div class="done">';html+='<a class="fancy_button close small"><span class="outer"><span class="inner"><span class="icon"></span><span class="label">Done</span></span></span><span class="loading_spinner" style="display:none;"><img src="'+imagesBaseCdn+'/assets/img/loading_spinners/16px_on_transparent.gif" height="16" width="16" alt=""></span></a>';html+="</div>";html+="</form>";html+="</div>";return html;}function _generate_frequency_control_html(selected){var html="",radios=[{id:"immediate",title:"Immediate"},{id:"daily",title:"Daily"},{id:"weekly",title:"Weekly"},{id:"none",title:"None"}];html+='<div class="fancy_radio" data-submit-form-on-change="true">';for(var i=0;i<radios.length;i++){var is_checked=(radios[i].id==selected)?' checked="checked"':"",checked_class=(radios[i].id==selected)?"checked":"";html+='<input type="radio" id="following_form_email_digest_frequency_'+radios[i].id+'" name="frequency" value="'+radios[i].id+'"'+is_checked+">";html+='<label class="'+checked_class+'" for="following_form_email_digest_frequency_'+radios[i].id+'"><span>'+radios[i].title+"</span></label>";}html+='<span class="loading_spinner" style="display:none;"><img src="'+imagesBaseCdn+'/assets/img/loading_spinners/16px_on_transparent.gif" height="16" width="16" alt=""></span>';html+="</div>";return html;}function _generate_entity_block_html(options){var html="",title=options.title,advoice_true=options.advoice_true,advoice_title=options.advoice_title,avatar_src=options.avatar_src;html+='<div class="entity_block">';html+='<span class="avatar">';html+='<img src="'+avatar_src+'" alt="'+title+'" />';html+="</span>";if(options.target_type=="topic"){html+='<span class="slug">Forbes Topic</span>';}if((options.advoice_true=="true")&&(options.target_type!="author")){if(advoice_title!=null){html+='<span class="title advoice"><span class="brandvoice">'+advoice_title+"</span>Voice</span>";}}else{html+='<span class="title">'+title+"</span>";}html+="</div>";return html;}function _generate_followable_block(){var html="";html+='<div class="followable_block" data-target-type="" data-target-id="" data-object-json="" data-type-advoice="" data-target-name="" data-tracking-link-name="">';html+='<div class="follow_unireg">';html+='<a href="javascript://follow" class="follow_unireg_link">';html+='<span class="option_follow">';html+='<span class="icon"></span>';html+='<span class="text">Follow</span>';html+="</span>";html+='<span class="option_following">';html+='<span class="icon"></span>';html+='<span class="text">Following</span>';html+="</span>";html+='<span class="option_unfollow">';html+='<span class="icon"></span>';html+='<span class="text">Unfollow</span>';html+="</span>";html+="</a>";html+=' <span class="follow_count"></span>';html+='<span class="loadingstate"><img class="loadingstateimg" src="'+_cdn_path+'/assets/img/loading_spinners/16px_grey.gif" alt="" width="16" height="16"></span>';html+="</div>";html+="</div>";return html;}function _populate_followable_block(options){if(typeof options=="undefined"){return false;}if(options.$target.length<1){return false;}options.$target.attr("data-target-type",options.target_type).attr("data-target-id",options.target_id).attr("data-type-advoice",options.advoice_true).attr("data-target-name",options.advoice_title).attr("data-object-json",options.object_json).attr("data-tracking-link-name",options.tracking_link_name);if((typeof options.follow_count!="undefined")&&(options.follow_count!=0)){options.$target.find(".follow_count").show().html("("+options.follow_count+")");}else{options.$target.find(".follow_count").hide();}if(options.user_is_following){options.$target.addClass("user_is_following");}else{options.$target.removeClass("user_is_following");}options.$target.removeClass("loadingstate");}function _omnitureClickTracking(linkName,object,account){if(!!!linkName||linkName.length==0){linkName="unknown";}forbes.util.debug("_omnitureClickTracking "+linkName.length);s_linkTrackVars="prop18";s_linkType="o";s_linkName=linkName;if(typeof(globalPageName)!="undefined"){s_prop18=globalPageName;}s_lnk=s_co(object);s_gs(account);}return{init:_init,toggle:_toggle,load_confirmation:_load_confirmation,generate_followable_block:_generate_followable_block,init_followable_blocks:_init_followable_blocks,populate_followable_block:_populate_followable_block};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.following.init);(function(){if(typeof forbes==="undefined"){forbes={};}if(typeof forbes.fast_pixel==="undefined"){forbes.fast_pixel={};}forbes.fast_pixel.initialized=true;var message={fps:get_cookie(),op:get_message_type(),sh:get_screen_height(),sw:get_screen_width(),ch:get_channel(),se:get_section(),ti:get_companies(),pt:get_page_type(),i:get_page_id(),su:get_url(),re:get_referrer(),au:get_author(),at:get_author_type(),pa:get_partner(),ts:get_timestamp(),rn:get_random()};var welcome_ad_url="http://www.forbes.com/fdc/welcome_mjx.shtml";var welcome_ad_ref_cookie="wg_originalReferrer";var node_name="pzndiv";add_onload_event(function(){drop_pixels(build_fast_request_url(message));});function build_fast_request_url(message_object){var request_url="http://fast.forbes.com/fps/cookie_backup.php?";var item_counter=0;for(item_key in message_object){if(message_object.hasOwnProperty(item_key)){if(item_counter>0){request_url=request_url+"&";}if(null!==message_object[item_key]){request_url=request_url+item_key+"="+message_object[item_key];}else{request_url=request_url+item_key+"=";}item_counter++;}}return request_url;}function drop_pixels(request_urls){if("object"!==typeof request_urls&&"string"!==typeof request_urls){return;}if("string"===typeof request_urls){request_urls=[request_urls];}if(request_urls.length<1){return;}if("function"!==typeof document.getElementById){if(null!==document.getElementById(node_name)){if(document.getElementById(node_name)["data-location"]+""==window.location){return;}}}var node_to_append=document.createElement("div");node_to_append.id=node_name;node_to_append["data-location"]=window.location;var i=0;for(i=0;i<request_urls.length;i++){var image_to_append=document.createElement("img");image_to_append.width=1;image_to_append.height=1;image_to_append.alt="";image_to_append.src=request_urls[i];node_to_append.appendChild(image_to_append);}document.body.appendChild(node_to_append);}function get_message_type(){return"user_msg";}function get_screen_height(){if("undefined"!==typeof window.screen){return window.screen.height;}else{return null;}}function get_screen_width(){if("undefined"!==typeof window.screen){return window.screen.width;}else{return null;}}function get_channel(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.channel){return forbes.page_meta.channel;}else{if("undefined"!==typeof window.displayedChannel){return window.displayedChannel;}else{return null;}}}function get_section(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.section){return forbes.page_meta.section;}else{if("undefined"!==typeof window.displayedSection){return window.displayedSection;}else{return null;}}}function get_author(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.author&&"undefined"!==typeof forbes.page_meta.author.natural_id){return forbes.page_meta.author.natural_id;}else{var author_byline=get_meta_from_dom("author");if(author_byline!==null&&author_byline!==""){return author_byline;}else{return null;}}}function get_author_type(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.author&&"undefined"!==typeof forbes.page_meta.author.type){return forbes.page_meta.author.type;}else{return null;}}function get_companies(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.entities&&"undefined"!==typeof forbes.page_meta.entities.companies){return forbes.page_meta.entities.companies.join(",");}else{if("undefined"!==typeof window.cTicker&&"undefined"!==typeof window.displayedSection&&window.displayedSection==="companytearsheets"){return window.cTicker;}else{return null;}}}function get_url(){var url_to_return=get_canonical_url();if(null===url_to_return){if("undefined"!==typeof window.location){return window.location.protocol+"//"+window.location.hostname+window.location.pathname;}else{return null;}}else{return url_to_return;}}function get_canonical_url(){linkElements=document.getElementsByTagName("link");var i=0;for(i=0;i<linkElements.length;i++){if(linkElements[i].getAttribute("rel")==="canonical"){return linkElements[i].getAttribute("href");}}return null;}function get_referrer(){var referrer;if(typeof forbes!="undefined"&&typeof forbes.page_meta!="undefined"&&typeof forbes.page_meta.referrer!="undefined"&&forbes.page_meta.referrer!=""){referrer=forbes.page_meta.referrer;}else{referrer=document.referrer;}if(referrer&&referrer.match(/^(?!http:\/\/(.[^/]+)\.forbes\.com)http(s)?:\/\/(.[^/:]+)/)){return referrer.match(/^http(s)?:\/\/(.[^/:]+)/)[2];}else{if(referrer&&welcome_ad_url===referrer&&document.cookie.indexOf(welcome_ad_ref_cookie+"")!==-1&&window.wg_extdom&&wg_extdom){return document.cookie.match(wg_originalReferrer+"=http(s)?://(.[^/:]+)(;|$)")[1];}}return null;}function get_page_type(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.type){return forbes.page_meta.type;}else{if("undefined"!==typeof window.pageType){return window.pageType;}else{return null;}}}function get_page_id(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.natural_id){return forbes.page_meta.natural_id;}else{return null;}}function get_partner(){if("undefined"!==typeof forbes&&"undefined"!==typeof forbes.page_meta&&"undefined"!==typeof forbes.page_meta.partner_id){return forbes.page_meta.partner_id;}else{var partner=get_query_parameter("partner");if("null"!==typeof partner){return partner;}else{return null;}}}function get_timestamp(){return new Date().getTime();}function get_random(){return Math.floor(Math.random()*10000000000000);}function get_query_parameter(param_to_get){var query_params=window.location.search.substring(1).split("&");var i=0;for(i=0;i<query_params.length;i++){var param_key_val=query_params[i].split("=");if(param_key_val[0]===param_to_get){return param_key_val[1];}}return null;}function get_cookie(){if("function"===typeof getStandaloneCookie){return getStandaloneCookie("fps");}else{return null;}}function get_meta_from_dom(property_to_get){if("undefined"===typeof property_to_get){return null;}var meta_tags=document.getElementsByTagName("meta");var i=0;for(i=0;i<meta_tags.length;i++){if(("undefined"!==typeof meta_tags[i].name&&meta_tags[i].name===property_to_get)||("undefined"!==meta_tags[i].getAttribute("property")&&meta_tags[i].getAttribute("property")==property_to_get)){return meta_tags[i].content;}}}function add_onload_event(new_onload){var old_onload=window.onload;if("function"!==typeof window.onload){window.onload=new_onload;}else{window.onload=function(){if(old_onload){old_onload();}new_onload();};}}})();if(typeof displayedSection=="undefined"){displayedSection="";}if(typeof displayedChannel=="undefined"){displayedChannel="";}pageURL=this.location.href;function Meta(){var m=document.getElementsByTagName("META");this.meta={};for(var i=0;i<m.length;i++){this.meta[m[i].name]=m[i].content;}}Meta.prototype.get=function(n){return this.meta[n];};meta=new Meta();var phatcatId="35415301490";function isMember(){forbes0=document.cookie.indexOf("forbesmemb=");forbes1=document.cookie.indexOf("forbesmemb_confirm=");if(forbes0!=-1&&forbes1!=-1&&findCookie("forbesmemb")!=phatcatId){return true;}else{return false;}}function findCookie(NameOfCookie){if(document.cookie.length>0){begin=document.cookie.indexOf(NameOfCookie+"=");if(begin!=-1){begin+=NameOfCookie.length+1;end=document.cookie.indexOf(";",begin);if(end==-1){end=document.cookie.length;}return unescape(document.cookie.substring(begin,end));}}return null;}function bluekai(){var forbesMember="";if(isMember()){forbesMember=findCookie("forbesmemb");}var partner=findCookie("s_p_name");if(partner==null){partner="";}document.write('<script type="text/javascript" src="http://tags.bluekai.com/site/3536?ret=js&phint=channel%3D'+displayedChannel+"&phint=section%3D"+displayedSection+"&phint=member%3D"+forbesMember+"&phint=partner%3D"+partner+'"><\/script>');}bluekai();(function(){if(typeof forbes==="undefined"){forbes={};}if(typeof forbes.fast_pixel==="undefined"){forbes.fast_pixel={};}if(!forbes.fast_pixel.initialized){var js=document.createElement("script");js.type="text/javascript";js.src="http://i.forbesimg.com/assets/js/forbes/fast_pixel.js";document.body.appendChild(js);}})();if(window.location.href.match(/\/pictures\/.*(\?|\&)referrerUrl=/)===null){var _sf_async_config={uid:17493,domain:"forbes.com"};var chartbeat_section="";if(displayedSection!=""){chartbeat_section=","+displayedSection;}_sf_async_config.sections=displayedChannel+chartbeat_section;var chartbeat_author=meta.get("author");if(chartbeat_author==null){chartbeat_author="";}_sf_async_config.authors=chartbeat_author;if(getCanonicalUrl()!=""){_sf_async_config.useCanonical=true;}(function(){function loadChartbeat(){window._sf_endpt=(new Date()).getTime();var e=document.createElement("script");e.setAttribute("language","javascript");e.setAttribute("type","text/javascript");e.setAttribute("src",(("https:"==document.location.protocol)?"https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/":"http://")+"static.chartbeat.com/js/chartbeat_pub.js");document.body.appendChild(e);}var oldonload=window.onload;window.onload=(typeof window.onload!="function")?loadChartbeat:function(){oldonload();loadChartbeat();};})();}function getCanonicalUrl(){linkElements=document.getElementsByTagName("link");canonicalUrl="";for(i=0;i<linkElements.length;i++){if((typeof linkElements[i].attributes.rel!="undefined")&&(linkElements[i].attributes.rel.nodeValue=="canonical")){canonicalUrl=linkElements[i].attributes.href.nodeValue;break;}}return canonicalUrl;}(function(){var a=document.createElement("a");a.id="borderTab";var e=document.createElement("div");e.id="teconsent";var s=document.createElement("script");s.src="http://consent.truste.com/notice?domain=forbes.com&c=teconsent";e.appendChild(s);a.appendChild(e);document.body.appendChild(a);})();var forbes=(function(app,$){app.follow_bar=(function($){var $this,$_f_b,$_b_h,$_i_c,$_h_b,$_h,_cdn_path="",_cookie_expiration=365,_init_hide=true,_logged_in=false,_preview_highlight="#fffccc",_custom_ie={alt_border:"solid 1px #dddddd"},_json_req_path="/json/get_follow_bar",_current_mode="recommendations",_more_button_url={info:"/sites/andreaspiegel/2012/06/07/forbes-follow-bar-what-is-it-and-why",following:"/following"},_current_more_button_url=_more_button_url.following,_current_entity_array=[],_h_b_cycle_int,_h_b_cycle_dur=5000,_find_more_text_size_original=11,_find_more_text_size_new=11,_find_more_text_size_max=13,_thumb_dimension_original=40,_thumb_dimension_new=40,_minimum_scale_threshold=700,_maximum_scale_threshold=900,_thumb_margin=4,_thumb_grid_unit_x=0,_follow_perc_width=0.6,_find_more_btn_width,_enable_info_card=true,_avatar_offset_x=51,_trans_speed=350,_trans_speed_fast=150,_trans_speed_slow=750,_trans_increment=50,_pre_trans_delay=1,_f_b_data,_follow_bar_enabled=true,_f_b_hidden=true,_f_b_height=40,_f_b_height_new=40,_headline_height=32,_headline_pad_y=11,_headline_menu_pad=19,_headline_menu_object={},_tooltip_margin=5,_tooltip_padding=6,_tooltip_pointer_offset_x=7,_tooltip_total_height=27,_initialized=false,_data_ready=false;function _init(){if(_initialized){return false;}_initialized=true;$this=app.follow_bar;if(!_follow_bar_exists()){return false;}_init_html();_f_b_data={mode:"",headlineBlaster:[],entityArray:[]};$_f_b=$("#follow_bar");$_b_h=$_f_b.find(".button-hide");$_h_b=$_f_b.find(".headline_blaster");$_h=$_f_b.find(".headlines");_thumb_grid_unit_x=_thumb_dimension_new+_thumb_margin;_find_more_btn_width=$_f_b.find(".find_more").width();$_f_b.find(".following .label").css({opacity:0});$_b_h.addClass("button-hidden");$_f_b.find(".following").css({width:(_follow_perc_width*100)+"%"});$_h_b.css({width:(100-(_follow_perc_width*100))+"%"});_import_data();}function _init_html(){var html="";html+='<div id="follow_bar">';html+='<div class="button-hide">';html+='<div class="arrow"></div>';html+="</div>";html+='<div class="container-outer">';html+='<div class="container">';html+='<div class="following">';html+='<span class="label">Recommended</span>';html+='<ul class="follow-entities"></ul>';html+='<span class="find_more"></span>';html+="</div><!-- .following -->";html+='<div class="headline_blaster">';html+='<div class="featured">';html+='<div class="content_window">';html+='<div class="content"></div>';html+="</div>";html+='<span class="taper"></span>';html+='<div class="toggle-button">';html+='<div class="icon">+</div>';html+="</div>";html+="</div><!-- .featured -->";html+='<div class="headlines">';html+='<div class="headlines_content">';html+='<div class="headlines_shadow"></div>';html+='<div class="headlines_menu">';html+='<ul class="edittools-list" data-et-context="headlineblaster" data-et-location="followingbarcontents"></ul>';html+='<div class="grad"><span class="arrow"></span></div>';html+="</div><!-- .headlines_menu -->";html+="</div><!-- .headlines_content -->";html+="</div><!-- .headlines -->";html+="</div><!-- .headline_blaster -->";html+="</div>";html+="</div>";html+="</div>";$("body").append(html);}function _follow_bar_exists(){var shouldExist=_initialized;if($("html").hasClass("touch")){shouldExist=false;}return shouldExist;}function _is_enabled(){return _follow_bar_enabled;}function _import_data(options){var json_path=_json_req_path,entity_arrays=["recommendations","following"],params={};if(typeof followBarLocation!="undefined"){params.location=followBarLocation;}$.ajax({type:"get",url:json_path,data:params,dataType:"json",timeout:10*1000,error:function(e,textStatus,errorThrown){},success:function(data){if(typeof options!="undefined"&&typeof options.reload_headline_blaster!="undefined"&&options.reload_headline_blaster){_update_data(data);return false;}_f_b_data.mode=data.mode;_f_b_data.totalFollowing=data.following.totalFollowing;_f_b_data.headlineBlaster=data.headlineBlaster;for(var i=0;i<entity_arrays.length;i++){if(data[entity_arrays[i]].entityArray&&data[entity_arrays[i]].entityArray!=null){for(var j=0;j<data[entity_arrays[i]].entityArray.length;j++){var entity=data[entity_arrays[i]].entityArray[j];entity.entity_state=entity_arrays[i];_f_b_data.entityArray.push(entity);}}}_on_data_loaded();}});}function _on_data_loaded(){var newScale=_scale(),newCellWidthHeight=Math.floor(_thumb_dimension_original*newScale),prep=_prep_headline_blaster(),cellMarginPadding=4;$_f_b.find(".container").css({display:"block",top:(newCellWidthHeight+cellMarginPadding)});$_b_h.css({display:"block"});_create_avatars();_setup_events();if(forbes.info_card){_create_info_card();}_logged_in=(_f_b_data.mode=="recommended")?false:true;_set_mode();_create_tooltip();_headline_blaster_cycle(true);_update_layout();_data_ready=true;_reveal();}function _is_data_ready(){return _data_ready;}function _create_avatars(callback){if($_i_c){$_i_c.hide_it();}var currentEntityArray=_get_current_entity_array();$.each(currentEntityArray,function(k,v){var i=(k+1);v.list_id=i;var html="";html+='<li class="follow-entity" data-list-id="'+i+'">';html+='<div class="avatar" ';html+='data-entity-id="'+v.id+'" ';html+='data-entity-type="'+v.type+'">';html+='<div class="avatar_wrapper">';if(_current_mode=="following"){html+='<span class="activity_count';if(v.justPublished===true){html+=" just_published";}if(v.activity<1){html+=" hidden";}html+='">'+v.activity+"</span>";}html+='<span class="image">';html+='<img src="'+_cdn_path+v.avatar+'" ';html+='data-entity-url="'+v.url+'" ';html+='class="small">';html+="</span>";html+='<div class="tab"></div>';html+="</div><!-- .avatar-wrapper -->";html+="</div><!-- .avatar -->";html+="</li>";$_f_b.find(".follow-entities").append(html);});if($_i_c){$_i_c.setup_events();}$_f_b.find(".following").css({display:"none"});$_f_b.find(".find_more").css({opacity:0});_update_layout();if(callback){callback();}}function _create_info_card(){if(forbes.info_card){$_i_c=forbes.info_card.create($_f_b,_f_b_data);}}function _setup_key_events(){if(!_follow_bar_exists()){return false;}$(window).bind("keypress",function(event){if((event.altKey)&&(event.which===172)){if($_i_c){$_i_c.hide_it();}_show_headline_blaster(false);_logged_in=(_logged_in==false)?true:false;_set_mode();event.preventDefault();}else{if((event.altKey)&&(event.which===223)){_toggle_hide_or_show();event.preventDefault();}else{if((event.altKey)&&(event.which===729)){if(!_f_b_hidden){_toggle_headline_blaster();event.preventDefault();}}else{if((event.altKey)&&(event.which===161)){_remove_entity({id:"0001",type:"writer"});}else{if((event.altKey)&&(event.which===8482)){_add_entity({id:"0001",type:"writer",avatar:"http://blogs-images.forbes.com/cache/gravatars/hannahelliott_40.jpg",url:"http://blog.forbes.com/people/hannahelliott/",justPublished:true,activity:7});}else{if((event.altKey)&&(event.which===163)){_remove_entity({id:"0002",type:"advoice_writer"});}else{if((event.altKey)&&(event.which===162)){_add_entity({id:"0002",type:"advoice_writer",avatar:"http://blogs-images.forbes.com/cache/gravatars/bobevans_136.jpg",url:"blogs.forbes.com/people/bobevans/"});}}}}}}}});}function _setup_events(){$(window).resize(function(){if($_i_c){$_i_c.hide_it();}_hide_tooltip();_update_layout();});$_b_h.bind("click",function(){_toggle_hide_or_show();_hide_tooltip();});$_b_h.hover(function(){if(_f_b_hidden==false){_show_tooltip.call($(this),"Collapse");}else{_show_tooltip.call($(this),"Expand");}},function(){_hide_tooltip();});$_f_b.find(".avatar").unbind("click").bind("click",function(){if(entityURL!=""){location.href=$(this).find("img").attr("data-entity-url");}});$_f_b.find(".find_more").unbind("click").bind("click",function(){if(_current_more_button_url==_more_button_url.following){window.location.href=_current_more_button_url;}else{forbes.find_more_to_follow.launch();_show_headline_blaster(false);}return false;});$_f_b.find(".find_more").hover(function(){$(this).addClass("underline");},function(){$(this).removeClass("underline");});$_h_b.find(".toggle-button").hover(function(){if($_h_b.find(".headlines").hasClass("hidden")){_show_tooltip.call($(this),"Expand Headlines");}},function(){_hide_tooltip();});$_h_b.find(".toggle-button").unbind("click").bind("click",function(event){_toggle_headline_blaster();_hide_tooltip();event.preventDefault();return false;});$_h_b.unbind("click").bind("click",function(event){if(!$("body").hasClass("editOn")){event.stopPropagation();}});$("body").on("click",function(){_show_headline_blaster(false);});$(document).mousemove(function(e){if((e.clientX>$(".following").width())&&(e.clientY>($(window).height()-100))){if($_h.hasClass("hidden")){_headline_blaster_cycle(false);}}else{if($_h.hasClass("hidden")){if(_f_b_hidden){_headline_blaster_cycle(false);}else{_headline_blaster_cycle(true);}}}});}function _set_mode(){_current_mode=(_logged_in)?"following":"recommendations";$_f_b.find(".following").animate({opacity:1},_trans_speed_fast,function(){$_f_b.find(".find_more").css({opacity:0});$_f_b.find(".following .label").css({opacity:0});$_f_b.find(".follow-entities").empty();_create_avatars(_display_avatars);});}function _set_avatar_focus(avatarElement){if(!_follow_bar_exists()){return false;}$_f_b.find(".follow-entities .avatar").stop(true);if(avatarElement){$_f_b.find(".follow-entities .avatar").css({opacity:0.5});avatarElement.css({opacity:1});}else{$_f_b.find(".follow-entities .avatar").css({opacity:1});}}function _set_more_link(){var avatarCount=_get_hidden_avatar_count();if(_logged_in==true){if(avatarCount>0){_current_more_button_url=_more_button_url.following;$_f_b.find(".find_more").html("+ "+avatarCount+" more");}else{_current_more_button_url="#";$_f_b.find(".find_more").html("+ find more to follow");}}else{_current_more_button_url="#";$_f_b.find(".find_more").html("+ find more to follow");}}function _set_follow_label(){if(_logged_in){$_f_b.find(".following .label").html("You follow");}else{$_f_b.find(".following .label").html("Recommended");}$_f_b.find(".following .label").animate({opacity:1},_trans_speed_fast);}function _get_current_entity_array(){if(!_follow_bar_exists()){return false;}var currentMode=_get_current_mode();_current_entity_array=[];for(var i=0;i<_f_b_data.entityArray.length;i++){var v=_f_b_data.entityArray[i];if(v.entity_state==currentMode){_current_entity_array.push(v);}}return _current_entity_array;}function _get_follow_bar_height(){if(!_follow_bar_exists()){return false;}return _f_b_height_new;}function _get_current_mode(){return _current_mode;}function _display_avatars(){var maxCount;$_f_b.find(".following").css({opacity:1});_set_follow_label();if($_f_b.find(".following").css("display")!="block"){$("#follow_bar .follow-entities .image img").css({width:_thumb_dimension_new,height:_thumb_dimension_new});$_f_b.find(".following").css({display:"block",opacity:1});maxCount=_get_visible_avatar_count();_update_layout();for(var i=1;i<=$_f_b.find(".follow-entities").children().length;i++){var avatarElement=$_f_b.find('.follow-entities [data-list-id="'+i+'"]');var delayAmount=_pre_trans_delay+(i*_trans_increment);if(i<=maxCount){avatarElement.css({opacity:0});avatarElement.delay(delayAmount).animate({opacity:1},_trans_speed,function(){if(Number($(this).attr("data-list-id"))==maxCount){_update_layout();$_f_b.find(".find_more").animate({opacity:1},_trans_speed);}});}else{avatarElement.hide();}}}}function _show_tooltip(textContent){var $_t=$_f_b.find(".tooltip"),$_p=$_t.find(".pointer"),currentX=this.offset().left,minX,maxX,newX;$_t.find(".text").html(textContent);$_p.css({left:_tooltip_pointer_offset_x});newX=currentX;minX=_tooltip_margin;maxX=($(window).width()-$_t.width()-(_tooltip_padding*2))-_tooltip_margin;if(newX>=maxX){newX=maxX;var pX=($_t.width()-_tooltip_margin);$_p.css({left:pX});}else{if(newX<minX){newX=minX;}}$_t.css({left:newX,top:($_f_b.find(".button-hide").position().top-_tooltip_total_height)});$_t.show();}function _hide_tooltip(){$_f_b.find(".tooltip").hide();}function _get_visible_avatar_count(){var offsetX=$_f_b.find(".following .label").width()+_avatar_offset_x,followHalf=Math.floor($(window).width()*_follow_perc_width),boxExtentX=(followHalf-offsetX)-_find_more_btn_width,avatarCount=0;for(var i=1;i<=$_f_b.find(".follow-entities").children().length;i++){var extentX=(i*_thumb_grid_unit_x);var listObj=$_f_b.find(".follow-entities li:nth-child("+i+")");if(extentX>boxExtentX){$(listObj).hide();}else{avatarCount=i;$(listObj).show();}}return avatarCount;}function _get_hidden_avatar_count(){var hiddenCount=_total_following()-_get_visible_avatar_count();return hiddenCount;}function _enable_follow_bar(s){_follow_bar_enabled=s;if(s==true){if($.browser.msie&&parseInt($.browser.version)<8){}else{if($.browser.msie&&parseInt($.browser.version)<9){$("#follow_bar .avatar").animate({opacity:1},1);}$_f_b.find(".following").animate({opacity:1},_trans_speed);}}else{if($.browser.msie&&parseInt($.browser.version)<8){}else{if($.browser.msie&&parseInt($.browser.version)<9){$("#follow_bar .avatar").animate({opacity:0.3},1);}$_f_b.find(".following").animate({opacity:0.3},_trans_speed);}}}function _create_tooltip(){var html="";html+='<div class="tooltip" style="display: none;">';html+='<span class="text"></span>';html+='<span class="pointer"></span>';html+="</div>";$_f_b.append(html);}function _toggle_hide_or_show(){if(_f_b_hidden){$.cookie("_f_b_hidden","false",{path:"/",expires:_cookie_expiration});_hide_follow_bar(false);}else{$.cookie("_f_b_hidden","true",{path:"/",expires:_cookie_expiration});_show_headline_blaster(false);_hide_follow_bar(true);}}function _hide_follow_bar(s){_f_b_hidden=s;$_f_b.find(".container").stop(true);$_f_b.stop(true);if($_i_c){$_i_c.hide_it();}_hide_tooltip();if(s==true){_headline_blaster_cycle(false);$_b_h.removeClass("button-shown").addClass("button-hidden");$_f_b.find(".container").animate({top:_f_b_height_new+"px"},_trans_speed,"easeOutQuint",function(){$_f_b.css({bottom:-(_f_b_height_new)});$_f_b.find(".button-hide").css({top:-(_f_b_height_new)});});}else{$_f_b.css({bottom:0});$_f_b.find(".button-hide").css({top:0});$_b_h.removeClass("button-hidden").addClass("button-shown");$_f_b.find(".container").animate({top:0},_trans_speed,"easeOutQuint",function(){_display_avatars();});}}function _reveal(){if(!_follow_bar_exists()){return false;}var headerFixed=(forbes.header.get_mode()=="fixed")?true:false;if($_b_h){if(headerFixed==false){if(_init_hide==true){if($.cookie("_f_b_hidden")&&$.cookie("_f_b_hidden")==="false"){_hide_follow_bar(false);}else{if($.cookie("_f_b_hidden")&&$.cookie("_f_b_hidden")==="false"){}else{if(!$.cookie("_f_b_hidden")){$.cookie("_f_b_hidden","false",{path:"/",expires:_cookie_expiration});$_b_h.removeClass("button-shown").addClass("button-hidden");}}}}}else{if(_init_hide==true){if($.cookie("_f_b_hidden")&&$.cookie("_f_b_hidden")==="false"){$_b_h.removeClass("button-hidden").addClass("button-shown");_hide_follow_bar(false);}else{if($.cookie("_f_b_hidden")&&$.cookie("_f_b_hidden")==="true"){$_b_h.removeClass("button-shown").addClass("button-hidden");_hide_follow_bar(true);}}}_init_hide=false;}}}function _scale(){var newScale=1,minimumScaleThreshold=_minimum_scale_threshold,maximumScaleThreshold=_maximum_scale_threshold,blockMarginPadding=5;if(($(window).height()>=minimumScaleThreshold)&&($(window).height()<maximumScaleThreshold)){newScale=1+(($(window).height()-minimumScaleThreshold)/minimumScaleThreshold);}else{if($(window).height()<minimumScaleThreshold){newScale=1;}else{if($(window).height()>maximumScaleThreshold){newScale=(maximumScaleThreshold/minimumScaleThreshold);}}}_thumb_dimension_new=Math.floor(_thumb_dimension_original*newScale);_thumb_grid_unit_x=_thumb_dimension_new+_thumb_margin;_f_b_height_new=Math.floor(_thumb_dimension_original*newScale)+blockMarginPadding;_find_more_text_size_new=Math.floor(_find_more_text_size_original*newScale);if(_find_more_text_size_new>_find_more_text_size_max){_find_more_text_size_new=_find_more_text_size_max;}return newScale;}function _update_layout(){var followingBlockWidth=0,newCellWidthHeight=_thumb_dimension_original,newScale=_scale(),elementHeight={};newCellWidthHeight=Math.floor(_thumb_dimension_original*newScale);$("#follow_bar .follow-entities li, #follow_bar .follow-entities li img, #follow_bar .avatar, .info_card .avatar_dup").css({width:newCellWidthHeight,height:newCellWidthHeight});$("#follow_bar, #follow_bar .container, #follow_bar .container-outer, #follow_bar .button-hide, #follow_bar .toggle-button, #follow_bar .headline_blaster, #follow_bar .headline_blaster .featured, #follow_bar .follow-entities").css({height:_f_b_height_new});elementHeight={followLabel:13,findMoreLink:$("#follow_bar .following .find_more").height()-2,headlineText:15};$("#follow_bar .following .label").css({marginTop:Math.floor((_f_b_height_new/2)-(elementHeight.followLabel/2))});$("#follow_bar .following .find_more").css({marginTop:Math.floor((_f_b_height_new/2)-(elementHeight.findMoreLink/2))});$("#follow_bar .headline_blaster .content").css({marginTop:Math.floor((_f_b_height_new/2)-(elementHeight.headlineText/2))});if(_f_b_hidden){$_f_b.find(".container").css({top:_f_b_height_new});}followingBlockWidth=$("#follow_bar .following .label").width()+($("#follow_bar .button-hide").width()+1)+(_get_visible_avatar_count()*_thumb_grid_unit_x)+$("#follow_bar .following .find_more").width();$("#follow_bar .following").width(followingBlockWidth);$("#follow_bar .following .find_more").css({fontSize:_find_more_text_size_new+"px"});var offsetX,findMoreX,contentWidth,headlineBlasterWidth;offsetX=$_f_b.find(".following .label").width()+_avatar_offset_x;headlineBlasterWidth=Math.floor($(window).width()*(1-_follow_perc_width));findMoreX=(_get_visible_avatar_count()*_thumb_grid_unit_x)+offsetX;$_f_b.find(".find_more").css({left:findMoreX+"px"});_update_headline_containers();contentWidth=($_h_b.find(".content").width()+_thumb_dimension_new);if(headlineBlasterWidth<contentWidth){$_h_b.find(".taper").css({display:"block"});$_h_b.find(".content").css({"float":"left"});}else{$_h_b.find(".taper").css({display:"none"});$_h_b.find(".content").css({"float":"right"});}_set_more_link();}function _total_following(actionType){switch(actionType){case"+":_f_b_data.totalFollowing+=1;break;case"-":_f_b_data.totalFollowing-=1;break;}return _f_b_data.totalFollowing;}function _add_entity(dataObject){if(!_follow_bar_exists()){return false;}var $newListElement=null,entityDataFound=false,entityAvatarFound=false,entityData=dataObject;_total_following("+");entityData.user_is_following=true;for(var i=0;i<_f_b_data.entityArray.length;i++){if((_f_b_data.entityArray[i].id===entityData.id)&&(_f_b_data.entityArray[i].type===entityData.type)){entityDataFound=true;}}if(forbes.info_card){forbes.info_card.update_data(entityData);}if(entityDataFound!==true){_f_b_data.entityArray.splice(0,0,entityData);}for(var i=0;i<_current_entity_array.length;i++){if((_current_entity_array[i].id===entityData.id)&&(_current_entity_array[i].type===entityData.type)){entityAvatarFound=true;}}if(!entityAvatarFound){_current_entity_array.splice(0,0,entityData);$.each($_f_b.find(".follow-entities li"),function(itemIndex,itemElement){$(itemElement).attr("data-list-id",Number($(this).attr("data-list-id"))+1);});var html="";html+='<li class="follow-entity" data-list-id="1">';html+='<div class="avatar" ';html+='data-entity-id="'+entityData.id+'" ';html+='data-entity-type="'+entityData.type+'">';html+='<div class="avatar_wrapper">';if((entityData.activity)&&(_current_mode=="following")){html+='<span class="activity_count';if(entityData.justPublished&&(entityData.justPublished===true)){html+=" just_published";}if(entityData.activity<1){html+=" hidden";}html+='">'+entityData.activity+"</span>";}html+='<span class="image">';html+='<img src="'+_cdn_path+entityData.avatar+'" ';html+='data-entity-url="'+entityData.url+'" ';html+='class="small">';html+="</span>";html+='<div class="tab"></div>';html+="</div><!-- .avatar-wrapper -->";html+="</div><!-- .avatar -->";html+="</li>";$_f_b.find(".follow-entities").prepend(html);_update_layout();$newListElement=$_f_b.find('.follow-entities li[data-list-id="1"]');$newListElement.css({width:1,overflow:"hidden",opacity:0});$newListElement.animate({width:_thumb_dimension_new,opacity:1},_trans_speed_fast);if(forbes.info_card){forbes.info_card.setup_events();}}_set_more_link();}function _remove_entity(dataObject){if(!_follow_bar_exists()){return false;}var $avatarElement=null,$listElement=null,entityData={id:dataObject.id,type:dataObject.type,user_is_following:false},selectorString="";selectorString+='.avatar[data-entity-id="';selectorString+=entityData.id;selectorString+='"][data-entity-type="';selectorString+=entityData.type;selectorString+='"]';_total_following("-");$avatarElement=$_f_b.find(selectorString);$listElement=$avatarElement.parent();if($avatarElement.length<1){return false;}for(var i=0;i<_current_entity_array.length;i++){if((_current_entity_array[i].id===entityData.id)&&(_current_entity_array[i].type===entityData.type)){_current_entity_array.splice(i,1);}}for(var i=0;i<_f_b_data.entityArray.length;i++){if((_f_b_data.entityArray[i].id===entityData.id)&&(_f_b_data.entityArray[i].type===entityData.type)){_f_b_data.entityArray[i].user_is_following=false;}}if(forbes.info_card){forbes.info_card.update_data(entityData);}if(forbes.info_card){forbes.info_card.hide_it();}$listElement.animate({opacity:0},_trans_speed_fast,function(){$listElement.animate({width:0},_trans_speed_fast,function(){var removedId=Number($(this).attr("data-list-id"));$(this).remove();$.each($_f_b.find(".follow-entities li"),function(itemIndex,itemElement){var currentListId=Number($(this).attr("data-list-id"));if(currentListId>removedId){$(itemElement).attr("data-list-id",currentListId-1);}});_update_layout();});});_set_more_link();}function _prep_headline_blaster(callback){var html,selectedHeadline,headlineCount=(_f_b_data.headlineBlaster.length-1);for(var k=headlineCount;k>=0;k--){var v=_f_b_data.headlineBlaster[k];html="";html+='<li class="edittools-item" data-et-item_id="'+v.itemId+'" data-et-location="followingbarcontents" data-et-item-type="'+v.itemType+'" data-id="'+(k+1)+'">';html+='<a href="'+v.url+'">';if(v.type&&v.type==="advoice"){html+='<span class="advoice"><span class="brandvoice">'+v.advoiceBrand+"</span>Voice: </span> ";}html+=v.title,50;html+="</a>";html+="</li>";$_h_b.find(".headlines ul").append(html);}selectedHeadline=$_f_b.find('.headlines_menu li[data-id="1"]').html();if(_is_editor()===false){$_f_b.find('.headlines_menu li[data-id="1"]').addClass("hidden").css({display:"none"});}$_h_b.find(".featured .content").html(selectedHeadline);$_h_b.find(".headlines_menu").css({top:_headline_menu_object.menuPosY});$_f_b.find('.headlines_menu li[data-id="1"]').addClass("displayed");$_h.append($_h_b.find(".featured .toggle-button").clone());$_h.find(".toggle-button").css({border:"none"});$_h.find(".toggle-button .icon").html("&ndash;");$_h.addClass("hidden");_set_headline_menu_properties();_update_headline_containers();$_h_b.find(".headlines_shadow").css({top:_headline_menu_object.menuPosY});if($.browser.msie){$_h_b.find(".headlines").css({border:_custom_ie.alt_border});$_h_b.find(".headlines_menu").css({borderTop:_custom_ie.alt_border,borderLeft:_custom_ie.alt_border});}$_h_b.find(".headlines").css({top:-(_headline_menu_object.menuPosY+1),height:_headline_menu_object.menuHeight});_show_headline_blaster(false);if(callback){return callback();}}function _set_headline_menu_properties(){var listInnerMargins=19,maskPaddingTop=10,totalItemsHeight=0,currentlyHidden=false;if($_h.hasClass("hidden")){currentlyHidden=true;$_h_b.find(".headlines_content").css({height:0});}$_h.removeClass("hidden");$.each($_h_b.find(".headlines ul li"),function(key,listElement){if($(listElement).css("display")=="list-item"){$(listElement).css("display","block");}if(!$(listElement).hasClass("hidden")){totalItemsHeight+=($(listElement).height()+_headline_pad_y);}else{}});_headline_menu_object.menuHeight=totalItemsHeight+listInnerMargins;_headline_menu_object.menuPosY=(_f_b_height_new+_headline_menu_object.menuHeight)+maskPaddingTop;$_h_b.find(".headlines").attr("data-max-y",_headline_menu_object.menuPosY);if(currentlyHidden==true){$_h.addClass("hidden");}}function _update_headline_containers(){var itemCount=0;if(_is_editor()===true){itemCount=_f_b_data.headlineBlaster.length;}else{itemCount=(_f_b_data.headlineBlaster.length-1);}_set_headline_menu_properties();$_h_b.find(".headlines").css({top:-(_headline_menu_object.menuPosY+1),height:_headline_menu_object.menuHeight});$_h_b.find(".headlines_shadow").css({height:_headline_menu_object.menuHeight});$_h.find(".grad").css({height:(_headline_menu_object.menuHeight)});if(_is_editor()===true){$_h.find(".headlines_menu ul li").removeClass("hidden").css({display:"block"});}else{$_h.find(".headlines_menu ul li").removeClass("hidden");$.each($_h.find(".headlines_menu ul li"),function(key,listItem){if($(listItem).hasClass("displayed")){$(listItem).addClass("hidden");}});}}function _show_headline_blaster(requestedState,previewOption){if(!_follow_bar_exists()){return false;}$_h.stop(true);$_h.find(".headlines_menu, .headlines_shadow").stop(true);_update_headline_containers();var expandedMenuTopY=Number($_h.attr("data-max-y")),defaultH=expandedMenuTopY-(_f_b_height_new),adjustedH=expandedMenuTopY-(_f_b_height_new-13);if(requestedState==true){_enable_follow_bar(false);_headline_blaster_cycle(false);$_h.removeClass("hidden").addClass("shown").css({display:"block",opacity:0});$_h.animate({opacity:1},1);if(_is_editor()===false){$.each($_h.find(".headlines_menu ul li"),function(key,listItem){if($(listItem).hasClass("displayed")){$(listItem).addClass("hidden");}});}else{$.each($_h.find(".headlines_menu ul li"),function(key,listItem){if($(listItem).hasClass("hidden")){$(listItem).removeClass("hidden");}});}$_h.find(".headlines_content").height(defaultH);$_h.find(".toggle-button").show();$_h.find(".headlines_menu, .headlines_shadow").animate({top:10},_trans_speed_fast,"easeOutQuad",function(){$_h_b.find(".featured .toggle-button").addClass("toggle-shadow").css({border:"none"});if($.browser.msie&&parseInt($.browser.version)<8){$_h_b.find(".featured .toggle-button").css({width:"25px"});}$_h.find(".headlines_content").height(adjustedH);if(previewOption==true){$_f_b.find(".headlines ul").css({background:"#fff"}).delay(500).animate({backgroundColor:_preview_highlight},_trans_speed);}else{$_f_b.find(".headlines ul").animate({backgroundColor:"#fff"},_trans_speed);}});if($("#teconsent a").length>0){_update_cookie_tab({destinationY:"250px"});}}else{_enable_follow_bar(true);_headline_blaster_cycle(true);$_h.find(".headlines_content").height(defaultH);$_h_b.find(".featured .toggle-button").removeClass("toggle-shadow");if($.browser.msie&&parseInt($.browser.version)<8){$_h_b.find(".featured .toggle-button").css({width:"31px"});}$_h.find(".toggle-button").hide();$_h.find(".headlines_menu, .headlines_shadow").animate({top:expandedMenuTopY},_trans_speed_fast,"easeOutQuad",function(){$_h_b.find(".featured .toggle-button").addClass("toggle-border");$_h.removeClass("shown").addClass("hidden");});if($("#teconsent a").length>0){_update_cookie_tab({destinationY:"100px"});}}}function _update_cookie_tab(options){$("#teconsent a").animate({bottom:options.destinationY},_trans_speed_fast,"easeOutQuad");}function _update_data(data){if(!_follow_bar_exists()){return false;}if($_i_c){$_i_c.hide_it();}_show_headline_blaster(false);if((typeof data=="object")&&(data.headlineBlaster)){_headline_blaster_cycle(false);$_h_b.find(".featured .content").html(" ");$_h_b.find(".headlines ul").empty();_f_b_data.headlineBlaster=data.headlineBlaster;_prep_headline_blaster(_update_layout);_show_headline_blaster(true,true);}}function _reload_headline_blaster(){if(!_follow_bar_exists()){return false;}_import_data({reload_headline_blaster:true});}function _headline_blaster_cycle(startCycle){if(startCycle==true){if(!$_h_b.hasClass("cycling")){$_h_b.addClass("cycling");clearInterval(_h_b_cycle_int);_h_b_cycle_int=setInterval(function(){_swap_rand_headline_blaster();},_h_b_cycle_dur);}}else{$_h_b.removeClass("cycling");clearInterval(_h_b_cycle_int);}}function _swap_rand_headline_blaster(){var html,$_list=$_h.find(".headlines_menu ul"),listLength=$_list.children().length,currentItem=Number($_list.find("li.displayed").attr("data-id")),nextId=(currentItem<(listLength))?(currentItem+1):1;$_h_b.find(".featured .content").animate({opacity:0},_trans_speed,function(){for(var i=1;i<=listLength;i++){var $_element=$_list.find('li[data-id="'+i+'"]');if(Number($_element.attr("data-id"))==currentItem){$_element.removeClass("displayed");if(_is_editor()===false){$_element.removeClass("hidden").show();}}else{if(Number($_element.attr("data-id"))==nextId){$_element.addClass("displayed");if(_is_editor()===false){$_element.addClass("hidden").hide();}}}}html=$_list.find("li.displayed").html();$_h_b.find(".featured .content").html(html).css({opacity:0});_update_layout();$_h_b.find(".featured .content").animate({opacity:1},_trans_speed_slow,function(){if(_is_editor()===true){$_h.find(".headlines_menu ul li").css({display:"block"});_update_headline_containers();_update_layout();}});});}function _is_editor(){return($("body").hasClass("editOn"))?true:false;}function _toggle_headline_blaster(){if($_h.hasClass("hidden")){_show_headline_blaster(true);}else{if($_i_c){$_i_c.hide_it();}_show_headline_blaster(false);}}function _auto_trunc(string_to_truncate,max_length){var new_string=string_to_truncate,extra_chars,string_no_html;string_no_html=string_to_truncate.replace(/(<([^>]+)>)/ig,"");if(string_no_html.length>=max_length){string_no_html=string_no_html.substr(0,max_length);extra_chars=string_no_html.substr(string_no_html.lastIndexOf(" "));new_string=new_string.substr(0,new_string.lastIndexOf(extra_chars));new_string+="&hellip;";}return new_string;}function _override_json_req_path(new_path){_json_req_path=new_path;}return{init:_init,get_current_mode:_get_current_mode,set_avatar_focus:_set_avatar_focus,reveal:_reveal,show_headline_blaster:_show_headline_blaster,override_json_req_path:_override_json_req_path,update_data:_update_data,setup_key_events:_setup_key_events,remove_entity:_remove_entity,add_entity:_add_entity,get_follow_bar_height:_get_follow_bar_height,reload_headline_blaster:_reload_headline_blaster,is_data_ready:_is_data_ready};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.follow_bar.init);var forbes=(function(app,$){app.info_card=(function($){var _initialized=false,$_i_c,$_container,_min_pad=10,_avatar_img_w=136,_i_c_margin=10,_i_c_height=156,_i_c_dims={width_w_image:456,width_wo_image:310},_i_c_width,_trans_speed=100,_trans_speed_fast=100,_link_max_len=100,_f_b_data,_browser_config,_browser_type,_cdn_path="",_current_entity_array,_current_hover_item,_advoice_badge,_json_req_path="/json/get_info_card",_info_card_requested=false,_mouseenter_delay_time=500,_mouseenter_delay_int,_mouseleave_delay_time=500,_mouseleave_delay_int;function _init(){if(_initialized){return false;}_f_b_data={mode:"",headlineBlaster:[],entityArray:[]};_browser_config=[{infoCardBorder:"solid 1px #dddddd",infoCardOffsetX:4,avatarDupOffsetX:5,avatarDupOffsetY:3},{infoCardBorder:"none",infoCardOffsetX:4,avatarDupOffsetX:4,avatarDupOffsetY:4}];if($.browser.msie){_browser_type=0;}else{_browser_type=1;}var html="";html+='<div class="info_card">';html+='<div class="info_card_shadow"></div>';html+='<div class="info_card_content">';html+='<a href="#" class="avatar_lg"><span></span></a>';html+='<div class="text_content">';html+='<a class="author"></a>';html+=forbes.following.generate_followable_block();html+='<ul class="links_list"></ul>';html+='<div class="more"></div>';html+='<span class="pointer"></span>';html+='<span class="avatar_dup"></span>';html+="</div><!-- .text_content -->";html+="</div><!-- .info_card_content -->";html+="</div><!-- .info_card -->";$("body").append(html);$_i_c=$(".info_card");if(!forbes.follow_bar){_create();}_deleg(".enable_info_card");_initialized=true;}function _get_current_mode(){return(forbes.follow_bar)?forbes.follow_bar.get_current_mode():false;}function _create(a,b){if(a){$_container=a;}if(b){_f_b_data=b;}_style();_setup_events();$("body").on("click",function(){_hide_it();});return forbes.info_card;}function _deleg(selector){$(selector).off("mouseenter").on("mouseenter",function(){_mouse_enter.call($(this));});$(selector).off("mouseleave").on("mouseleave",function(){_mouse_leave();});}function _style(){$_i_c.find(".info_card_content").css({border:_browser_config[_browser_type].infoCardBorder});}function _setup_events(){$_i_c.off("mouseenter").on("mouseenter",function(){clearInterval(_mouseleave_delay_int);_info_card_requested=true;});$_i_c.off("mouseleave").on("mouseleave",function(){clearInterval(_mouseleave_delay_int);_mouseleave_delay_int=setInterval(function(){_hide_it();},_mouseleave_delay_time);});$_i_c.off("click").on("click",function(event){event.stopPropagation();});if($_container){$_container.find(".avatar").off("mouseenter").on("mouseenter",function(){_mouse_enter.call($(this));});$_container.find(".avatar").off("mouseleave").on("mouseleave",function(){_mouse_leave();});$_container.find(".avatar").off("click").on("click",function(event){event.preventDefault();return false;});}$_i_c.find(".avatar_dup").off("click").on("click",function(){return false;});}function _mouse_enter(){var $_link_element,entityId,entityType,linkType;_current_hover_item=this;clearTimeout(_mouseenter_delay_int);_stop_animations();_request_content.call(this);entityId=this.attr("data-entity-id");entityType=this.attr("data-entity-type");linkType=_get_link_type(this);$_link_element=this;if(forbes.follow_bar&&linkType=="follow_bar"){forbes.follow_bar.set_avatar_focus(this);}if(!_info_card_requested){_mouseenter_delay_int=setTimeout(function(){_info_card_requested=true;_display_info_card(entityId,entityType,linkType,$_link_element);if(forbes.follow_bar){forbes.follow_bar.show_headline_blaster(false);}},_mouseenter_delay_time);}else{_display_info_card(entityId,entityType,linkType,$_link_element);}}function _mouse_leave(){clearInterval(_mouseleave_delay_int);clearTimeout(_mouseenter_delay_int);_mouseleave_delay_int=setInterval(function(){_hide_it();},_mouseleave_delay_time);}function _get_link_type(linkElement){var linkType="unknown";if(linkElement.is("div")&&linkElement.hasClass("avatar")){linkType="follow_bar";}else{if(linkElement.is("cite")&&linkElement.hasClass("enable_info_card")){linkType="text_link";}else{if(linkElement.is("a")&&linkElement.hasClass("enable_info_card")&&linkElement.hasClass("box_link")){linkType="box_link";}else{linkType="text_link";}}}return linkType;}function _hide_it(resetBypass){if(resetBypass==null){_current_hover_item=null;}if(forbes.follow_bar){forbes.follow_bar.set_avatar_focus();}_info_card_requested=false;clearInterval(_mouseleave_delay_int);clearInterval(_mouseenter_delay_int);$_i_c.fadeOut(_trans_speed_fast);}function _stop_animations(){$_i_c.stop(true);clearInterval(_mouseleave_delay_int);clearInterval(_mouseenter_delay_int);}function _get_current_entity_array(){_current_entity_array=[];$.each(_f_b_data.entityArray,function(k,v){if(v.entity_state===_get_current_mode()){_current_entity_array.push(v);}});return _current_entity_array;}function _throw_error(options){_empty_info_card();_hide_it();if(options.message){forbes.util.debug(options.message);}}function _request_content(){clearTimeout(_mouseenter_delay_int);var json_path=_json_req_path,entity_id=this.attr("data-entity-id"),entity_type=this.attr("data-entity-type"),link_type,entity_data={},data_object=null,$_link_element=this,entity_found=false;link_type=_get_link_type(this);entity_data={id:entity_id,type:entity_type};$.each(_f_b_data.entityArray,function(k,v){if((v.id==entity_data.id)&&(v.type==entity_data.type)){data_object=v;entity_found=true;}});if(entity_found==false){data_object={};_hide_it("resetBypass");}if(data_object.links_list==undefined){$.ajax({type:"get",url:json_path,data:entity_data,dataType:"json",cache:true,timeout:10*1000,error:function(e,textStatus,errorThrown){_throw_error({message:"error loading: "+json_path});},success:function(data){if(data==null||data=="null"||typeof data=="undefined"||typeof data.id=="undefined"){_throw_error({message:"data error loading: "+json_path});return false;}data_object.id=data.id;data_object.type=data.type;data_object.links_list=[];data_object.name=data.name;data_object.url=data.url;data_object.desc=data.desc;data_object.activity=Number(data.activity);data_object.user_is_following=data.userIsFollowing;data_object.advoice_brand=data.advoiceBrand;data_object.number_of_followers=Number(data.numberOfFollowers);data_object.adVoice=data.adVoice;data_object.links_list_type="";if(entity_found==false){data_object.links_list_type="other";}var list_object;if(data.stories&&data.stories.length>0){list_object=data.stories;data_object.links_list_type="stories";}else{if(data.lists&&data.lists.length>0){list_object=data.lists;data_object.links_list_type="lists";}}if(list_object!=undefined){$.each(list_object,function(k,v){var rank_value=(v.rank)?v.rank:"-";data_object.links_list.push({rank:rank_value,title:v.title,url:v.url,type:v.type,advoiceBrand:v.advoiceBrand,justPublished:(v.justPublished)?v.justPublished:""});});}data_object.avatar_lg=(data.avatarLarge)?_cdn_path+data.avatarLarge:"";if(entity_found==false){_f_b_data.entityArray.push(data_object);}if(_info_card_requested==true&&_current_hover_item&&_current_hover_item.attr("data-entity-id")){if((data_object.id==_current_hover_item.attr("data-entity-id"))&&(data_object.type==_current_hover_item.attr("data-entity-type"))){_display_info_card(entity_id,entity_type,link_type,$_link_element);}}}});}}function _empty_info_card(){$_i_c.stop(true);$_i_c.find(".advoice_badge").remove();$_i_c.find(".author").html(" ");$_i_c.find(".author").attr("href","#");$_i_c.find(".desc").remove();$_i_c.find(".avatar_lg").attr("href","#");$_i_c.find(".avatar_lg span").css("background","transparent");$_i_c.find(".links_list").empty();$_i_c.find(".followable_block").hide();$_i_c.find(".more").empty();$_i_c.find(".avatar_dup").empty();return true;}function _display_info_card(entityId,entityType,linkType,linkElement){var linkObjects,dataObject,avatarImgLarge,infoCardX,infoCardY,infoCardZ,duplicateX,duplicateY,duplicateHtml,infoCardOrientation="down",pOffsetX=0,minX,maxX,remainCardW=_i_c_dims.width_wo_image,emptied=_empty_info_card();dataObject=_get_info_card_obj(entityId,entityType);if(!dataObject){return false;}linkObjects=dataObject.links_list;if(!linkObjects){return false;}if(dataObject.avatar_lg&&(dataObject.avatar_lg.length>1)){avatarImgLarge=dataObject.avatar_lg;$_i_c.find(".avatar_lg").css({display:"block"});$_i_c.find(".avatar_lg span").css({background:"none"});$_i_c.removeClass("info_card_without_image").addClass("info_card_with_image");$_i_c.find(".avatar_lg span").css({background:"url("+avatarImgLarge+") 0 0 no-repeat"});_i_c_width=_i_c_dims.width_w_image+20;}else{$_i_c.removeClass("info_card_with_image").addClass("info_card_without_image");$_i_c.find(".avatar_lg").css({display:"none"});_i_c_width=_i_c_dims.width_wo_image+20;}if(linkType=="follow_bar"){infoCardX=(linkElement.position().left)-_browser_config[_browser_type].infoCardOffsetX;infoCardY=forbes.follow_bar.get_follow_bar_height();infoCardY-=($.browser.msie)?1:3;}else{if(linkType=="text_link"){infoCardX=linkElement.offset().left-10;infoCardY=linkElement.offset().top-(_i_c_height+15);}else{if(linkType=="box_link"){infoCardX=linkElement.offset().left+10;infoCardY=linkElement.offset().top-(_i_c_height+5);}}}if(dataObject.avatar_lg&&(dataObject.avatar_lg.length>1)){infoCardX-=(_avatar_img_w+(_i_c_margin));}minX=_min_pad;if(infoCardX<minX){infoCardX=_min_pad;}if((linkType=="text_link")||(linkType=="box_link")){maxX=($(window).width()-remainCardW);if(linkType=="box_link"){maxX-=29;}if(linkElement.offset().left>maxX){infoCardX=($(window).width()-_i_c_width)-_min_pad;pOffsetX=($(window).width()-linkElement.offset().left)-40;if(linkType=="box_link"){pOffsetX-=19;}$_i_c.find(".pointer").css({right:pOffsetX,left:"auto"});}else{$_i_c.find(".pointer").css({right:"auto"});}}if((linkType=="text_link")||(linkType=="box_link")){if((infoCardY-$(document).scrollTop())<_min_pad){infoCardY=((linkElement.offset().top+linkElement.height())+15);infoCardOrientation="up";}}if(linkType=="follow_bar"){$_i_c.css({position:"fixed",top:"auto",bottom:infoCardY,left:infoCardX});$_i_c.removeClass("info_card_float").addClass("info_card_fixed");}else{if((linkType=="text_link")||(linkType=="box_link")){$_i_c.css({position:"absolute",top:infoCardY,bottom:"auto",left:infoCardX});$_i_c.removeClass("info_card_fixed").addClass("info_card_float");if(infoCardOrientation=="down"){$_i_c.find(".pointer").removeClass("pointer_up").addClass("pointer_down");}else{$_i_c.find(".pointer").removeClass("pointer_down").addClass("pointer_up");}}}if(linkType=="follow_bar"){infoCardZ=(Number($_i_c.find(".info_card_content").css("z-index"))+1);duplicateX=(linkElement.position().left-infoCardX)-_browser_config[_browser_type].avatarDupOffsetX;duplicateY=_i_c_height-_browser_config[_browser_type].avatarDupOffsetY;duplicateHtml=linkElement.find(".avatar_wrapper").clone();$_i_c.find(".avatar_dup").show();$_i_c.find(".avatar_dup").html(duplicateHtml).css({left:duplicateX,top:duplicateY,zIndex:infoCardZ});}else{if((linkType=="text_link")||(linkType=="box_link")){$_i_c.find(".avatar_dup").hide();duplicateX=0;duplicateY=0;}}if(dataObject.advoice_brand!=null){_advoice_badge='<span class="advoice"><span class="brandvoice">'+dataObject.advoice_brand+"</span>Voice</span>";}if((dataObject.adVoice==true)&&(dataObject.type!="author")){$_i_c.find(".author").html("");}else{$_i_c.find(".author").html(dataObject.name);$_i_c.find(".author").attr("href",dataObject.url);}if(dataObject.url){$_i_c.find(".author").attr("href",dataObject.url);$_i_c.find(".avatar_lg").attr("href",dataObject.url);}if(dataObject.desc){var descHtml="";descHtml+='<span class="desc">';if(dataObject.adVoice){if(dataObject.type=="author"){descHtml+="&nbsp;@";descHtml+=dataObject.advoice_brand;}else{if(dataObject.desc!=null){descHtml+=", ";descHtml+=dataObject.desc;}}}else{if(dataObject.desc!=null){descHtml+=", ";descHtml+=dataObject.desc;}else{descHtml+=dataObject.desc;}}descHtml+="</span>";$_i_c.find(".author").after(descHtml);}if(_get_current_mode()=="following"){$_i_c.find(".followable_block").removeClass("not_following").addClass("is_following");$_i_c.find(".followable_block .label").html("Following");}else{$_i_c.find(".followable_block").removeClass("is_following").addClass("not_following");$_i_c.find(".followable_block .label").html("Follow");}var entityFollowCount=forbes.util.number_format(dataObject.number_of_followers),entityFollowCountHtml="";if((entityFollowCount!=null)&&(entityFollowCount!="null")&&(entityFollowCount>0)){entityFollowCountHtml="("+entityFollowCount+")";}else{entityFollowCountHtml="";}$_i_c.find(".followable_block .follow_count").html(entityFollowCountHtml);for(var i=0;i<linkObjects.length;i++){var linkObject=linkObjects[i],prependHtml="",html="";if(linkObject&&i<2){if(linkObject.rank!="-"){prependHtml+='<span class="rank">&#35;'+linkObject.rank+"</span> ";prependHtml+=linkObject.title;}else{if(((linkObject.type=="advoice")&&(dataObject.adVoice!=true))||((dataObject.type=="author")&&(linkObject.type=="advoice"))){if(linkObject.advoiceBrand!=null){prependHtml+='<span class="advoice_small"><span class="brandvoice">'+linkObject.advoiceBrand+"</span>Voice: </span> ";}}else{if(linkObject.justPublished===true){prependHtml+='<span class="just_published">New Post:</span> ';}}prependHtml+=linkObject.title;}html+="<li>";html+='<a href="'+linkObject.url+'">';html+=_auto_trunc(prependHtml,_link_max_len);html+="</a>";html+="</li>";$_i_c.find("ul.links_list").append(html);}}if(dataObject.activity>dataObject.links_list.length){var moreCount=(dataObject.activity-dataObject.links_list.length);var moreLink='<a href="'+dataObject.url+'">&#43;'+moreCount+" more this week</a>";if(dataObject.links_list_type=="stories"){$_i_c.find(".more").html(moreLink);}}if((dataObject.adVoice===true)&&(dataObject.type!="author")){$_i_c.find(".author").prepend(_advoice_badge);}if($_i_c.css("display")=="block"){$_i_c.css({display:"block",opacity:1});}else{$_i_c.css({display:"block",opacity:0});$_i_c.animate({opacity:1},_trans_speed);}forbes.following.populate_followable_block({"$target":$_i_c.find(".followable_block"),target_type:dataObject.type,target_id:dataObject.id,object_json:JSON.stringify({title:dataObject.name,avatar_src:dataObject.avatar_lg,follow_count:dataObject.number_of_followers}),tracking_link_name:((dataObject.user_is_following)?"followBar_Unfollow":"followBar_Follow"),user_is_following:dataObject.user_is_following,follow_count:Number(dataObject.number_of_followers)});$_i_c.find(".followable_block").show();forbes.following.init_followable_blocks({"$parent_scope":$_i_c});forbes.interstitial_ad.init_exit_triggers({scope:".info_card"});}function _get_info_card_obj(entityId,entityType){var dataObject={};$.each(_f_b_data.entityArray,function(k,v){if(v.id==entityId&&v.type==entityType){dataObject=v;}});if(dataObject.id){return dataObject;}else{return false;}}function _update_data(dataObject){var entityFound=false;for(var i=0;i<_f_b_data.entityArray.length;i++){var thisObject=_f_b_data.entityArray[i];if((thisObject.id===dataObject.id)&&(thisObject.type===dataObject.type)){_f_b_data.entityArray[i].user_is_following=dataObject.user_is_following;entityFound=true;}}if(entityFound===false){_f_b_data.entityArray.splice(0,0,dataObject);}}function _auto_trunc(string_to_truncate,max_length){var new_string=string_to_truncate,last_word,string_no_html;string_no_html=string_to_truncate.replace(/(<([^>]+)>)/ig,"");if(string_no_html.length>=max_length){string_no_html=string_no_html.substr(0,max_length);string_no_html=string_no_html.substr(0,string_no_html.lastIndexOf(" "));last_word=string_no_html.substr(string_no_html.lastIndexOf(" "));new_string=new_string.substr(0,new_string.lastIndexOf(last_word));new_string+="&hellip;";}return new_string;}function _override_json_req_path(new_path){_json_req_path=new_path;}return{init:_init,setup_events:_setup_events,create:_create,stop_animations:_stop_animations,hide_it:_hide_it,deleg:_deleg,override_json_req_path:_override_json_req_path,update_data:_update_data,mouse_leave:_mouse_leave,setup_events:_setup_events};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.info_card.init);var forbes=(function(app,$){app.find_more_to_follow=(function($){var _name="",_cdn_path="",_page=null,_mode="standalone",_categories=[],_index_url=null,_default_search_text=null,$container=null,_current_category=null;function _init(){_index_url=_cdn_path+"/find-more/writers";_page=forbes.ajax_content_with_nav;_init_fmtf_launchers();$container=$(".non_modal_wrapper");if($container.length>0){_current_category=$container.find(".main").attr("data-id");_init_content();_init_ad();}_intercept_form();}function _init_fmtf_launchers(){$("a.ajaxify.launch_find_more_to_follow").unbind("click").bind("click",function(){_launch();return false;});}function _launch(){_mode="modal";forbes.modal_window.load({url:_index_url,on_cancel:function(){_controller({action:"cancel"});},on_complete:function($load_target){$container=$("#forbes_modal_window");_current_category=$container.find(".main").attr("data-id");$container.find(".following_discovery .done a.fancy_button").unbind("click").bind("click",function(){_controller({action:"cancel"});return false;});_init_content();_intercept_form();_init_ad();}});}function _init_ad(){if(forbes.ad_manager){forbes.ad_manager.display([{id:"sociallogo",sizes:[[120,40]]}]);}else{return false;}}function _controller(options){if(typeof options.action!="undefined"&&options.action=="cancel"){forbes.modal_window.destroy();return false;}_current_category=options.id;$container.find(".main").attr("data-id",options.id);_page.load({url:options.url,load_target:$container.find(".main"),params:options.params},_init_content);}function _set_nav_highlight(){$('nav.categories a[data-id="'+_current_category+'"]').parent().addClass("active");}function _select_nav_item(anchorLink){var $this=null,standaloneUrl=null,selectedKey=null,thisId=null,$loadingSpinner;if(anchorLink){$this=anchorLink;standaloneUrl=$this.attr("href");thisId=$this.attr("data-id");}else{for(var i=0;i<_categories.length;i++){var categoryObject=_categories[i],$anchorLink=$('nav.categories li a[data-id="'+categoryObject.id+'"]');$anchorLink.parent().removeClass("active");}return false;}$loadingSpinner=$(".modal_screen").find(".loading_spinner");if(($loadingSpinner.length==0)||($loadingSpinner.css("display")=="none")){for(var i=0;i<_categories.length;i++){var categoryObject=_categories[i],$anchorLink=$('nav.categories li a[data-id="'+categoryObject.id+'"]');_categories[i].url=$anchorLink.attr("href");if(categoryObject.id==thisId){selectedKey=i;$anchorLink.parent().addClass("active");}else{$anchorLink.parent().removeClass("active");}}if(selectedKey!=null&&_mode==="modal"){_current_category=_categories[selectedKey].id;_controller({url:_categories[selectedKey].url,id:_current_category});}else{_current_category=_categories[selectedKey].id;_controller({url:standaloneUrl,id:_current_category});}}}function _init_jquery_helpers(){$.fn.capture_fmtf_links=function(){var $this=$(this);$this.find("a.ajaxify.find_more_to_follow").unbind("click").bind("click",function(event){event.preventDefault();var $this=$(this),url=$this.attr("href"),title=$this.attr("title")||null;_controller({url:url});return false;});return $this;};}function _intercept_form(){$("#find_more_to_follow_search").attr("onSubmit","return false;");_default_search_text=$('#find_more_to_follow_search input[name="query"]').val();$('#find_more_to_follow_search input[name="query"]').on("click",function(e){$(this).val("");$(this).addClass("edited");});$('#find_more_to_follow_search input[name="query"]').on("blur",function(){if($(this).val().length==0){$(this).val(_default_search_text);$(this).removeClass("edited");}});$("#find_more_to_follow_search").on("submit",function(e){var submitUrl=$(this).attr("action"),searchInput=$('#find_more_to_follow_search input[name="query"]').val();if(searchInput!=""){_current_category="search_results";_controller({url:submitUrl,id:_current_category,params:$(this).serialize()});_select_nav_item();}e.preventDefault();return false;});}function _init_content(){$.each($container.find("nav.categories li"),function(listIndex,listElement){var categoryItem={id:$(listElement).find("a").attr("data-id"),label:$(listElement).find("a").text()};_categories.push(categoryItem);});forbes.pagination_controls.init($container);$container.find(".main").animate({scrollTop:0},250,"easeInOutQuad");$container.find(".main .pagination a").on("click",function(){if($(this).attr("href")){_controller({url:$(this).attr("href"),id:_current_category});}return false;});$.each($container.find(".main li.row"),function(){var $this=$(this),$thisToggle=$this.find(".show_more_less");$thisToggle.off("click").on("click",function(){var positionY=($this.position().top);if($this.hasClass("expanded")){$this.removeClass("expanded");$this.find(".more").slideUp("fast",function(){});$this.find(".show_more_less").html("show more");}else{$this.addClass("expanded");$this.find(".more").slideDown(300);$container.find(".main").animate({scrollTop:positionY},{duration:300,queue:false});$this.find(".show_more_less").html("show less");}});});$.each($('.main[data-id="forbes_topics"] li.row'),function(){var $this=$(this),$thisToggle=$this.find("a.toggle");$thisToggle.off("click").on("click",function(){var positionY=($this.position().top);if($this.hasClass("expanded")){$this.removeClass("expanded");$this.children(".sub_topics").slideUp("fast");}else{$this.addClass("expanded");$this.children(".sub_topics").slideDown("fast");$container.find(".main").animate({scrollTop:positionY},500,"easeInOutQuad");}return false;});});$('.main[data-id="forbes_topics"] .sub_topics ul li a').on("click",function(){return false;});$("nav.categories a.ajaxify").unbind("click").bind("click",function(event){_select_nav_item($(this));return false;});$('.main[data-id="search_results"] .suggestion a').on("click",function(){_controller({url:$(this).attr("href")});return false;});forbes.following.init_followable_blocks({"$parent_scope":$(".main-content")});if($(".modal_screen .advoice_desc").length>0){forbes.advoice_specific.init();}_set_nav_highlight();}return{init:_init,launch:_launch};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.find_more_to_follow.init);var forbes=(function(app,$){app.ajax_content_with_nav=(function($){var _cdn_path=imagesBaseCdn,_initialized=false,_load_target=null,_loading_spinner=null;_container=null;function _init(){if(_initialized){return false;}_initialized=true;}function _load(options,callback){_load_target=options.load_target;if(_load_target.parent().find(".loading_spinner").length==0){_load_target.parent().append('<div class="loading_spinner"><div class="background"></div><div class="icon"></div></div>');}_loading_spinner=_load_target.parent().find(".loading_spinner");_loading_spinner.css({top:_load_target.position().top,left:_load_target.position().left});_loading_spinner.show();_loading_spinner.stop();_loading_spinner.css("opacity",0);_loading_spinner.animate({opacity:1},300);$.get(options.url,(typeof options.params!="undefined")?options.params:{},function(raw_data){var data="";if(typeof raw_data=="object"){if(raw_data.success=="form found"){data=raw_data.form;}}else{if(typeof raw_data=="string"){data=raw_data;}}_loading_spinner.stop().hide();var html=forbes.util.parse_ajax_content(data,"ajax_content_category");if(!$.browser.msie){_load_target.css("opacity",1);}_load_target.html(html);if(typeof options.parse_rules!="undefined"){_load_target.parse_rules(options.parse_rules);}if(typeof options.on_complete!="undefined"){options.on_complete(options.load_target);}if(callback){callback();}});}return{init:_init,load:_load};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.ajax_content_with_nav.init);/*!
 * jQuery JSON Plugin
 * version: 2.1 (2009-08-14)
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Brantley Harris wrote this plugin. It is based somewhat on the JSON.org 
 * website's http://www.json.org/json2.js, which proclaims:
 * "NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.", a sentiment that
 * I uphold.
 *
 * It is also influenced heavily by MochiKit's serializeJSON, which is 
 * copyrighted 2005 by Bob Ippolito.
 */
(function($){$.toJSON=function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o);}var type=typeof(o);if(o===null){return"null";}if(type=="undefined"){return undefined;}if(type=="number"||type=="boolean"){return o+"";}if(type=="string"){return $.quoteString(o);}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON());}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month;}var day=o.getUTCDate();if(day<10){day="0"+day;}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours;}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes;}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds;}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli;}if(milli<10){milli="0"+milli;}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"';}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null");}return"["+ret.join(",")+"]";}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number"){name='"'+k+'"';}else{if(type=="string"){name=$.quoteString(k);}else{continue;}}if(typeof o[k]=="function"){continue;}var val=$.toJSON(o[k]);pairs.push(name+":"+val);}return"{"+pairs.join(", ")+"}";}};$.evalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src);}return eval("("+src+")");};$.secureEvalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src);}var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")");}else{throw new SyntaxError("Error parsing JSON, source is not valid.");}};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c;}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}return'"'+string+'"';};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};})(jQuery);var forbes=(function(app,$){app.advoice_specific=(function($){var _animation_duration=200;function _init(){_init_advoice_header();}function _init_advoice_header(){var $advoice=$(".advoice_desc");if($advoice.length<1){return false;}$advoice.find(".description a, .advoic_close_btn").unbind("click").bind("click",function(){var $this=$(this).parents(".advoice_desc"),$expansion=$this.find(".description_expanded");if(!$this.hasClass("expanded")){if(typeof $expansion.attr("data-orig-height")=="undefined"){$expansion.show();$expansion.attr("data-orig-height",$expansion.height());$expansion.attr("data-orig-margin-top",$expansion.css("margin-top"));$expansion.attr("data-orig-margin-bottom",$expansion.css("margin-bottom"));}var new_height=parseInt($expansion.attr("data-orig-height")),new_margin_top=parseInt($expansion.attr("data-orig-margin-top")),new_margin_bottom=parseInt($expansion.attr("data-orig-margin-bottom"));if(!$.browser.msie&&$.browser.version<9){$expansion.find(".arrow, .advoic_close_btn").stop().css("opacity",0);}if(Modernizr.touch){$expansion.show().stop().css({height:new_height,"margin-top":new_margin_top+"px","margin-bottom":new_margin_bottom+"px"});$expansion.find(".arrow, .advoic_close_btn").stop().css({opacity:1});}else{$expansion.show().stop().css({height:"1px"}).animate({height:new_height,"margin-top":new_margin_top+"px","margin-bottom":new_margin_bottom+"px"},{duration:_animation_duration,easing:"easeOutCubic",complete:function(){if(!$.browser.msie&&$.browser.version<9){$expansion.find(".arrow, .advoic_close_btn").stop().animate({opacity:1},{duration:_animation_duration,easing:"easeInOutQuad"});}}});}$this.addClass("expanded");}else{if(!$.browser.msie&&$.browser.version<9){$expansion.find(".arrow, .advoic_close_btn").stop().css("opacity",0);}if(Modernizr.touch){$expansion.stop().hide();}else{$expansion.stop().animate({height:"0px","margin-top":0,"margin-bottom":0},{duration:_animation_duration,easing:"easeOutCubic",complete:function(){$(this).hide();}});}$this.removeClass("expanded");}return false;});}return{init:_init};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.advoice_specific.init);var forbes=(function(app,$){app.pagination_controls=(function($){function _init($target){forbes.util.debug("running forbes.pagination_controls.init");if($target.find("nav.pagination ul").length>0){var containerWidth=$target.find("nav.pagination ul").width(),buttonCount=$target.find("nav.pagination li").size(),buttonWidth=Math.floor(containerWidth/buttonCount),buttonsWidth=(buttonWidth*buttonCount),remainderWidth=(containerWidth%buttonCount);$target.find("nav.pagination li").width(buttonWidth);if(remainderWidth>0){$target.find("nav.pagination ul li:last-child").width(buttonWidth+remainderWidth);}}}return{init:_init};}($));return app;}(forbes||{},jQuery));var forbes=(function(app,$){app.typeahead=(function($){var _typeahead_objects=[],_minimum_string_length=2,_in_focus=false,_query_cache_limit=500,_datasource_size_limit=1000,_max_num_of_visible_results=12;function _init(options){var $input=$(options.$input);if($input.length<1){return false;}if($input.hasClass("typeahead_initialized")){return false;}_typeahead_objects.push(options);_activate(_typeahead_objects.length-1);$input.addClass("typeahead_initialized");$(window).resize(_on_window_resize);}function _activate(object_id){var typeahead_obj=_typeahead_objects[object_id],$input=$(typeahead_obj.$input);typeahead_obj.use_prefetch=(typeahead_obj.url_prefetch)?true:false;typeahead_obj.prefetch_loaded=false;typeahead_obj.datasource=[];typeahead_obj.query_cache=[];typeahead_obj.shown=false;typeahead_obj.$anchor=$input.parents(".typeahead_anchor");typeahead_obj.$results=typeahead_obj.$anchor.find(".typeahead_results_holder");$input.on("blur.typeahead",$.proxy(_on_blur,typeahead_obj)).on("focus.typeahead",$.proxy(_on_focus,typeahead_obj)).on("keydown.typeahead",$.proxy(_on_keydown,typeahead_obj)).on("keyup.typeahead",$.proxy(_on_keyup,typeahead_obj));}function _on_blur(){var that=this,$active_items=this.$results.find("li").filter(".hovering");this._in_focus=false;if($active_items.length<1){setTimeout(function(){_hide_results(that);},150);}}function _on_focus(){this._in_focus=true;if(this.use_prefetch&&!this.prefetch_loaded){_load_prefetch(this);}}function _on_keydown(e){if(!this.shown){return;}switch(e.keyCode){case 9:case 27:e.preventDefault();break;case 13:_keydown_active_state(this);e.preventDefault();break;case 38:if(e.type!="keydown"){break;}e.preventDefault();_prev(this);break;case 40:if(e.type!="keydown"){break;}e.preventDefault();_next(this);break;}e.stopPropagation();}function _on_keyup(e){switch(e.keyCode){case 40:case 38:break;case 13:if(!this.shown){return;}_keyup_active_state(this);_select(this);break;case 27:if(!this.shown){return;}_hide_results(this);break;default:_lookup(this);}e.stopPropagation();e.preventDefault();}function _on_results_mouseenter(e){var $this=$(this);$this.parents("ul").find("li").removeClass("active");$this.addClass("active hovering");}function _on_results_mouseleave(e){var $this=$(this),that=this;if(!this._in_focus){setTimeout(function(){_hide_results(that);},150);}$this.removeClass("hovering");}function _next(typeahead_obj){if(!typeahead_obj.shown||typeahead_obj.$results.find("li.result").length<1){return false;}var $items=typeahead_obj.$results.find("li"),$current=$items.filter(".active"),$next=$items.first();if($current.length>0&&!$current.hasClass("full_results_link")){$next=$current.next();if($next.hasClass("hidden_result")){$next=typeahead_obj.$results.find("li.full_results_link");}}$current.removeClass("active");$next.addClass("active");}function _prev(typeahead_obj){if(!typeahead_obj.shown||typeahead_obj.$results.find("li.result").length<1){return false;}var $items=typeahead_obj.$results.find("li"),$current=$items.filter(".active"),$prev=typeahead_obj.$results.find("li.full_results_link");if($current.length>0&&$current.index()!==0){$prev=$current.prev();if($prev.hasClass("hidden_result")){$prev=typeahead_obj.$results.find("li.result").not(".hidden_result").last();}}$current.removeClass("active");$prev.addClass("active");}function _on_window_resize(){if(_typeahead_objects.length<1){return false;}for(var i=0;i<_typeahead_objects.length;i++){if(_typeahead_objects[i].shown){_position_and_resize_results(_typeahead_objects[i]);}}}function _keydown_active_state(typeahead_obj){var $active=typeahead_obj.$results.find("li.active");if($active.length<1){return false;}$active.addClass("keydown");}function _keyup_active_state(typeahead_obj){var $active=typeahead_obj.$results.find("li.active");if($active.length<1){return false;}$active.removeClass("keydown");}function _lookup(typeahead_obj){var term=typeahead_obj.$input.val(),results;term=term.replace("<script","");if(term.length<_minimum_string_length){_hide_results(typeahead_obj);return false;}if(!_is_in_cache(term,typeahead_obj)){forbes.util.debug("_lookup: need to load term");_load_term(term,typeahead_obj);}results=_get_matches(term,typeahead_obj);if(!results){_hide_results(typeahead_obj);return false;}typeahead_obj.shown=true;_render_results(term,results,typeahead_obj);}function _render_results(term,results,typeahead_obj){if(!typeahead_obj.shown){return false;}var $results_list=typeahead_obj.$results.find("ul");var html="";for(var i=0;i<results.length;i++){if(i>_max_num_of_visible_results){break;}html+=_render_result_item_html(term,results[i]);}html+=_render_fullresults_html(term);$results_list.html(html);$results_list.find("li").off("mouseenter.typeahead");if(results.length>0){$results_list.find("li").on("mouseenter.typeahead",_on_results_mouseenter);$results_list.find("li").on("mouseleave.typeahead",_on_results_mouseleave);}typeahead_obj.$anchor.addClass("show_typeahead_results");_position_and_resize_results(typeahead_obj);}function _position_and_resize_results(typeahead_obj){if(!typeahead_obj.shown){return false;}typeahead_obj.$results.width(typeahead_obj.$anchor.width()).css({top:typeahead_obj.$anchor.height()-9,left:typeahead_obj.$anchor.position().left});var $items=typeahead_obj.$results.find("li"),available_height=_get_available_screen_height();available_height-=30;$items.removeClass("hidden_result");if(typeahead_obj.$results.height()<available_height){forbes.util.debug("Results fit. No limiting required");return false;}var $full_results_link=typeahead_obj.$results.find("li.full_results_link"),full_results_link_height=$full_results_link.height();$items.each(function(){var $this=$(this),new_y_endpoint=$this.position().top+$this.height()+full_results_link_height;if(new_y_endpoint>available_height&&!$this.hasClass("full_results_link")){$this.addClass("hidden_result");}else{$this.removeClass("hidden_result");}});}function _get_available_screen_height(){var $follow_bar=$("div#follow_bar"),follow_bar_height=(($follow_bar.length>0)?$follow_bar.height():0),$header=$("header.global"),header_mode=forbes.header.get_mode(),header_pos_top=$header.position().top,header_height=$header.height(),window_scroll_top=$(window).scrollTop(),header_position_offset=(header_mode=="fixed")?0:($header.offset().top-window_scroll_top),available_height=$(window).height();available_height-=(follow_bar_height+header_height);if(header_mode=="relative"){available_height-=header_position_offset;}return available_height;}function _hide_results(typeahead_obj){if(typeof typeahead_obj=="undefined"||typeof typeahead_obj.$anchor=="undefined"){return false;}typeahead_obj.shown=false;typeahead_obj.$anchor.removeClass("show_typeahead_results");}function _hide_all(){for(var i=0;i<_typeahead_objects.length;i++){if(_typeahead_objects[i].shown){_hide_results(_typeahead_objects[i]);}}}function _select(typeahead_obj){var $active=typeahead_obj.$results.find("li.active"),$loading_msg=typeahead_obj.$anchor.find(".loading_msg");_hide_results(typeahead_obj);typeahead_obj.$anchor.addClass("typeahead_loading");if($active.length>0&&!$active.hasClass("full_results_link")){$loading_msg.html("Loading &#8220;"+$active.find("a span.label").text().replace("<script","")+"&#8221;");window.location=$active.find("a").attr("href");}else{$loading_msg.html("Loading &#8220;"+typeahead_obj.$input.val().replace("<script","")+"&#8221;");typeahead_obj.$input.parents("form").submit();}}function _load_prefetch(typeahead_obj){var typeahead=typeahead_obj;$.ajax({type:"get",url:typeahead.url_prefetch,data:{},dataType:"json",timeout:10*1000,error:function(e,textStatus,errorThrown){forbes.util.debug("error loading: "+typeahead.url_prefetch);forbes.util.debug("error textStatus: "+textStatus);forbes.util.debug("error errorThrown: "+errorThrown);typeahead.use_prefetch=false;},success:function(data){_populate_datasource(data,typeahead);typeahead.prefetch_loaded=true;}});}function _load_term(term,typeahead_obj){var typeahead=typeahead_obj;_cache_save(term,typeahead);$.ajax({type:"get",url:typeahead.url_search,data:{term:term},dataType:"json",timeout:10*1000,error:function(e,textStatus,errorThrown){forbes.util.debug("error loading: "+typeahead.url_search);forbes.util.debug("error textStatus: "+textStatus);forbes.util.debug("error errorThrown: "+errorThrown);},success:function(data){if(typeof data!="object"){return false;}if(data.length<1){return false;}_populate_datasource(data,typeahead);}});}function _is_in_cache(term,typeahead_obj){if(typeahead_obj.query_cache.length<1){return false;}for(var i=typeahead_obj.query_cache.length-1;i>=0;i--){if(typeahead_obj.query_cache[i]==term){return true;}}return false;}function _cache_save(term,typeahead_obj){forbes.util.debug("_cache_save: "+term);typeahead_obj.query_cache.push(term);if(typeahead_obj.query_cache.length>_query_cache_limit){typeahead_obj.query_cache.shift();}}function _populate_datasource(data,typeahead_obj){for(var i=data.length-1;i>=0;i--){if(typeahead_obj.datasource.length>_datasource_size_limit){forbes.util.debug("_populate_datasource: went over limit of "+_datasource_size_limit);return false;}var found_existing_match_in_datasource=false;if(typeahead_obj.datasource.length>0){for(var n=typeahead_obj.datasource.length-1;n>=0;n--){if(data[i].label==typeahead_obj.datasource[n].label&&data[i].type==typeahead_obj.datasource[n].type){found_existing_match_in_datasource=true;break;}}}if(!found_existing_match_in_datasource){typeahead_obj.datasource.push(data[i]);}}_on_datasource_updated(typeahead_obj);}function _on_datasource_updated(typeahead_obj){_lookup(typeahead_obj);}function _get_matches(term,typeahead_obj){if(typeahead_obj.datasource.length<1){return false;}var matches=$.grep(typeahead_obj.datasource,function(item,indexInArray){if(typeof item.label=="undefined"){return false;}if(item.label.toLowerCase().indexOf(term.toLowerCase())!=-1){return true;}return false;});return _sort_matches(term,matches);}function _sort_matches(term,matches){var new_matches=[];for(var i=0;i<matches.length;i++){var this_length=matches[i].label.length-term.length,number_of_shorter_matches=0;for(var n=0;n<matches.length;n++){var that_length=matches[n].label.length-term.length;if(that_length<this_length){number_of_shorter_matches++;}}while(typeof new_matches[number_of_shorter_matches]!="undefined"){number_of_shorter_matches++;}new_matches[number_of_shorter_matches]=matches[i];}return new_matches;}function _render_result_item_html(term,item){if(typeof item=="undefined"){forbes.util.debug("_render_result_item_html failure:");forbes.util.debug(item);return false;}var html="",desc_html="",highlighted_label=forbes.util.highlighter(term,item.label,"typeahead_highlight");html+='<li class="result">';html+='<a href="'+item.url+'">';html+='<span class="entity_img">';html+='<span class="img" style="background-image:url('+item.icon+')"></span>';html+='<span class="loading_spinner"><img src="'+imagesBaseCdn+'/assets/img/loading_spinners/16px_grey.gif" height="16" width="16" alt=""></span>';html+="</span>";if(item.type!="author"&&item.advoiceBrand!=null){label_html='<span class="label"><span class="typeahead_highlight"><span class="advoice"><span class="brandvoice">'+item.advoiceBrand+"</span>Voice</span></span></span>";}else{label_html='<span class="label">'+highlighted_label+"</span>";}html+=label_html;if(typeof item.desc!=="undefined"&&item.desc!==""&&item.desc!=="null"&&item.desc!==null){if(item.desc.toLowerCase()=="advoice"){if(item.type=="author"){if(item.advoiceBrand!=null){desc_html='<span class="desc advoice"><span class="brandvoice">'+item.advoiceBrand+"</span>Voice</span>";}else{if(item.advoiceBrand==null){desc_html='<span class="desc advoice"><span class="brandvoice"></span>BrandVoice</span>';}}}else{desc_html='<span class="desc">'+item.tagName+"</span>";}}else{desc_html='<span class="desc">'+item.desc+"</span>";}html+=desc_html;}html+="</a>";html+="</li>";return html;}function _render_fullresults_html(term){var html="";html+='<li class="full_results_link">';html+='<a href="'+_gen_search_link(term)+'" class="link">See all results<span class="collapsable"> for &#8220;<span class="term">'+term+"</span>&#8221;</span> »</span>";html+="</li>";return html;}function _gen_search_link(term){return"/search/?q="+encodeURIComponent(term);}return{init:_init,hide_all:_hide_all};}($));return app;}(forbes||{},jQuery));var forbes=(function(app,$){app.gigya_share=(function($){var debug=forbes.util.debug,_polling_interval=250,_max_polling_time=3000,_polling_time=0;var _last_known_short_link=false,_last_known_canonical_link=window.location;var _share_buttons_config={facebook:{provider:"facebook",iconImgUp:"http://i.forbesimg.com/media/assets/png/share_controls_60x18.png",share_canonical:false,count_only:true},twitter:{provider:"twitter-tweet",share_canonical:false,count_only:false},linkedin:{provider:"linkedin",iconImgUp:"http://i.forbesimg.com/media/assets/png/share_controls_60x18.png",share_canonical:false,count_only:false},stumbleupon:{provider:"stumbleupon",iconImgUp:"http://i.forbesimg.com/media/assets/png/share_controls_60x18.png",share_canonical:true,count_only:false},reddit:{provider:"reddit",iconImgUp:"http://i.forbesimg.com/media/assets/png/share_controls_60x18.png",share_canonical:false,count_only:false},email:{provider:"email",iconImgUp:"http://i.forbesimg.com/media/assets/png/share_controls_60x18.png",share_canonical:false,count_only:false}};var _count_config={canonical:"facebook,twitter,stumbleupon,linkedin","short":"facebook,twitter,stumbleupon"};function _init(options){forbes.util.debug("_init");var $target=$("body");if(typeof options!="undefined"&&typeof options.target!="undefined"){$target=$(options.target);}if($target.length<1){return false;}var $gigya_settings=$target.find("div.gigya_settings");if($gigya_settings.length<1){return false;}var settings={};settings.shortLink=$gigya_settings.find(".gigya_shortLink").data("value");settings.canonicalLink=$gigya_settings.find(".gigya_canonicalLink").data("value");try{settings.title=$.parseJSON($gigya_settings.find(".gigya_title").attr("data-value"));}catch(error){debug("Error "+error+" parsing JSON "+$gigya_settings.find(".gigya_title").attr("data-value"));}settings.cid=$gigya_settings.find(".gigya_cid").data("value");settings.buttonContainerPrefixArray=$gigya_settings.find(".gigya_buttonContainerPrefixArray").data("value");settings.counterContainerPrefixArray=$gigya_settings.find(".gigya_counterContainerPrefixArray").data("value");settings.counterDisplayArray=$gigya_settings.find(".gigya_counterDisplayArray").data("value");if(settings.buttonContainerPrefixArray.indexOf(",")!=-1){settings.buttonContainerPrefixArray=settings.buttonContainerPrefixArray.split(",");}if(settings.counterContainerPrefixArray.indexOf(",")!=-1){settings.counterContainerPrefixArray=settings.counterContainerPrefixArray.split(",");}if(settings.counterDisplayArray.indexOf(",")!=-1){settings.counterDisplayArray=settings.counterDisplayArray.split(",");}_setup(settings.shortLink,settings.canonicalLink,settings.title,settings.buttonContainerPrefixArray,settings.counterContainerPrefixArray,settings.cid,settings.counterDisplayArray);}function _setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array){forbes.util.debug("_setup");_last_known_short_link=shortLink;_last_known_canonical_link=canonicalLink;_hide_containers(counter_container_prefix_array);_hide_containers(button_container_prefix_array);_polling_setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array);}function _alert_counts_short(){_alert_counts(_last_known_short_link);}function _alert_counts_canonical(){_alert_counts(_last_known_canonical_link);}function _alert_counts(url){gigya.socialize.getProviderShareCounts({callback:function(response){var msg="";for(var key in response.shareCounts){msg+=key+" "+response.shareCounts[key]+"\n";}alert(msg);},URL:url});}function _polling_setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array){if(typeof gigya!=="undefined"&&typeof gigya.socialize!=="undefined"&&typeof forbes_sharing!=="undefined"&&forbes_sharing){$(document).ready(function(){_onload_setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array);});}else{if(typeof gigya==="undefined"){if(typeof forbes_sharing==="undefined"){}else{if(!forbes_sharing){return;}}}if(_polling_time<_max_polling_time){_polling_time+=_polling_interval;setTimeout(function(){_polling_setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array);},_polling_interval);}}}function _onload_setup(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array){var ready_counts={};var ready_buttons={};if(counter_container_prefix_array&&counter_container_prefix_array.length>0){_init_counter(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array,function(share_counts,key){ready_counts=share_counts;_check_display_button_counters(button_container_prefix_array,counter_container_prefix_array,ready_counts,ready_buttons);});}_init_all_buttons(shortLink,canonicalLink,title,button_container_prefix_array,cid,counterDisplay_array,function(button_loaded,key){ready_buttons=button_loaded;_check_display_button_counters(button_container_prefix_array,counter_container_prefix_array,ready_counts,ready_buttons);});if(forbes.sharing_controls){forbes.sharing_controls.init();}}function _check_display_button_counters(button_container_prefix_array,counter_container_prefix_array,ready_counts,ready_buttons){for(var i=0;i<button_container_prefix_array.length;i++){for(var key in _share_buttons_config){var button_div_name=button_container_prefix_array[i]+"_"+key;var counter_div_name=counter_container_prefix_array[i]+"_"+key;if(typeof ready_buttons[button_div_name]!=="undefined"&&ready_buttons[button_div_name]){$("#"+button_div_name).show();if(typeof ready_counts[key]!=="undefined"){$("#"+counter_div_name).show();$("#"+button_div_name+" + .count_arrow").show();$("#"+button_div_name+" + .box-bottom").show();$("#"+counter_div_name+" + .count_arrow").show();$("#"+counter_div_name+" + .box-bottom").show();}}}}}function _init_all_buttons(shortLink,canonicalLink,title,button_container_prefix_array,cid,counterDisplay_array,buttons_drawn){var button_loaded={};_init_googleplus(button_container_prefix_array,canonicalLink,counterDisplay_array);_init_facebook(button_container_prefix_array,shortLink,canonicalLink,title,button_loaded_callback);for(var i=0;i<button_container_prefix_array.length;i++){for(var key in _share_buttons_config){var button_container=button_container_prefix_array[i]+"_"+key;if(!_share_buttons_config[key].count_only&&$("#"+button_container).size()>0){button_loaded[button_container]=false;_init_button(shortLink,canonicalLink,title,button_container_prefix_array[i],key,cid,button_loaded_callback);}}}check_all_buttons_loaded();function check_all_buttons_loaded(key_done){buttons_drawn(button_loaded,key_done);}function button_loaded_callback(key){button_loaded[key]=true;check_all_buttons_loaded(key);}}function _init_button(shortLink,canonicalLink,title,container_prefix,key,cid,button_loaded_callback){var ua=new gigya.socialize.UserAction();if(typeof title!=="undefined"){if(typeof title[key]!=="undefined"){ua.setTitle(title[key].replace(/"/g,"&quot;"));}else{if(typeof title.generic!=="undefined"){ua.setTitle(title.generic.replace(/"/g,"&quot;"));}}}if(shortLink&&!_share_buttons_config[key].share_canonical){ua.setLinkBack(shortLink);}else{if(canonicalLink){ua.setLinkBack(canonicalLink);}}var params={userAction:ua,showCounts:"none",noButtonBorders:true,iconsOnly:true,shareButtons:[_share_buttons_config[key]],containerID:container_prefix+"_"+key,cid:cid,shortURLs:"never",onLoad:function(){button_loaded_callback(container_prefix+"_"+key);}};gigya.socialize.showShareBarUI(params);}function _init_counter(shortLink,canonicalLink,title,button_container_prefix_array,counter_container_prefix_array,cid,counterDisplay_array,counters_ready_callback){var share_counts={};var url_complete={};var reddit_url_complete={};perform_requests(canonicalLink,_count_config.canonical);perform_requests(shortLink,_count_config["short"]);completeness_check();function perform_requests(url,provider_count_config){if(url){url_complete[url]=false;gigya.socialize.getProviderShareCounts({callback:function(response){callback(url,response);},URL:url,enabledProviders:provider_count_config});reddit_url_complete[url]=false;$.ajax({type:"GET",url:"http://www.reddit.com/api/info.json?url="+url+"&jsonp=?",success:function(data){reddit_callback(url,data);},dataType:"json",cache:true});}}function completeness_check(key_done){counters_ready_callback(share_counts,key_done);}function callback(url,response){if(response.errorCode===0){for(var key in response.shareCounts){if(typeof share_counts[key]==="undefined"){share_counts[key]=0;}share_counts[key]+=response.shareCounts[key];}}else{debug("Error :"+response.errorMessage);}for(var i=0;i<counter_container_prefix_array.length;i++){var counter_container_prefix=counter_container_prefix_array[i];for(var counter_key in _share_buttons_config){$("#"+counter_container_prefix+"_"+counter_key).html(_format_number(share_counts[counter_key]));}}url_complete[url]=true;completeness_check(url);}function reddit_callback(url,data){reddit_url_complete[url]=true;if(typeof share_counts.reddit==="undefined"){share_counts.reddit=0;}if(!!data.data&&!!data.data.children&&data.data.children.length>0){var score=0;for(var i=0;i<data.data.children.length;i++){score+=data.data.children[i].data.score;}share_counts.reddit+=score;}for(var n=0;n<counter_container_prefix_array.length;n++){var counter_container_prefix=counter_container_prefix_array[n];$("#"+counter_container_prefix+"_reddit").html(_format_number(share_counts.reddit));}completeness_check(url);}}function _format_number(num){if(num>1000){return(num/1000).toFixed(1)+"k";}else{return num;}}function _hide_containers(container_prefix_array){for(var i=0;i<container_prefix_array.length;i++){var container_prefix=container_prefix_array[i];for(var key in _share_buttons_config){$("#"+container_prefix+"_"+key).hide();$("#"+container_prefix+"_"+key+" + .box-bottom").hide();$("#"+container_prefix+"_"+key+" + .count_arrow").hide();}}}function _show_containers(container_prefix_array){for(var i=0;i<container_prefix_array.length;i++){var container_prefix=container_prefix_array[i];for(var key in _share_buttons_config){$("#"+container_prefix+"_"+key).show();$("#"+container_prefix+"_"+key+" + .box-bottom").show();$("#"+container_prefix+"_"+key+" + .count_arrow").show();}}}function _init_googleplus(container_array,url,counterDisplay_array){window.___gcfg={lang:"en-US",parsetags:"explicit"};for(var i=0;i<container_array.length;i++){var container=container_array[i]+"_inner_google";var counterDisplay=counterDisplay_array[i];(function(container,counterDisplay){var po=document.createElement("script");po.type="text/javascript";po.async=true;po.src="https://apis.google.com/js/plusone.js";po.onreadystatechange=function(){if(this.readyState=="complete"){_render_googleplus(container,url,counterDisplay);}};po.onload=function(){_render_googleplus(container,url,counterDisplay);};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(po,s);})(container,counterDisplay);}}function _render_googleplus(container,url,counterDisplay){var size="tall";var annotation="bubble";if(counterDisplay){if(counterDisplay=="none"){annotation="none";}else{size=counterDisplay;}}gapi.plusone.render(container,{href:url,annotation:annotation,size:size,recommendations:false});}function _init_facebook(container_array,shortLink,canonicalLink,title,button_loaded_callback){var facebook_link="";if(shortLink&&!_share_buttons_config.facebook.share_canonical){facebook_link=shortLink;}else{if(canonicalLink){facebook_link=canonicalLink;}}var facebook_title="";if(typeof title!=="undefined"){if(typeof title.facebook!=="undefined"){facebook_title=title.facebook;}else{if(typeof title.generic!=="undefined"){facebook_title=title.generic;}}}for(var i=0;i<container_array.length;i++){var container=container_array[i]+"_facebook";$("#"+container).unbind("click").click(function(){debug("Clicked");_gaq.push(["_trackSocial","facebook","Share",facebook_link]);window.open("http://www.facebook.com/sharer/sharer.php?u="+escape(facebook_link)+"&t="+escape(facebook_title),"_blank");});button_loaded_callback(container);}}return{init:_init,setup:_setup,alert_counts:_alert_counts,alert_counts_short:_alert_counts_short,alert_counts_canonical:_alert_counts_canonical};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.gigya_share.init);(function($){$.fn.swipe=function(options){if(!this){return false;}var defaults={fingers:1,threshold:75,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:true,allowPageScroll:"auto"};var LEFT="left";var RIGHT="right";var UP="up";var DOWN="down";var NONE="none";var HORIZONTAL="horizontal";var VERTICAL="vertical";var AUTO="auto";var PHASE_START="start";var PHASE_MOVE="move";var PHASE_END="end";var PHASE_CANCEL="cancel";var hasTouch="ontouchstart" in window,START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV="touchcancel";var phase="start";if(options.allowPageScroll==undefined&&(options.swipe!=undefined||options.swipeStatus!=undefined)){options.allowPageScroll=NONE;}if(options){$.extend(defaults,options);}return this.each(function(){var that=this;var $this=$(this);var triggerElementID=null;var fingerCount=0;var start={x:0,y:0};var end={x:0,y:0};var delta={x:0,y:0};function touchStart(event){var evt=hasTouch?event.touches[0]:event;phase=PHASE_START;if(hasTouch){fingerCount=event.touches.length;}distance=0;direction=null;if(fingerCount==defaults.fingers||!hasTouch){start.x=end.x=evt.pageX;start.y=end.y=evt.pageY;if(defaults.swipeStatus){triggerHandler(event,phase);}}else{touchCancel(event);}that.addEventListener(MOVE_EV,touchMove,false);that.addEventListener(END_EV,touchEnd,false);}function touchMove(event){if(phase==PHASE_END||phase==PHASE_CANCEL){return;}var evt=hasTouch?event.touches[0]:event;end.x=evt.pageX;end.y=evt.pageY;direction=caluculateDirection();if(hasTouch){fingerCount=event.touches.length;}phase=PHASE_MOVE;validateDefaultEvent(event,direction);if(fingerCount==defaults.fingers||!hasTouch){distance=caluculateDistance();if(defaults.swipeStatus){triggerHandler(event,phase,direction,distance);}if(!defaults.triggerOnTouchEnd){if(distance>=defaults.threshold){phase=PHASE_END;triggerHandler(event,phase);touchCancel(event);}}}else{phase=PHASE_CANCEL;triggerHandler(event,phase);touchCancel(event);}}function touchEnd(event){event.preventDefault();distance=caluculateDistance();direction=caluculateDirection();if(defaults.triggerOnTouchEnd){phase=PHASE_END;if((fingerCount==defaults.fingers||!hasTouch)&&end.x!=0){if(distance>=defaults.threshold){triggerHandler(event,phase);touchCancel(event);}else{phase=PHASE_CANCEL;triggerHandler(event,phase);touchCancel(event);}}else{phase=PHASE_CANCEL;triggerHandler(event,phase);touchCancel(event);}}else{if(phase==PHASE_MOVE){phase=PHASE_CANCEL;triggerHandler(event,phase);touchCancel(event);}}that.removeEventListener(MOVE_EV,touchMove,false);that.removeEventListener(END_EV,touchEnd,false);}function touchCancel(event){fingerCount=0;start.x=0;start.y=0;end.x=0;end.y=0;delta.x=0;delta.y=0;}function triggerHandler(event,phase){if(defaults.swipeStatus){defaults.swipeStatus.call($this,event,phase,direction||null,distance||0);}if(phase==PHASE_CANCEL){if(defaults.click&&(fingerCount==1||!hasTouch)&&(isNaN(distance)||distance==0)){defaults.click.call($this,event,event.target);}}if(phase==PHASE_END){if(defaults.swipe){defaults.swipe.call($this,event,direction,distance);}switch(direction){case LEFT:if(defaults.swipeLeft){defaults.swipeLeft.call($this,event,direction,distance);}break;case RIGHT:if(defaults.swipeRight){defaults.swipeRight.call($this,event,direction,distance);}break;case UP:if(defaults.swipeUp){defaults.swipeUp.call($this,event,direction,distance);}break;case DOWN:if(defaults.swipeDown){defaults.swipeDown.call($this,event,direction,distance);}break;}}}function validateDefaultEvent(event,direction){if(defaults.allowPageScroll==NONE){event.preventDefault();}else{var auto=defaults.allowPageScroll==AUTO;switch(direction){case LEFT:if((defaults.swipeLeft&&auto)||(!auto&&defaults.allowPageScroll!=HORIZONTAL)){event.preventDefault();}break;case RIGHT:if((defaults.swipeRight&&auto)||(!auto&&defaults.allowPageScroll!=HORIZONTAL)){event.preventDefault();}break;case UP:if((defaults.swipeUp&&auto)||(!auto&&defaults.allowPageScroll!=VERTICAL)){event.preventDefault();}break;case DOWN:if((defaults.swipeDown&&auto)||(!auto&&defaults.allowPageScroll!=VERTICAL)){event.preventDefault();}break;}}}function caluculateDistance(){return Math.round(Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2)));}function caluculateAngle(){var X=start.x-end.x;var Y=end.y-start.y;var r=Math.atan2(Y,X);var angle=Math.round(r*180/Math.PI);if(angle<0){angle=360-Math.abs(angle);}return angle;}function caluculateDirection(){var angle=caluculateAngle();if((angle<=45)&&(angle>=0)){return LEFT;}else{if((angle<=360)&&(angle>=315)){return LEFT;}else{if((angle>=135)&&(angle<=225)){return RIGHT;}else{if((angle>45)&&(angle<135)){return DOWN;}else{return UP;}}}}}try{this.addEventListener(START_EV,touchStart,false);this.addEventListener(CANCEL_EV,touchCancel);}catch(e){}});};})(jQuery);var forbes=(function(app,$){app.ad_manager=(function($){var _library_loaded=false,_active_units=[];function _init(){debug=forbes.util.debug;window.googletag=window.googletag||{};window.googletag.cmd=window.googletag.cmd||[];}function _load_library(callback){if(_library_loaded){return false;}var useSSL="https:"==document.location.protocol,path=(useSSL?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";$LAB.script(path).wait(function(){callback();_library_loaded=true;});}function get_url_vars(){var vars={},parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value;});return vars;}function _init_publisher_tag(adslot_array){googletag.cmd.push(function(){pa=googletag.pubads();var unitName="/7175/fdc.forbes/";var window_url=window.location.pathname.split("/");var directory=window_url[1];if(directory==="sites"){var google_tag_swimlane=get_url_vars()["ss"];}if(typeof google_tag_channel!=="undefined"){pa.setTargeting("channel",google_tag_channel);}if(typeof google_tag_section!=="undefined"){pa.setTargeting("section",google_tag_section);}if(typeof google_tag_swimlane!=="undefined"){pa.setTargeting("swimlane",google_tag_swimlane);}if(typeof google_tag_specialslot!=="undefined"){pa.setTargeting("specialslot",google_tag_specialslot);}if(typeof google_tag_display_channel!=="undefined"){pa.setTargeting("displaychannel",google_tag_display_channel);}if(typeof google_tag_display_section!=="undefined"){pa.setTargeting("displaysection",google_tag_display_section);}for(var i=0;i<adslot_array.length;i++){googletag.defineSlot(unitName,adslot_array[i].sizes,"dfp-"+adslot_array[i].id).addService(pa).setTargeting("pos",[adslot_array[i].id]);}pa.enableAsyncRendering();pa.collapseEmptyDivs();googletag.enableServices();});}function _display(adslot_array){if(!_library_loaded){_load_library(function(){_display(adslot_array);});return false;}_init_publisher_tag(adslot_array);for(var i=0;i<adslot_array.length;i++){var is_already_active=false;for(var n=0;n<_active_units.length;n++){if(_active_units[n]==adslot_array[i].id){is_already_active=true;}}if(is_already_active){debug("**** is already active");googletag.pubads().refresh();}else{debug("**** NOT active, need to display");googletag.cmd.push(function(){var element_id="dfp-"+adslot_array[i].id;googletag.display(element_id);});_active_units.push(adslot_array[i].id);}}}return{init:_init,display:_display};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.ad_manager.init);var forbes=(function(app,$){app.interstitial_ad=(function($){var debug=null,_defaults={context:null,ms_before_advancing:17*1000,is_exit_interstitial:false,countdown_text:"Next slide in",in_modal:false,ad_position:"int",events:{}},_cookie_name="_forbes_exit_interstitial",_minutes_between_triggering_exit_interstitials=3,_time_between_triggering_exit_interstitials=(_minutes_between_triggering_exit_interstitials*60*1000),_time_start=null,_timer_interval=null,_settings=null,_initialized=false,$ad_layer=null,$interstitial=null;function _init(){debug=forbes.util.debug;_init_exit_triggers();_initialized=true;}function _init_exit_triggers(options){var scope=(typeof options!="undefined"&&typeof options.scope!="undefined")?options.scope:"body";if($("html").hasClass("touch")){return false;}if($.browser.msie&&parseInt($.browser.version,10)<9){return false;}$(scope).find("a").each(function(){var $this=$(this);if(!$this.hasClass("exit_trigger_set")&&!$this.hasClass("disable_interstitial_trigger")&&typeof $this.attr("href")!="undefined"&&$this.attr("href").indexOf("/account/")==-1&&$this.attr("href").indexOf("/find-more/")==-1&&$this.attr("href").indexOf("buysub.com")==-1&&$this.attr("href").indexOf("subs.forbesmagazine.com")==-1&&$this.attr("href").indexOf("forbesmagazine.com")==-1&&$this.attr("href").indexOf("/fdc/subservices.html")==-1&&$this.attr("href").indexOf("newsletters.forbes.com")==-1&&$this.attr("href").indexOf("/ajax/comment/")==-1&&$this.attr("href").indexOf("blogs.forbes.com")==-1&&$this.attr("href").indexOf("/pictures/")==-1&&$this.attr("href").indexOf("javascript")==-1&&$this.attr("href").indexOf("#")!==0&&$this.attr("href")!="#"&&$this.attr("href")!==""){if(($this.attr("href").indexOf("http://")!=-1||$this.attr("href").indexOf("https://")!=-1)&&$this.attr("href").indexOf("/")!=0&&$this.attr("href").indexOf("forbes.com")==-1){}else{if($this.parents(".disable_interstitial_triggers, nav.pagination, .top_link_strip, .content.gallery, .article_actions .sub_links, .user_engagement .recommendations_toggle, #comments ul.tabs").length<1){$this.addClass("exit_trigger_set");$this.on("click:left",_trigger_exit_interstitial);}}}});}function _trigger_exit_interstitial(){var now=new Date(),time=now.getTime(),last_exit_interstitial_time=time,time_elapsed_since_last_interstitial=null,$this=$(this),override,always_trigger=false;if($.cookie(_cookie_name)){last_exit_interstitial_time=parseInt($.cookie(_cookie_name),10);}time_elapsed_since_last_interstitial=(time-last_exit_interstitial_time);if(typeof forbesSecondsBetweenIntTriggerOverride!="undefined"){override=parseInt(forbesSecondsBetweenIntTriggerOverride,10);if(override==-1){return true;}if(override===0){always_trigger=true;}if(override>0){override=override*1000;_time_between_triggering_exit_interstitials=override;}}else{return true;}if($.cookie(_cookie_name)===null){$.cookie(_cookie_name,time,{path:"/",expires:365});return true;}if(time_elapsed_since_last_interstitial>_time_between_triggering_exit_interstitials||always_trigger||!$.cookie(_cookie_name)){_trigger({context:"body",is_exit_interstitial:true,countdown_text:"Next page in",events:{advance:function(){window.location=$this.attr("href");}}});return false;}}function _trigger(options){debug("+++++++ _trigger +++++++");var now=new Date(),time=now.getTime();$.cookie(_cookie_name,time,{path:"/",expires:365});_update_settings(options);_init_layout();_init_timer();_show_interstitial();if(!_settings.in_modal&&!_settings.is_exit_interstitial){forbes.util.scroll_to_obj($(".forbes_interstitial_outer"),{highlight:false,valign:false,ignore_padding_top:true});}}function _init_layout(){var html="",classes="";if(_settings.is_exit_interstitial){classes="is_exit_interstitial";}html+='<div class="forbes_interstitial_outer '+classes+'">';html+='	<div class="forbes_interstitial_inner">';html+='		<div class="interstitial_continuation">';html+='			<span class="link">Continue »</span>';html+='			<br><span class="time_countdown">'+_settings.countdown_text+' <span class="timecode"></span></span>';html+="		</div>";html+='		<div class="interstitial_content">';html+="			<h3>Advertisement</h3>";html+='			<div class="interstitial_ad" id="dfp-'+_settings.ad_position+'"></div>';html+='<div class="loading_state">';html+='<div class="container">';html+='<div class="spinner">';html+='<img src="/assets/img/loading_spinners/43px_reversal_on_transparent.gif" height="43" width="43" alt="loading">';html+="</div>";html+='<div class="bg"></div>';html+="</div>";html+="</div>";html+='<span class="next prev_next active">';html+='<span class="prev_next_container">';html+='<span class="text">Next »</span>';html+='<span class="icon"></span>';html+='<span class="bg"></span>';html+="</span>";html+="</span>";html+='<span class="prev prev_next active">';html+='<span class="prev_next_container">';html+='<span class="text">« Previous</span>';html+='<span class="icon"></span>';html+='<span class="bg"></span>';html+="</span>";html+="</span>";html+="		</div>";html+="	</div>";html+="</div>";$(_settings.context).find(".forbes_interstitial_outer").remove();$(_settings.context).append(html);$interstitial=$(_settings.context).find(".forbes_interstitial_outer");}function _init_timer(){var now=new Date();_time_start=now.getTime();_on_timer_update();clearInterval(_timer_interval);_timer_interval=setInterval(_on_timer_update,1000);}function _on_timer_update(){var now=new Date(),time=now.getTime(),time_since_start=time-_time_start,time_remaining=_settings.ms_before_advancing-time_since_start,seconds_remaining=Math.ceil(time_remaining/1000),timer_copy=seconds_remaining+" second"+((seconds_remaining>1)?"s":"");$interstitial.find(".time_countdown .timecode").html(timer_copy);if(time_since_start>_settings.ms_before_advancing){_advance();return false;}}function _show_interstitial(){$interstitial.show();_load_ad();_bind_events();_update_layout();}function _load_ad(options){var ad_properties={width:640,height:480};$ad_box=$(_settings.context).find(".interstitial_ad");$ad_box.css({display:"block",width:ad_properties.width,height:ad_properties.height});if(forbes.ad_manager){forbes.ad_manager.display([{id:"int",sizes:[[640,480],[300,250]]}]);}_update_layout();}function _bind_events(){$interstitial.find(".interstitial_continuation .link").off("click").on("click",function(e){e.preventDefault();_advance();return false;});$interstitial.find(".prev_next .prev_next_container").off("click").on("click",function(e){e.preventDefault();_advance();return false;});if(_settings.in_modal||_settings.is_exit_interstitial){$(window).on("resize.interstitial",_update_layout);}}function _update_layout(){var min_height=775,inner_height,position_y,$content=$interstitial.find(".interstitial_content"),content_height=$content.height();if(_settings.in_modal===true){inner_height=$("#forbes_modal_window .window_contents").height();position_y=(inner_height-content_height)/2;$content.css({"margin-top":position_y});}else{if(_settings.is_exit_interstitial){$("body").css({overflow:"hidden",position:"relative"});$("header, #follow_bar, #forbes_modal_window").hide();$("#leaderboardad, .block.ad, .dynamic_adslot, section.stack.top_stories .video_block").remove();inner_height=$(window).height();position_y=(inner_height-$content.height())/2;$interstitial.css({position:"fixed","z-index":10000,height:inner_height+"px"});$content.css({"margin-top":position_y});}else{inner_height=min_height;position_y=(inner_height-content_height)/2;var new_height=min_height,dyn_height=$(_settings.context).find(".gallery_main").height();if(dyn_height>new_height){new_height=dyn_height;}$interstitial.css({height:new_height});$content.css({"margin-top":position_y});}}}function _advance(){if(!_settings.is_exit_interstitial){_destroy();}if(typeof _settings.events.advance!="undefined"){_settings.events.advance();}}function _destroy(){$interstitial.hide();$interstitial.remove();clearInterval(_timer_interval);$(window).off("resize.interstitial");}function _update_settings(options){_settings=null;_settings=$.extend({},_defaults,options||{});}return{init:_init,trigger:_trigger,trigger_exit_interstitial:_trigger_exit_interstitial,init_exit_triggers:_init_exit_triggers};}($));return app;}(forbes||{},jQuery));forbes.bootstrap.register(forbes.interstitial_ad.init);