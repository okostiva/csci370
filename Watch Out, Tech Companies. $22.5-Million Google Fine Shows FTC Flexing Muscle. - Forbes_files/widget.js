function contentAdInit(a, b, c, d) { if (typeof this["contentAd" + a] == "undefined") { if (!contentAdWidgetCodeLoaded) { contentAdWidgetCodeLoaded = true; if (d) { (function() { function a() { var a = document.createElement("script"); a.type = "text/javascript"; a.async = true; a.src = b; var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(a, c) } if (window.attachEvent) window.attachEvent("onload", a); else window.addEventListener("load", a, false) })() } else { (function() { var a = document.createElement("script"); a.type = "text/javascript"; a.async = true; a.src = b; var c = document.getElementsByTagName("script")[0]; c.parentNode.insertBefore(a, c) })() } } setTimeout(function() { contentAdInit(a, b, c, d) }, 50) } else { var e = this["contentAd" + a](); var f = document.createElement("div"); f.innerHTML = e; c.parentNode.insertBefore(f, c); if (typeof this["initJQuery" + a] != "undefined") { this["initJQuery" + a]() } } } var contentAdScripts = []; var contentAdUrlRegEx = new RegExp("^(?:http[s]?:)?//(?:test\\.)?api.content.ad/Scripts/widget.js\\?.*?", "i"); var scripts = document.getElementsByTagName("script"); for (var index = 0; index < scripts.length; ++index) { if (contentAdUrlRegEx.test(scripts[index].src)) { contentAdScripts.push(scripts[index]) } } var contentAdScript = contentAdScripts[contentAdScripts.length - 1]; var contentAdParams = function() { var a = {}, b = contentAdScript.src.substring(contentAdScript.src.indexOf("id=")), c = /([^&=]+)=([^&]*)/g, d; while (d = c.exec(b)) { a[decodeURIComponent(d[1])] = decodeURIComponent(d[2]) } return { widgetId: a["wid"], lazyLoad: a["lazyLoad"] == true ? true : false, url: a["url"], server: a["test"] == true ? "test.api.content.ad" : "api.content.ad"} } (); var contentAdWidgetUrl = location.protocol + "//" + contentAdParams.server + "/GetWidget.aspx?" + contentAdScript.src.substring(contentAdScript.src.indexOf("id=")) + "&title=" + encodeURI(escape(document.title)) + (!contentAdParams.url ? "&url=" + encodeURIComponent(window.location) : ""); var contentAdWidgetCodeLoaded = false; contentAdInit(contentAdParams.widgetId, contentAdWidgetUrl, contentAdScript, contentAdParams.lazyLoad)